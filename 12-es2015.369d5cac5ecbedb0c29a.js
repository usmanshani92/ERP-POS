(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Jp5H:function(t,e,n){"use strict";n.r(e),n.d(e,"CompanyManagementModule",(function(){return L}));var a=n("3Pt+"),o=n("aceb"),i=n("vTDv"),r=n("tyNb"),b=n("wwHW"),l=n("LvDl"),c=n("egYu"),s=n("mqiN"),d=n("fXoL"),h=n("jhN1"),C=n("ofXK"),p=n("RS3s");const m=["inputFile"];function u(t,e){1&t&&(d.Ub(0,"p",39),d.Lc(1,"Please enter Name!"),d.Tb())}function g(t,e){1&t&&(d.Ub(0,"p",39),d.Lc(1,"Name already exists!"),d.Tb())}function y(t,e){if(1&t&&(d.Ub(0,"nb-option",40),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.lc("value",t.CountryID),d.Cb(1),d.Mc(t.CountryName)}}function f(t,e){if(1&t&&(d.Ub(0,"nb-option",40),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.lc("value",t.CityId),d.Cb(1),d.Mc(t.CityName)}}function O(t,e){if(1&t&&(d.Sb(0),d.Pb(1,"img",41),d.Rb()),2&t){const t=d.fc();d.Cb(1),d.lc("src",t.ObjCompany.CompanyImg,d.Ac)}}let M=(()=>{class t{constructor(t,e,n,a,o){this.Utilities=t,this.toastrService=e,this.dataservice=n,this._sanitizer=a,this.popup=o,this.ObjCompany=new T,this.ddlCountry=[],this.ddlCity=[],this.Culture="AR",this.btnSaveUpdate="Save",this.ArrData=[],this.settings={hideSubHeader:!0,mode:"external",delete:{confirmDelete:!0,deleteButtonContent:'<i class="nb-trash"></i>'},edit:{confirmSave:!0,editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},columns:{CompanyID:{title:"Company ID",type:"string"},CompanyNameENG:{title:"Company Name Eng",type:"string"},CompanyNameAR:{title:"Company Name AR",type:"string"},ContactPerson:{title:"Contact Person",type:"string"},CountryName:{title:"Country Name",type:"string"}}},this.NameMandatory=!1,this.DuplicateName=!1}ngOnInit(){this.dataservice.checkFormRights("AddCompany","Allow"),this.getLabels(),this.GetDropdownSetups(),this.getGridData()}fileChangeEvent(t){if(this.imageError=null,t.target.files&&t.target.files[0]){const e=20971520,n=["image/png","image/jpeg"],a=15200,o=25600;if(t.target.files[0].size>e)return this.imageError="Maximum size allowed is "+e/1e3+"Mb",!1;if(!l.includes(n,t.target.files[0].type))return this.imageError="Only Images are allowed ( JPG | PNG )",!1;const i=new FileReader;i.onload=t=>{const e=new Image;e.src=t.target.result,e.onload=e=>{const n=e.currentTarget.height,i=e.currentTarget.width;if(console.log(n,i),n>a&&i>o)return this.imageError="Maximum dimentions allowed "+a+"*"+o+"px",!1;{const e=t.target.result;this.cardImageBase64=e,this.ObjCompany.CompanyImg=e,this.isImageSaved=!0}}},i.readAsDataURL(t.target.files[0])}}SaveUpdateData(){if(this.NameMandatory=!1,this.DuplicateName=!1,""==this.ObjCompany.CompanyNameEng)return void(this.NameMandatory=!0);let t=[];this.ObjCompany.CreatedBy=this.Utilities.getUserId(),this.ObjCompany.ModifyBy=this.Utilities.getUserId(),this.dataservice.post("Company/SaveCompany/",this.ObjCompany).subscribe(e=>{e&&(t=e.split("|"),"Insert|"==e?(this.ObjCompany=new T,this.popup.ShowPopup("Insert"),this.myInputVariable.nativeElement.value=""):"Update|"==e?(this.ObjCompany=new T,this.popup.ShowPopup("Update"),this.myInputVariable.nativeElement.value="",this.btnSaveUpdate="Save"):"Duplicate"==t[1]?this.DuplicateName=!0:alert("error"),this.getGridData())},t=>alert("error"))}getGridData(){this.dataservice.get("Company/GetGridData/"+this.Culture).subscribe(t=>{this.isArrayHasValue(t[0].GridData)&&(this.ArrData=t[0].GridData)},t=>alert("error"))}onRoleDelete(t){console.log("Delete Event In Console"),window.confirm("Are you sure you want to delete?")&&(this.DeleteData(t.data.CompanyID),this.ObjCompany=new T)}DeleteData(t){this.dataservice.post("Company/deleteCompany/",t).subscribe(t=>{t&&("SUCCESS"==t?(this.popup.ShowPopup("Delete"),this.btnSaveUpdate="Save"):alert("error"),this.getGridData())},t=>alert("error"))}onEditRowSelect(t){this.dataservice.get("Company/GetGridDataById/"+this.Culture+"/"+t.data.CompanyID).subscribe(t=>{this.isArrayHasValue(t[0].EditData)&&(t=t[0].EditData,console.log(t[0]),this.ObjCompany.CompanyID=t[0].CompanyID,this.ObjCompany.CompanyNameEng=t[0].CompanyNameENG,this.ObjCompany.CompanyNameAR=t[0].CompanyNameAR,this.ObjCompany.ContactPerson=t[0].ContactPerson,this.ObjCompany.TelePhoneNo1=t[0].TelePhoneNo1,this.ObjCompany.TelePhoneNo2=t[0].TelePhoneNo2,this.ObjCompany.Email=t[0].Email,this.ObjCompany.CountryId=t[0].CountryId,this.ObjCompany.CityId=t[0].CityId,this.ObjCompany.Address=t[0].Address,this.ObjCompany.TermsCondition=t[0].TermsCondition,this.ObjCompany.VATAccountNo=t[0].VATAccountNo,this.ObjCompany.VATRegistrationNo=t[0].VATRegistrationNo,this.ObjCompany.CompanyImg=t[0].CompanyImg,null!=this.ObjCompany.CompanyImg&&(this.isImageSaved=!0),this.btnSaveUpdate="Update")},t=>alert("error")),console.log(t)}GetDropdownSetups(){this.dataservice.get("Company/GetSetupData/CompanyName"+this.Culture).subscribe(t=>{this.isArrayHasValue(t[0].Country)&&(this.ddlCountry=t[0].Country,this.ObjCompany.CountryId=this.ddlCountry[0].CountryID),this.isArrayHasValue(t[0].City)&&(this.ddlCity=t[0].City,this.ObjCompany.CityId=this.ddlCity[0].CityId)},t=>alert("error"))}GetCityByCountry(){this.ddlCity=[],this.dataservice.get("Company/GetCityByCountry/"+this.ObjCompany.CountryId).subscribe(t=>{this.isArrayHasValue(t[0].City)?(this.ddlCity=t[0].City,this.ObjCompany.CityId=this.ddlCity[0].CityId):(this.ddlCity.splice(0,0,{CityId:0,CityName:"Select"}),this.ObjCompany.CityId=0)},t=>alert("error"))}getLabels(){this.dataservice.get("Company/Getlabels/AddCompany/"+this.Culture).subscribe(t=>{this.isArrayHasValue(t[0].Labels)&&(this.ArrLabels=t[0].Labels)},t=>alert("error"))}btnCancel(){this.ObjCompany=new T,this.ObjCompany.CountryId=this.ddlCountry[0].CountryID,this.ObjCompany.CityId=this.ddlCity[0].CityId,this.btnSaveUpdate="Save"}getlabelsbyCode(t){return this.ArrLabels.find(e=>e.Code===t).Description}isArrayHasValue(t){return Boolean(Array.isArray(t)&&t.length)}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(s.a),d.Ob(o.sb),d.Ob(b.a),d.Ob(h.b),d.Ob(c.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["ngx-toastr"]],viewQuery:function(t,e){var n;1&t&&d.Pc(m,!0),2&t&&d.tc(n=d.cc())&&(e.myInputVariable=n.first)},decls:88,vars:20,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group"],["for","bCompanyNameEng",1,"label"],["nbInput","","fullWidth","","name","bCompanyNameEng","placeholder","Company Name",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],["for","bCompanyNameAR",1,"label"],["nbInput","","fullWidth","","name","bCompanyNameAR","placeholder","Arabic Company Name",3,"ngModel","ngModelChange"],["for","bContactPerson",1,"label"],["nbInput","","fullWidth","","name","bContactPerson","placeholder","Contact Person",3,"ngModel","ngModelChange"],["for","bTelePhoneNo1",1,"label"],["nbInput","","fullWidth","","name","bTelePhoneNo1","placeholder","Telephone No 1",3,"ngModel","ngModelChange"],["for","bTelePhoneNo2",1,"label"],["nbInput","","fullWidth","","name","bTelePhoneNo2","placeholder","Telephone No 2",3,"ngModel","ngModelChange"],["for","bEmail",1,"label"],["nbInput","","fullWidth","","name","bEmail","placeholder","Email",3,"ngModel","ngModelChange"],["for","bCountryId",1,"label"],["fullWidth","",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],["for","bCityId",1,"label"],["for","bAddress",1,"label"],["nbInput","","fullWidth","","name","bAddress","placeholder","Address",3,"ngModel","ngModelChange"],["for","bTermsCondition",1,"label"],["nbInput","","fullWidth","","name","bTermsCondition","placeholder","Term & Conditions",3,"ngModel","ngModelChange"],["for","bVATAccountNo",1,"label"],["nbInput","","fullWidth","","name","bVATAccountNo","placeholder","VAT Account Number",3,"ngModel","ngModelChange"],["for","bVATRegistrationNo",1,"label"],["nbInput","","fullWidth","","name","bVATRegistrationNo","placeholder","VAT Registration No",3,"ngModel","ngModelChange"],[1,"custom-file","fileInputProfileWrap"],["type","file",1,"fileInputProfile",3,"change"],["inputFile",""],[1,"img-space"],[4,"ngIf"],[2,"text-align","right"],["nbButton","","status","success",2,"width","100px",3,"click"],["nbButton","",3,"click"],[1,"col-md-12","form-group"],[3,"settings","source","delete","edit"],[1,"caption","status-danger"],[3,"value"],[2,"height","80px",3,"src"]],template:function(t,e){1&t&&(d.Pb(0,"link",0),d.Ub(1,"nb-card"),d.Ub(2,"nb-card-header"),d.Lc(3," Add Company "),d.Tb(),d.Ub(4,"nb-card-body"),d.Ub(5,"div",1),d.Ub(6,"div",2),d.Ub(7,"div",3),d.Ub(8,"label",4),d.Lc(9,"Company Name"),d.Tb(),d.Ub(10,"input",5),d.bc("ngModelChange",(function(t){return e.ObjCompany.CompanyNameEng=t})),d.Tb(),d.Jc(11,u,2,0,"p",6),d.Jc(12,g,2,0,"p",6),d.Tb(),d.Tb(),d.Ub(13,"div",2),d.Ub(14,"div",3),d.Ub(15,"label",7),d.Lc(16,"Arabic Company Name"),d.Tb(),d.Ub(17,"input",8),d.bc("ngModelChange",(function(t){return e.ObjCompany.CompanyNameAR=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(18,"div",2),d.Ub(19,"div",3),d.Ub(20,"label",9),d.Lc(21,"Contact Person"),d.Tb(),d.Ub(22,"input",10),d.bc("ngModelChange",(function(t){return e.ObjCompany.ContactPerson=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(23,"div",2),d.Ub(24,"div",3),d.Ub(25,"label",11),d.Lc(26,"Telephone No 1"),d.Tb(),d.Ub(27,"input",12),d.bc("ngModelChange",(function(t){return e.ObjCompany.TelePhoneNo1=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(28,"div",2),d.Ub(29,"div",3),d.Ub(30,"label",13),d.Lc(31,"Telephone No 2"),d.Tb(),d.Ub(32,"input",14),d.bc("ngModelChange",(function(t){return e.ObjCompany.TelePhoneNo2=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(33,"div",2),d.Ub(34,"div",3),d.Ub(35,"label",15),d.Lc(36,"Email"),d.Tb(),d.Ub(37,"input",16),d.bc("ngModelChange",(function(t){return e.ObjCompany.Email=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(38,"div",2),d.Ub(39,"div",3),d.Ub(40,"label",17),d.Lc(41,"Country"),d.Tb(),d.Ub(42,"nb-select",18),d.bc("selectedChange",(function(t){return e.ObjCompany.CountryId=t}))("selectedChange",(function(){return e.GetCityByCountry()})),d.Jc(43,y,2,2,"nb-option",19),d.Tb(),d.Tb(),d.Tb(),d.Ub(44,"div",2),d.Ub(45,"div",3),d.Ub(46,"label",20),d.Lc(47,"City"),d.Tb(),d.Ub(48,"nb-select",18),d.bc("selectedChange",(function(t){return e.ObjCompany.CityId=t})),d.Jc(49,f,2,2,"nb-option",19),d.Tb(),d.Tb(),d.Tb(),d.Ub(50,"div",2),d.Ub(51,"div",3),d.Ub(52,"label",21),d.Lc(53,"Address"),d.Tb(),d.Ub(54,"input",22),d.bc("ngModelChange",(function(t){return e.ObjCompany.Address=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(55,"div",2),d.Ub(56,"div",3),d.Ub(57,"label",23),d.Lc(58,"Term & Conditions"),d.Tb(),d.Ub(59,"input",24),d.bc("ngModelChange",(function(t){return e.ObjCompany.TermsCondition=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(60,"div",2),d.Ub(61,"div",3),d.Ub(62,"label",25),d.Lc(63,"VAT Account Number"),d.Tb(),d.Ub(64,"input",26),d.bc("ngModelChange",(function(t){return e.ObjCompany.VATAccountNo=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(65,"div",2),d.Ub(66,"div",3),d.Ub(67,"label",27),d.Lc(68,"VAT Registration No"),d.Tb(),d.Ub(69,"input",28),d.bc("ngModelChange",(function(t){return e.ObjCompany.VATRegistrationNo=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(70,"div",2),d.Ub(71,"div",3),d.Ub(72,"div",29),d.Ub(73,"input",30,31),d.bc("change",(function(t){return e.fileChangeEvent(t)})),d.Tb(),d.Ub(75,"div",32),d.Jc(76,O,2,1,"ng-container",33),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(77,"nb-card-footer",34),d.Ub(78,"button",35),d.bc("click",(function(){return e.SaveUpdateData()})),d.Lc(79),d.Tb(),d.Ub(80,"button",36),d.bc("click",(function(){return e.btnCancel()})),d.Lc(81,"Cancel"),d.Tb(),d.Tb(),d.Tb(),d.Ub(82,"nb-card"),d.Ub(83,"nb-card-header"),d.Lc(84," Company List "),d.Tb(),d.Ub(85,"nb-card-body"),d.Ub(86,"div",37),d.Ub(87,"ng2-smart-table",38),d.bc("delete",(function(t){return e.onRoleDelete(t)}))("edit",(function(t){return e.onEditRowSelect(t)})),d.Tb(),d.Tb(),d.Tb(),d.Tb()),2&t&&(d.Cb(10),d.lc("ngModel",e.ObjCompany.CompanyNameEng),d.Cb(1),d.lc("ngIf",e.NameMandatory),d.Cb(1),d.lc("ngIf",e.DuplicateName),d.Cb(5),d.lc("ngModel",e.ObjCompany.CompanyNameAR),d.Cb(5),d.lc("ngModel",e.ObjCompany.ContactPerson),d.Cb(5),d.lc("ngModel",e.ObjCompany.TelePhoneNo1),d.Cb(5),d.lc("ngModel",e.ObjCompany.TelePhoneNo2),d.Cb(5),d.lc("ngModel",e.ObjCompany.Email),d.Cb(5),d.lc("selected",e.ObjCompany.CountryId),d.Cb(1),d.lc("ngForOf",e.ddlCountry),d.Cb(5),d.lc("selected",e.ObjCompany.CityId),d.Cb(1),d.lc("ngForOf",e.ddlCity),d.Cb(5),d.lc("ngModel",e.ObjCompany.Address),d.Cb(5),d.lc("ngModel",e.ObjCompany.TermsCondition),d.Cb(5),d.lc("ngModel",e.ObjCompany.VATAccountNo),d.Cb(5),d.lc("ngModel",e.ObjCompany.VATRegistrationNo),d.Cb(7),d.lc("ngIf",e.isImageSaved),d.Cb(3),d.Mc(e.btnSaveUpdate),d.Cb(8),d.lc("settings",e.settings)("source",e.ArrData))},directives:[o.o,o.q,o.n,o.H,a.b,a.p,a.s,C.p,o.bb,C.o,o.p,o.l,p.b,o.U],styles:[".nb-theme-default   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-default   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-dark   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-dark   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-cosmic   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-corporate   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-corporate   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-corporate   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-corporate   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}"]}),t})();class T{constructor(){this.CompanyNameEng="",this.CompanyNameAR="",this.ContactPerson="",this.TelePhoneNo1="",this.TelePhoneNo2="",this.Email="",this.CountryId="",this.CountryName="",this.CityName="",this.Address="",this.TermsCondition="",this.CompanyImg="",this.VATAccountNo="",this.VATRegistrationNo=""}}function U(t,e){if(1&t&&(d.Ub(0,"nb-option",30),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.lc("value",t.CompanyID),d.Cb(1),d.Mc(t.CompanyName)}}function P(t,e){1&t&&(d.Ub(0,"p",31),d.Lc(1,"Please enter Name!"),d.Tb())}function v(t,e){1&t&&(d.Ub(0,"p",31),d.Lc(1,"Name already exists!"),d.Tb())}function N(t,e){if(1&t&&(d.Ub(0,"nb-option",30),d.Lc(1),d.Tb()),2&t){const t=e.$implicit;d.lc("value",t.CityId),d.Cb(1),d.Mc(t.CityName)}}let I=(()=>{class t{constructor(t,e,n,a){this.Utilities=t,this.toastrService=e,this.dataservice=n,this.popup=a,this.ObjBranch=new D,this.ddlCompany=[],this.ddlCity=[],this.Culture="AR",this.ArrData=[],this.btnSaveUpdate="Save",this.settings={hideSubHeader:!0,mode:"external",delete:{confirmDelete:!0,deleteButtonContent:'<i class="nb-trash"></i>'},edit:{confirmSave:!0,editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},columns:{BranchID:{title:"Branch ID",type:"string"},BranchName:{title:"Branch Name",type:"string"},CompanyName:{title:"Company Name",type:"string"},CityName:{title:"City Name",type:"string"}}},this.NameMandatory=!1,this.DuplicateName=!1}ngOnInit(){this.dataservice.checkFormRights("AddBranch","Allow"),this.GetDropdownSetups(),this.getGridData()}SaveUpdateData(){if(this.NameMandatory=!1,this.DuplicateName=!1,""==this.ObjBranch.BranchName)return void(this.NameMandatory=!0);let t=[];this.ObjBranch.CreatedBy=this.Utilities.getUserId(),this.ObjBranch.ModifyBy=this.Utilities.getUserId(),this.dataservice.post("Branch/SaveBranch/",this.ObjBranch).subscribe(e=>{e&&(t=e.split("|"),"Insert|"==e?(this.ObjBranch=new D,this.popup.ShowPopup("Insert"),this.ObjBranch.CompanyID=this.ddlCompany[0].CompanyID,this.ObjBranch.CityId=this.ddlCity[0].CityId):"Update|"==e?(this.ObjBranch=new D,this.popup.ShowPopup("Update"),this.ObjBranch.CompanyID=this.ddlCompany[0].CompanyID,this.ObjBranch.CityId=this.ddlCity[0].CityId,this.btnSaveUpdate="Save"):"Duplicate"==t[1]?this.DuplicateName=!0:alert("error"),this.getGridData())},t=>alert("error"))}GetDropdownSetups(){this.dataservice.get("Branch/GetSetupData/CompanyName"+this.Culture).subscribe(t=>{this.isArrayHasValue(t[0].Company)&&(this.ddlCompany=t[0].Company,this.ObjBranch.CompanyID=this.ddlCompany[0].CompanyID),this.isArrayHasValue(t[0].City)&&(this.ddlCity=t[0].City,this.ObjBranch.CityId=this.ddlCity[0].CityId)},t=>alert("error"))}getGridData(){this.dataservice.get("Branch/GetGridData/"+this.Culture).subscribe(t=>{this.isArrayHasValue(t[0].GridData)&&(this.ArrData=t[0].GridData)},t=>alert("error"))}onRoleDelete(t){console.log("Delete Event In Console"),window.confirm("Are you sure you want to delete?")&&(this.DeleteData(t.data.BranchID),this.ObjBranch=new D)}DeleteData(t){this.dataservice.post("Branch/deleteBranch/",t).subscribe(t=>{t&&("SUCCESS"==t?(this.popup.ShowPopup("Delete"),this.btnSaveUpdate="Save"):alert("error"),this.getGridData())},t=>alert("error"))}onEditRowSelect(t){this.dataservice.get("Branch/GetGridDataById/"+this.Culture+"/"+t.data.BranchID).subscribe(t=>{this.isArrayHasValue(t[0].EditData)&&(t=t[0].EditData,console.log(t[0]),this.ObjBranch.BranchID=t[0].BranchID,this.ObjBranch.CompanyID=t[0].CompanyID,this.ObjBranch.BranchName=t[0].BranchName,this.ObjBranch.MobileNo=t[0].MobileNo,this.ObjBranch.CityId=parseInt(t[0].CityId),this.ObjBranch.POBox=t[0].POBox,this.ObjBranch.FaxNo=t[0].FaxNo,this.ObjBranch.Address=t[0].Address,this.ObjBranch.Email=t[0].Email,this.btnSaveUpdate="Update")},t=>alert("error")),console.log(t)}btnCancel(){this.ObjBranch=new D,this.ObjBranch.CompanyID=this.ddlCompany[0].CompanyID,this.ObjBranch.CityId=this.ddlCity[0].CityId,this.btnSaveUpdate="Save"}isArrayHasValue(t){return Boolean(Array.isArray(t)&&t.length)}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(s.a),d.Ob(o.sb),d.Ob(b.a),d.Ob(c.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["ngx-branch"]],decls:70,vars:17,consts:[[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group"],["for","bCode",1,"label"],["nbInput","","fullWidth","","name","bCode","readonly","",3,"ngModel","ngModelChange"],["for","bCompanyId",1,"label"],["fullWidth","","name","bCompanyId",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],["for","bBranchName",1,"label"],["nbInput","","fullWidth","","name","bBranchName","placeholder","Branch Name",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],["for","bOfficeNumber",1,"label"],["nbInput","","fullWidth","","name","bOfficeNumber","placeholder","Office Number",3,"ngModel","ngModelChange"],["for","bMobileNo",1,"label"],["nbInput","","fullWidth","","name","bMobileNo","placeholder","Mobile Number",3,"ngModel","ngModelChange"],["for","bPOBox",1,"label"],["nbInput","","fullWidth","","name","bPOBox","placeholder","POBox",3,"ngModel","ngModelChange"],["for","bCityId",1,"label"],["fullWidth","","name","bCityId",3,"selected","selectedChange"],["for","bFaxNo",1,"label"],["nbInput","","fullWidth","","name","bFaxNo","placeholder","Fax Number",3,"ngModel","ngModelChange"],["for","bEmail",1,"label"],["nbInput","","fullWidth","","name","bEmail","placeholder","Email",3,"ngModel","ngModelChange"],["for","bOfficeAddress",1,"label"],["nbInput","","fullWidth","","name","bOfficeAddress","placeholder","Office Address",3,"ngModel","ngModelChange"],[2,"text-align","right"],["nbButton","","status","success",2,"width","100px",3,"click"],["nbButton","",3,"click"],[1,"col-md-12","form-group"],[3,"settings","source","delete","edit"],[3,"value"],[1,"caption","status-danger"]],template:function(t,e){1&t&&(d.Ub(0,"nb-card"),d.Ub(1,"nb-card-header"),d.Lc(2," Branch Setup "),d.Tb(),d.Ub(3,"nb-card-body"),d.Ub(4,"div",0),d.Ub(5,"div",1),d.Ub(6,"div",2),d.Ub(7,"label",3),d.Lc(8,"Code"),d.Tb(),d.Ub(9,"input",4),d.bc("ngModelChange",(function(t){return e.ObjBranch.BranchID=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(10,"div",1),d.Ub(11,"div",2),d.Ub(12,"label",5),d.Lc(13,"Company"),d.Tb(),d.Ub(14,"nb-select",6),d.bc("selectedChange",(function(t){return e.ObjBranch.CompanyID=t})),d.Jc(15,U,2,2,"nb-option",7),d.Tb(),d.Tb(),d.Tb(),d.Ub(16,"div",1),d.Ub(17,"div",2),d.Ub(18,"label",8),d.Lc(19,"Branch Name"),d.Tb(),d.Ub(20,"input",9),d.bc("ngModelChange",(function(t){return e.ObjBranch.BranchName=t})),d.Tb(),d.Jc(21,P,2,0,"p",10),d.Jc(22,v,2,0,"p",10),d.Tb(),d.Tb(),d.Ub(23,"div",1),d.Ub(24,"div",2),d.Ub(25,"label",11),d.Lc(26,"Office Number"),d.Tb(),d.Ub(27,"input",12),d.bc("ngModelChange",(function(t){return e.ObjBranch.OfficeNo=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(28,"div",1),d.Ub(29,"div",2),d.Ub(30,"label",13),d.Lc(31,"Mobile Number"),d.Tb(),d.Ub(32,"input",14),d.bc("ngModelChange",(function(t){return e.ObjBranch.MobileNo=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(33,"div",1),d.Ub(34,"div",2),d.Ub(35,"label",15),d.Lc(36,"PO Box"),d.Tb(),d.Ub(37,"input",16),d.bc("ngModelChange",(function(t){return e.ObjBranch.POBox=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(38,"div",1),d.Ub(39,"div",2),d.Ub(40,"label",17),d.Lc(41,"City"),d.Tb(),d.Ub(42,"nb-select",18),d.bc("selectedChange",(function(t){return e.ObjBranch.CityId=t})),d.Jc(43,N,2,2,"nb-option",7),d.Tb(),d.Tb(),d.Tb(),d.Ub(44,"div",1),d.Ub(45,"div",2),d.Ub(46,"label",19),d.Lc(47,"Fax Number"),d.Tb(),d.Ub(48,"input",20),d.bc("ngModelChange",(function(t){return e.ObjBranch.FaxNo=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(49,"div",1),d.Ub(50,"div",2),d.Ub(51,"label",21),d.Lc(52,"Email"),d.Tb(),d.Ub(53,"input",22),d.bc("ngModelChange",(function(t){return e.ObjBranch.Email=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(54,"div",1),d.Ub(55,"div",2),d.Ub(56,"label",23),d.Lc(57,"Office Address"),d.Tb(),d.Ub(58,"textarea",24),d.bc("ngModelChange",(function(t){return e.ObjBranch.Address=t})),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(59,"nb-card-footer",25),d.Ub(60,"button",26),d.bc("click",(function(){return e.SaveUpdateData()})),d.Lc(61),d.Tb(),d.Ub(62,"button",27),d.bc("click",(function(){return e.btnCancel()})),d.Lc(63,"Cancel"),d.Tb(),d.Tb(),d.Tb(),d.Ub(64,"nb-card"),d.Ub(65,"nb-card-header"),d.Lc(66," Branch List "),d.Tb(),d.Ub(67,"nb-card-body"),d.Ub(68,"div",28),d.Ub(69,"ng2-smart-table",29),d.bc("delete",(function(t){return e.onRoleDelete(t)}))("edit",(function(t){return e.onEditRowSelect(t)})),d.Tb(),d.Tb(),d.Tb(),d.Tb()),2&t&&(d.Cb(9),d.lc("ngModel",e.ObjBranch.BranchID),d.Cb(5),d.lc("selected",e.ObjBranch.CompanyID),d.Cb(1),d.lc("ngForOf",e.ddlCompany),d.Cb(5),d.lc("ngModel",e.ObjBranch.BranchName),d.Cb(1),d.lc("ngIf",e.NameMandatory),d.Cb(1),d.lc("ngIf",e.DuplicateName),d.Cb(5),d.lc("ngModel",e.ObjBranch.OfficeNo),d.Cb(5),d.lc("ngModel",e.ObjBranch.MobileNo),d.Cb(5),d.lc("ngModel",e.ObjBranch.POBox),d.Cb(5),d.lc("selected",e.ObjBranch.CityId),d.Cb(1),d.lc("ngForOf",e.ddlCity),d.Cb(5),d.lc("ngModel",e.ObjBranch.FaxNo),d.Cb(5),d.lc("ngModel",e.ObjBranch.Email),d.Cb(5),d.lc("ngModel",e.ObjBranch.Address),d.Cb(3),d.Mc(e.btnSaveUpdate),d.Cb(8),d.lc("settings",e.settings)("source",e.ArrData))},directives:[o.o,o.q,o.n,o.H,a.b,a.p,a.s,o.bb,C.o,C.p,o.p,o.l,p.b,o.U],styles:[".nb-theme-default   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-default   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-dark   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-dark   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-cosmic   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-corporate   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-corporate   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-corporate   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-corporate   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}"]}),t})();class D{constructor(){this.CompanyID="",this.CompanyName="",this.BranchName="",this.OfficeNo="",this.MobileNo="",this.CityId="",this.CityName="",this.POBox="",this.FaxNo="",this.Address="",this.Email=""}}function j(t,e){1&t&&(d.Ub(0,"p",15),d.Lc(1,"Please enter Description!"),d.Tb())}function _(t,e){1&t&&(d.Ub(0,"p",15),d.Lc(1,"Description already exists!"),d.Tb())}let B=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.dataservice=e,this.popup=n,this.any="EN",this.ObjTaxSetup=new S,this.ArrData=[],this.btnSaveUpdate="Save",this.settings={hideSubHeader:!0,mode:"external",delete:{confirmDelete:!0,deleteButtonContent:'<i class="nb-trash"></i>'},edit:{confirmSave:!0,editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},columns:{Code:{title:"Code",type:"string"},Description:{title:"Tax Description",type:"string"},TaxPercent:{title:"Tax Percent",type:"string"}}},this.NameMandatory=!1,this.DuplicateName=!1}ngOnInit(){this.getGridData()}SaveData(){if(this.NameMandatory=!1,this.DuplicateName=!1,""==this.ObjTaxSetup.Description)return void(this.NameMandatory=!0);let t=[];this.dataservice.post("TaxSetup/SaveRecord/",this.ObjTaxSetup).subscribe(e=>{e&&(t=e.split("|"),"Insert|"==e?(this.ObjTaxSetup=new S,this.popup.ShowPopup("Insert")):"Update|"==e?(this.ObjTaxSetup=new S,this.popup.ShowPopup("Update"),this.btnSaveUpdate="Save"):"Duplicate"==t[1]?this.DuplicateName=!0:alert("error"),this.getGridData())},t=>alert("error"))}getGridData(){this.dataservice.get("TaxSetup/GetGridData/"+this.Culture).subscribe(t=>{this.isArrayHasValue(t[0].GridData)&&(this.ArrData=t[0].GridData)},t=>alert("error"))}isArrayHasValue(t){return Boolean(Array.isArray(t)&&t.length)}onRoleDelete(t){console.log("Delete Event In Console"),window.confirm("Are you sure you want to delete?")?(this.DeleteData(t.data.Code),this.ObjTaxSetup=new S):t.confirm.reject()}onEditRowSelect(t){this.dataservice.get("TaxSetup/GetGridDataById/"+this.Culture+"/"+t.data.Code).subscribe(t=>{this.isArrayHasValue(t[0].EditData)&&(t=t[0].EditData,console.log(t[0]),this.ObjTaxSetup.Code=t[0].Code,this.ObjTaxSetup.Description=t[0].Description,this.ObjTaxSetup.TaxPercent=t[0].TaxPercent,this.btnSaveUpdate="Update")},t=>alert("error")),console.log(t)}DeleteData(t){this.dataservice.post("TaxSetup/deleteTax/",t).subscribe(t=>{t&&(t?(this.popup.ShowPopup("Delete"),this.btnSaveUpdate="Save"):alert("error"),this.getGridData())},t=>alert("error"))}btnCancel(){this.ObjTaxSetup=new S}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(o.sb),d.Ob(b.a),d.Ob(c.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["ngx-taxsetup"]],decls:33,vars:8,consts:[[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group"],["for","bCode",1,"label"],["nbInput","","fullWidth","","type","text","name","bCode","readonly","",3,"ngModel","ngModelChange"],["for","bTaxDescription",1,"label"],["nbInput","","fullWidth","","name","bTaxDescription","placeholder","Tax Description",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],["for","bTaxPercent",1,"label"],["type","number","nbInput","","fullWidth","","name","bTaxPercent","placeholder","Tax Percent",3,"ngModel","ngModelChange"],[2,"text-align","right"],["nbButton","","status","success",2,"width","100px",3,"click"],["nbButton","",3,"click"],[1,"col-md-12","form-group"],[3,"settings","source","delete","edit"],[1,"caption","status-danger"]],template:function(t,e){1&t&&(d.Ub(0,"nb-card"),d.Ub(1,"nb-card-header"),d.Lc(2," Tax Setup "),d.Tb(),d.Ub(3,"nb-card-body"),d.Ub(4,"div",0),d.Ub(5,"div",1),d.Ub(6,"div",2),d.Ub(7,"label",3),d.Lc(8,"Code"),d.Tb(),d.Ub(9,"input",4),d.bc("ngModelChange",(function(t){return e.ObjTaxSetup.Code=t})),d.Tb(),d.Tb(),d.Tb(),d.Ub(10,"div",1),d.Ub(11,"div",2),d.Ub(12,"label",5),d.Lc(13,"Tax Description"),d.Tb(),d.Ub(14,"input",6),d.bc("ngModelChange",(function(t){return e.ObjTaxSetup.Description=t})),d.Tb(),d.Jc(15,j,2,0,"p",7),d.Jc(16,_,2,0,"p",7),d.Tb(),d.Tb(),d.Ub(17,"div",1),d.Ub(18,"div",2),d.Ub(19,"label",8),d.Lc(20,"Tax Percent"),d.Tb(),d.Ub(21,"input",9),d.bc("ngModelChange",(function(t){return e.ObjTaxSetup.TaxPercent=t})),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(22,"nb-card-footer",10),d.Ub(23,"button",11),d.bc("click",(function(){return e.SaveData()})),d.Lc(24),d.Tb(),d.Ub(25,"button",12),d.bc("click",(function(){return e.btnCancel()})),d.Lc(26,"Cancel"),d.Tb(),d.Tb(),d.Tb(),d.Ub(27,"nb-card"),d.Ub(28,"nb-card-header"),d.Lc(29," Tax Setup List "),d.Tb(),d.Ub(30,"nb-card-body"),d.Ub(31,"div",13),d.Ub(32,"ng2-smart-table",14),d.bc("delete",(function(t){return e.onRoleDelete(t)}))("edit",(function(t){return e.onEditRowSelect(t)})),d.Tb(),d.Tb(),d.Tb(),d.Tb()),2&t&&(d.Cb(9),d.lc("ngModel",e.ObjTaxSetup.Code),d.Cb(5),d.lc("ngModel",e.ObjTaxSetup.Description),d.Cb(1),d.lc("ngIf",e.NameMandatory),d.Cb(1),d.lc("ngIf",e.DuplicateName),d.Cb(5),d.lc("ngModel",e.ObjTaxSetup.TaxPercent),d.Cb(3),d.Mc(e.btnSaveUpdate),d.Cb(8),d.lc("settings",e.settings)("source",e.ArrData))},directives:[o.o,o.q,o.n,o.H,a.b,a.p,a.s,C.p,a.u,o.p,o.l,p.b],styles:[".nb-theme-default   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-default   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-dark   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-dark   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-cosmic   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-corporate   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-corporate   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-corporate   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-corporate   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}"]}),t})();class S{constructor(){this.Description="",this.TaxPercent=""}}const A=[{path:"",component:(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Ib({type:t,selectors:[["ngx-companymanagement"]],decls:1,vars:0,template:function(t,e){1&t&&d.Pb(0,"router-outlet")},directives:[r.h],encapsulation:2}),t})(),children:[{path:"addcompany",component:M},{path:"branchsetup",component:I},{path:"taxsetup",component:B}]}],w=[a.j,i.a,(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(e){return new(e||t)},imports:[[r.g.forChild(A)],r.g]}),t})(),o.B.forChild(),o.Bb.forChild(),o.r,o.u,o.ob,o.V,o.m,o.I,o.cb,o.wb,p.c],x=[];let L=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(e){return new(e||t)},providers:[...x],imports:[[...w]]}),t})()}}]);
!function(){function e(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw s}}}}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{JGhE:function(r,o,s){"use strict";s.r(o),s.d(o,"UserManagementModule",(function(){return pl}));var c=s("3Pt+"),l=s("aceb"),u=s("RS3s"),h=s("vTDv"),d=s("tyNb"),p=s("wwHW"),f=s("egYu"),b=s("mqiN"),m=s("fXoL"),g=s("ofXK");function v(e,t){1&e&&(m.Ub(0,"p",33),m.Lc(1,"please Enter User ID"),m.Tb())}function y(e,t){1&e&&(m.Ub(0,"p",33),m.Lc(1,"please Enter Name"),m.Tb())}function C(e,t){1&e&&(m.Ub(0,"p",33),m.Lc(1,"please Enter Password"),m.Tb())}function w(e,t){1&e&&(m.Ub(0,"p",33),m.Lc(1,"you have to enter at least 6 digit!"),m.Tb())}function k(e,t){1&e&&(m.Ub(0,"p",33),m.Lc(1,"please Enter Confirm Password"),m.Tb())}function x(e,t){1&e&&(m.Ub(0,"p",33),m.Lc(1,"please Enter Email"),m.Tb())}function M(e,t){1&e&&(m.Ub(0,"p",33),m.Lc(1,"please Enter Valid Email Address"),m.Tb())}function T(e,t){1&e&&(m.Ub(0,"p",33),m.Lc(1,"please Enter Designation"),m.Tb())}function O(e,t){if(1&e&&(m.Ub(0,"nb-option",34),m.Lc(1),m.Tb()),2&e){var n=t.$implicit;m.lc("value",n.GroupID),m.Cb(1),m.Mc(n.GroupName)}}function S(e,t){1&e&&(m.Ub(0,"p",33),m.Lc(1,"please Select Group"),m.Tb())}function N(e,t){if(1&e){var n=m.Vb();m.Ub(0,"span"),m.Ub(1,"nb-toggle",35),m.bc("checkedChange",(function(e){m.yc(n);var r=t.$implicit,o=t.index;return m.fc().onEnabledToggleChange(r.ID,e,o)}))("ngModelChange",(function(e){return m.yc(n),t.$implicit.Active=e})),m.Lc(2),m.Tb(),m.Lc(3,"\xa0 "),m.Tb()}if(2&e){var r=t.$implicit;m.Cb(1),m.lc("ngModel",r.Active),m.Cb(1),m.Nc(" ",r.OutletName," ")}}var P,U=((P=function(){function e(t,n,r){i(this,e),this.dataservice=t,this.popup=n,this.Utilities=r,this.ObjUsers=new D,this.lstarray=[],this.lstarrayGroup=[],this.showlabelUserName=!1,this.showlabelUserCode=!1,this.showlabelPassword=!1,this.showlabelEmail=!1,this.showlabelDesgination=!1,this.showlabelGroup=!1,this.showlabelConfirmpass=!1,this.returnValue=!1,this.showlabelPasswordLimit=!1,this.showlabelvalidEmail=!1,this.userCodeMessage="",this.userNameMessage="",this.passwordMessage="",this.EmailMessage="",this.DesignatioMessage="",this.GroupMessage="",this.Confirmpass="",this.settings={actions:{columnTitle:"",add:!1},mode:"external",edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="fa fa-floppy-o">&nbsp;&nbsp; </i>',cancelButtonContent:'<i class="fa fa-times"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{Code:{title:"Code"},Name:{title:"Name"},Designation:{title:"Designation"},Email:{title:"Email"},Active:{title:"Active"}},attr:{class:"table table-bordered"},hideSubHeader:!1},this.lstOutlets=[],this.tempArr=[],this.UserGrid(),this.ClearValidationLables()}return a(e,[{key:"ngOnInit",value:function(){}},{key:"ngonit",value:function(){this.dataservice.checkFormRights("AddUser","Allow")}},{key:"isEmail",value:function(e){var t;return t=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(e),console.log(t),t}},{key:"ClearSelection",value:function(){this.ObjUsers.Code="",this.ObjUsers.Name="",this.ObjUsers.Active="",this.ObjUsers.Designation="",this.ObjUsers.Password="",this.ObjUsers.ConfirmPassword="",this.ObjUsers.Email="",this.ObjUsers.GroupID=""}},{key:"ClearValidationLables",value:function(){this.showlabelUserCode=!1,this.showlabelUserName=!1,this.showlabelPassword=!1,this.showlabelConfirmpass=!1,this.showlabelDesgination=!1,this.showlabelEmail=!1,this.showlabelGroup=!1,this.showlabelPasswordLimit=!1,this.showlabelvalidEmail=!1}},{key:"SaveData",value:function(){var e=this;if(this.ClearValidationLables(),null!=this.ObjUsers.Code&&""!=this.ObjUsers.Code||(this.showlabelUserCode=!0),null!=this.ObjUsers.Name&&""!=this.ObjUsers.Name||(this.showlabelUserName=!0),null!=this.ObjUsers.Password&&""!=this.ObjUsers.Password||(this.showlabelPassword=!0),null!=this.ObjUsers.ConfirmPassword&&""!=this.ObjUsers.ConfirmPassword||(this.showlabelConfirmpass=!0),null!=this.ObjUsers.Designation&&""!=this.ObjUsers.Designation||(this.showlabelDesgination=!0),null!=this.ObjUsers.Email&&""!=this.ObjUsers.Email||(this.showlabelEmail=!0,this.showlabelvalidEmail=!1),null!=this.ObjUsers.GroupID&&""!=this.ObjUsers.GroupID||(this.showlabelGroup=!0),1!=this.showlabelUserName&&1!=this.showlabelUserCode&&1!=this.showlabelPassword&&1!=this.showlabelConfirmpass&&1!=this.showlabelDesgination&&1!=this.showlabelEmail&&1!=this.showlabelGroup){if(!(this.ObjUsers.Password.length<6))return this.showlabelPasswordLimit=!0,this.isEmail(this.ObjUsers.Email)?(this.showlabelvalidEmail=!1,this.showlabelPasswordLimit=!1,this.showlabelEmail=!1,this.ObjUsers.CreatedBy=this.Utilities.getUserId(),this.ObjUsers.ModifyBy=this.Utilities.getUserId(),void this.dataservice.post("Users/SaveUsers",this.ObjUsers).subscribe((function(t){t&&("Insert"==t?(e.popup.ShowPopup("Insert"),e.ClearSelection(),e.UserGrid(),e.ClearValidationLables()):"Update"==t?(e.popup.ShowPopup("Update"),e.ClearSelection(),e.UserGrid(),e.ClearValidationLables()):"Name"==t?e.showlabelUserName=!0:"Password"==t&&(e.showlabelPassword=!0))}),(function(e){return alert("error")}))):(this.showlabelvalidEmail=!0,this.showlabelPasswordLimit=!1,void(this.showlabelEmail=!1));this.showlabelPasswordLimit=!0}}},{key:"CheckSamePassword",value:function(e){this.showlabelConfirmpass=!1,this.ObjUsers.Password!=this.ObjUsers.ConfirmPassword&&(this.showlabelConfirmpass=!0)}},{key:"PasswordLimit",value:function(e){this.ObjUsers.Password.length<6?(this.showlabelPassword=!1,this.showlabelPasswordLimit=!0):(this.showlabelPassword=!1,this.showlabelPasswordLimit=!1)}},{key:"UserGrid",value:function(){var e=this;this.dataservice.get("Users/GetSetupData").subscribe((function(t){e.lstarray=t[0].Country,e.lstarrayGroup=t[0].Group,e.ObjUsers.GroupID=e.lstarrayGroup[0].GroupID,e.isArrayHasValue(t[0].Outlets)&&(e.lstOutlets=t[0].Outlets)}))}},{key:"onDeleteConfirm",value:function(e){var t=this;window.confirm("Are you sure you want to delete?")&&(this.ObjUsers.Code=e.data.Code,this.dataservice.post("Users/DeleteUsers",this.ObjUsers).subscribe((function(e){e&&"1"==e&&(t.popup.ShowPopup("Delete"),t.UserGrid(),t.ClearSelection(),t.ClearValidationLables())}),(function(e){return alert("error")})))}},{key:"onedit",value:function(e){this.ClearValidationLables(),this.ObjUsers.Code=e.data.Code,this.ObjUsers.Name=e.data.Name,this.ObjUsers.Designation=e.data.Designation,this.ObjUsers.GroupID=e.data.GroupID,this.ObjUsers.Password=e.data.Password,this.ObjUsers.ConfirmPassword=e.data.Password,this.ObjUsers.Active=e.data.Active,this.ObjUsers.Email=e.data.Email,this.ObjUsers.ActioCommand="Update",this.ObjUsers.OldCode=e.data.Code,this.GetOutletListByUser(this.ObjUsers.Code)}},{key:"Cancel",value:function(){this.ObjUsers=new D,this.ClearValidationLables(),this.UserGrid()}},{key:"GetOutletListByUser",value:function(e){var t=this;this.lstOutlets=[],this.dataservice.get("Users/GetOutletListByUser/"+e).subscribe((function(e){if(t.isArrayHasValue(e[0].Outlets)){t.lstOutlets=e[0].Outlets,t.tempArr=new Array;for(var n=0;n<t.lstOutlets.length;n++)1==t.lstOutlets[n].Active&&t.tempArr.push(t.lstOutlets[n].ID)}}),(function(e){return alert("error")}))}},{key:"onEnabledToggleChange",value:function(e,t){if(t)this.tempArr.push(e),this.ObjUsers.OutletIds=this.tempArr.toString(),console.log(this.tempArr.toString());else{var n=this.tempArr.findIndex((function(t){return t==e}));-1!=n&&this.tempArr.splice(n,1),this.ObjUsers.OutletIds=this.tempArr.toString(),console.log(this.tempArr.toString())}}},{key:"isArrayHasValue",value:function(e){return Boolean(Array.isArray(e)&&e.length)}}]),e}()).\u0275fac=function(e){return new(e||P)(m.Ob(p.a),m.Ob(f.a),m.Ob(b.a))},P.\u0275cmp=m.Ib({type:P,selectors:[["ngx-toastr"]],decls:78,vars:21,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","UserCode",1,"label"],["type","text","nbInput","","fullWidth","","maxlength","10","name","UserCode","placeholder","User ID",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],["for","UserName",1,"label"],["type","text","nbInput","","fullWidth","","name","UserName","autocomplete","off","placeholder","User Name",3,"ngModel","ngModelChange"],[1,"col-md-6","col-sm-12"],["for","UserPasswor",1,"label"],["type","password","nbInput","","fullWidth","","autocomplete","off","name","UserPasswor","placeholder","Password",3,"ngModel","ngModelChange","blur"],["for","ConfirmPass",1,"label"],["type","password","fullWidth","","name","ConfirmPass","nbInput","","placeholder","Confirm Password",3,"ngModel","blur","ngModelChange"],["for","UserEmail",1,"label"],["type","email","fullWidth","","nbInput","","name","UserEmail","ngModel","","email","true","placeholder","Email ID",3,"ngModel","ngModelChange"],["for","UserDesignation",1,"label"],["type","text","nbInput","","fullWidth","","name","UserDesignation","placeholder","Designation",3,"ngModel","ngModelChange"],["for","UserGroup",1,"label"],["name","UserGroup","fullWidth","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","IsActive",1,"label"],[1,"checkbox"],["name","IsActive",3,"ngModel","ngModelChange"],[1,"col-md-12","col-sm-12"],[1,"example-items-rows"],[1,"label",2,"margin-left","1.5%"],[4,"ngFor","ngForOf"],[1,"pull-right"],["nbButton","","status","success",2,"width","99px",3,"click"],["nbButton","",3,"click"],[1,"col-md-12"],[3,"settings","source","delete","edit"],[1,"caption","status-danger"],[3,"value"],["status","success",3,"ngModel","checkedChange","ngModelChange"]],template:function(e,t){1&e&&(m.Pb(0,"link",0),m.Ub(1,"nb-card"),m.Ub(2,"nb-card-header"),m.Lc(3," User Information "),m.Tb(),m.Ub(4,"nb-card-body"),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"div",3),m.Ub(8,"label",4),m.Lc(9,"User ID"),m.Tb(),m.Ub(10,"input",5),m.bc("ngModelChange",(function(e){return t.ObjUsers.Code=e})),m.Tb(),m.Jc(11,v,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(12,"div",2),m.Ub(13,"div",3),m.Ub(14,"label",7),m.Lc(15,"User Name"),m.Tb(),m.Ub(16,"input",8),m.bc("ngModelChange",(function(e){return t.ObjUsers.Name=e})),m.Tb(),m.Jc(17,y,2,0,"p",6),m.Tb(),m.Tb(),m.Tb(),m.Ub(18,"div",1),m.Ub(19,"div",9),m.Ub(20,"div",3),m.Ub(21,"label",10),m.Lc(22,"Password "),m.Tb(),m.Ub(23,"input",11),m.bc("ngModelChange",(function(e){return t.ObjUsers.Password=e}))("blur",(function(e){return t.PasswordLimit(e)})),m.Tb(),m.Jc(24,C,2,0,"p",6),m.Jc(25,w,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(26,"div",9),m.Ub(27,"div",3),m.Ub(28,"label",12),m.Lc(29,"Confirm Password "),m.Tb(),m.Ub(30,"input",13),m.bc("blur",(function(e){return t.CheckSamePassword(e)}))("ngModelChange",(function(e){return t.ObjUsers.ConfirmPassword=e})),m.Tb(),m.Jc(31,k,2,0,"p",6),m.Tb(),m.Tb(),m.Tb(),m.Ub(32,"div",1),m.Ub(33,"div",9),m.Ub(34,"div",3),m.Ub(35,"label",14),m.Lc(36,"Email ID"),m.Tb(),m.Ub(37,"input",15),m.bc("ngModelChange",(function(e){return t.ObjUsers.Email=e})),m.Tb(),m.Jc(38,x,2,0,"p",6),m.Jc(39,M,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(40,"div",9),m.Ub(41,"div",3),m.Ub(42,"label",16),m.Lc(43,"Designation "),m.Tb(),m.Ub(44,"input",17),m.bc("ngModelChange",(function(e){return t.ObjUsers.Designation=e})),m.Tb(),m.Jc(45,T,2,0,"p",6),m.Tb(),m.Tb(),m.Tb(),m.Ub(46,"div",1),m.Ub(47,"div",9),m.Ub(48,"div",3),m.Ub(49,"label",18),m.Lc(50,"Group"),m.Tb(),m.Ub(51,"nb-select",19),m.bc("ngModelChange",(function(e){return t.ObjUsers.GroupID=e})),m.Jc(52,O,2,2,"nb-option",20),m.Tb(),m.Jc(53,S,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(54,"div",9),m.Ub(55,"div",3),m.Ub(56,"label",21),m.Lc(57,"Is Active"),m.Tb(),m.Ub(58,"div",22),m.Ub(59,"nb-checkbox",23),m.bc("ngModelChange",(function(e){return t.ObjUsers.Active=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(60,"div",24),m.Ub(61,"nb-card-body",25),m.Ub(62,"div",1),m.Ub(63,"label",26),m.Lc(64,"Outlets / Branches"),m.Tb(),m.Tb(),m.Jc(65,N,4,2,"span",27),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(66,"nb-card-footer"),m.Ub(67,"div",28),m.Ub(68,"button",29),m.bc("click",(function(){return t.SaveData()})),m.Lc(69,"Save"),m.Tb(),m.Ub(70,"button",30),m.bc("click",(function(){return t.Cancel()})),m.Lc(71,"Cancel"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(72,"nb-card"),m.Ub(73,"nb-card-header"),m.Lc(74," User Information Detail "),m.Tb(),m.Ub(75,"nb-card-body"),m.Ub(76,"div",31),m.Ub(77,"ng2-smart-table",32),m.bc("delete",(function(e){return t.onDeleteConfirm(e)}))("edit",(function(e){return t.onedit(e)})),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(10),m.lc("ngModel",t.ObjUsers.Code),m.Cb(1),m.lc("ngIf",t.showlabelUserCode),m.Cb(5),m.lc("ngModel",t.ObjUsers.Name),m.Cb(1),m.lc("ngIf",t.showlabelUserName),m.Cb(6),m.lc("ngModel",t.ObjUsers.Password),m.Cb(1),m.lc("ngIf",t.showlabelPassword),m.Cb(1),m.lc("ngIf",t.showlabelPasswordLimit),m.Cb(5),m.lc("ngModel",t.ObjUsers.ConfirmPassword),m.Cb(1),m.lc("ngIf",t.showlabelConfirmpass),m.Cb(6),m.lc("ngModel",t.ObjUsers.Email),m.Cb(1),m.lc("ngIf",t.showlabelEmail),m.Cb(1),m.lc("ngIf",t.showlabelvalidEmail),m.Cb(5),m.lc("ngModel",t.ObjUsers.Designation),m.Cb(1),m.lc("ngIf",t.showlabelDesgination),m.Cb(6),m.lc("ngModel",t.ObjUsers.GroupID),m.Cb(1),m.lc("ngForOf",t.lstarrayGroup),m.Cb(1),m.lc("ngIf",t.showlabelGroup),m.Cb(6),m.lc("ngModel",t.ObjUsers.Active),m.Cb(6),m.lc("ngForOf",t.lstOutlets),m.Cb(12),m.lc("settings",t.settings)("source",t.lstarray))},directives:[l.o,l.q,l.n,l.H,c.b,c.k,c.p,c.s,g.p,c.c,l.bb,g.o,l.t,l.p,l.l,u.b,l.U,l.tb],styles:[".nb-theme-default   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-default   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-dark   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-dark   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-cosmic   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-cosmic   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}.nb-theme-corporate   [_nghost-%COMP%]   .position-select[_ngcontent-%COMP%]{min-width:13rem}.nb-theme-corporate   [_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:block}[dir=ltr]   .nb-theme-corporate   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-right:1rem}[dir=rtl]   .nb-theme-corporate   [_nghost-%COMP%]   nb-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:1rem}"]}),P),D=function e(){i(this,e),this.OutletIds=""},I=s("tk/3");function E(e,t){if(1&e){var n=m.Vb();m.Ub(0,"p",16),m.bc("ngModelChange",(function(e){return m.yc(n),m.fc().PNameMessage=e})),m.Lc(1),m.Tb()}if(2&e){var r=m.fc();m.lc("ngModel",r.PNameMessage),m.Cb(1),m.Mc(r.GroupNameMessage)}}function _(e,t){if(1&e){var n=m.Vb();m.Ub(0,"tr"),m.Ub(1,"td",17),m.Lc(2),m.Tb(),m.Ub(3,"td"),m.Lc(4),m.Tb(),m.Ub(5,"td"),m.Lc(6),m.Tb(),m.Ub(7,"td"),m.Ub(8,"nb-checkbox",18),m.bc("ngModelChange",(function(e){return m.yc(n),t.$implicit.Allow=e}))("change",(function(e){m.yc(n);var r=t.$implicit;return m.fc().checkAllow(e,r.IndexNo,r.EntityCode,r.ModuleCode,r.EntityName,!1,!1,!1)})),m.Tb(),m.Tb(),m.Ub(9,"td"),m.Ub(10,"nb-checkbox",18),m.bc("ngModelChange",(function(e){return m.yc(n),t.$implicit.New=e}))("change",(function(e){m.yc(n);var r=t.$implicit;return m.fc().checkNew(e,r.IndexNo,r.EntityCode,r.ModuleCode,r.EntityName,!1,!1,!1)})),m.Tb(),m.Tb(),m.Ub(11,"td"),m.Ub(12,"nb-checkbox",18),m.bc("ngModelChange",(function(e){return m.yc(n),t.$implicit.Edit=e}))("change",(function(e){m.yc(n);var r=t.$implicit;return m.fc().checkEdit(e,r.IndexNo,r.EntityCode,r.ModuleCode,r.EntityName,!1,!1,!1)})),m.Tb(),m.Tb(),m.Ub(13,"td"),m.Ub(14,"nb-checkbox",18),m.bc("ngModelChange",(function(e){return m.yc(n),t.$implicit.Del=e}))("change",(function(e){m.yc(n);var r=t.$implicit;return m.fc().checkDelete(e,r.IndexNo,r.EntityCode,r.ModuleCode,r.EntityName,!1,!1,!1)})),m.Tb(),m.Tb(),m.Ub(15,"td"),m.Ub(16,"nb-checkbox",18),m.bc("ngModelChange",(function(e){return m.yc(n),t.$implicit.Printing=e}))("change",(function(e){m.yc(n);var r=t.$implicit;return m.fc().checkPrint(e,r.IndexNo,r.EntityCode,r.ModuleCode,r.EntityName,!1,!1,!1)})),m.Tb(),m.Tb(),m.Tb()}if(2&e){var r=t.$implicit,o=t.index;m.Db("data-index",o),m.Cb(2),m.Nc(" ",r.EntityCode," "),m.Cb(2),m.Nc(" ",r.ModuleCode," "),m.Cb(2),m.Nc(" ",r.EntityName," "),m.Cb(2),m.nc("id","cbAllow",o,""),m.lc("ngModel",r.Allow),m.Cb(2),m.nc("id","cbNew",o,""),m.lc("ngModel",r.New),m.Cb(2),m.nc("id","cbEdit",o,""),m.lc("ngModel",r.Edit),m.Cb(2),m.nc("id","cbDelete",o,""),m.lc("ngModel",r.Del),m.Cb(2),m.nc("id","cbPrint",o,""),m.lc("ngModel",r.Printing)}}var A,j,L=((A=function(){function e(t,n,r,o){i(this,e),this._userService=t,this._http=n,this.popup=r,this.Utilities=o,this.objuserRole=new R,this.lstarrayForms=[],this.lstarrayGroup=[],this.showlabelGroupName=!1,this.GroupNameMessage="",this.dummyArr=[],this.settings={actions:{columnTitle:"",add:!1},mode:"external",edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="fa fa-floppy-o">&nbsp;&nbsp; </i>',cancelButtonContent:'<i class="fa fa-times"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{GroupID:{title:"Code"},GroupName:{title:"Group Name"}},attr:{class:"table table-bordered"},hideSubHeader:!1}}return a(e,[{key:"ngOnInit",value:function(){this._userService.checkFormRights("AddUserRole","Allow"),this.objuserRole.CompanyId=this.Utilities.getSubscriptionID(),this.UserGroupGrid(),this.UserFormNameGrid()}},{key:"UserGroupGrid",value:function(){var e=this;this._userService.get("UserRights/GetUserGroupData/"+this.objuserRole.CompanyId).subscribe((function(t){e.lstarrayGroup=t[0].Details,e.objuserRole.MaxCode=t[0].MaxCode[0].Column1+1}))}},{key:"UserFormNameGrid",value:function(){var e=this;this._userService.get("UserRights/GetFormNames").subscribe((function(t){e.lstarrayForms=t[0].Forms}))}},{key:"SavesGroup",value:function(){var e=this;this.GroupNameMessage="",this.objuserRole.CreatedBy=this.Utilities.getUserId(),this.objuserRole.ModifyBy=this.Utilities.getUserId(),this.objuserRole.ModifyOn=this.Utilities.GetCurrentDateTime(),this.objuserRole.CreatedOn=this.Utilities.GetCurrentDateTime(),this.objuserRole.CompanyId=this.Utilities.getSubscriptionID(),null!=this.objuserRole.GroupName&&""!=this.objuserRole.GroupName?this._userService.post("UserRights/SaveGroupDetails",[this.objuserRole,this.lstarrayForms,this.objuserRole.GroupID]).subscribe((function(t){"Insert"==t?(e.popup.ShowPopup("Insert"),e.UserGroupGrid(),e.objuserRole=new R,e.UserFormNameGrid(),e.GroupNameMessage=""):"Update"==t?(e.popup.ShowPopup("Update"),e.UserGroupGrid(),e.objuserRole=new R,e.UserFormNameGrid(),e.GroupNameMessage=""):(e.showlabelGroupName=!0,e.GroupNameMessage=t)})):(this.showlabelGroupName=!0,this.GroupNameMessage="Please Enter Group Name")}},{key:"CancelClick",value:function(){this.objuserRole=new R,this.UserGroupGrid(),this.GroupNameMessage=""}},{key:"onDeleteConfirm",value:function(e){var t=this;window.confirm("Are you sure you want to delete?")&&(this.objuserRole.GroupID=e.data.GroupID,this._userService.post("UserRights/DeleteUsersGroup",this.objuserRole).subscribe((function(e){e&&(t.popup.ShowPopup("Delete"),t.UserGroupGrid())}),(function(e){return alert("error")})))}},{key:"checkAllow",value:function(e,t,n,r,o,i,s,a){this.GroupNameMessage="",this.lstarrayForms.find((function(e){return e.IndexNo==t}))?this.lstarrayForms.find((function(e){return e.IndexNo==t})).Allow=e.target.checked:this.lstarrayForms.push({IndexNo:t,EntityCode:n,module:r,EntityNam:o,Allow:e.target.checked,Edit:i,Printing:s,Del:a,GroupRoleDetail:"",OrderNumber:""})}},{key:"checkNew",value:function(e,t,n,r,o,i,s,a){this.GroupNameMessage="",this.lstarrayForms.find((function(e){return e.IndexNo==t}))?this.lstarrayForms.find((function(e){return e.IndexNo==t})).Add=e.target.checked:this.lstarrayForms.push({IndexNo:t,EntityCode:n,module:r,EntityNam:o,Allow:i,Edit:e.target.checked,Printing:s,Del:a,GroupRoleDetail:"",OrderNumber:""})}},{key:"checkEdit",value:function(e,t,n,r,o,i,s,a){this.GroupNameMessage="",this.lstarrayForms.find((function(e){return e.IndexNo==t}))?this.lstarrayForms.find((function(e){return e.IndexNo==t})).Edit=e.target.checked:this.lstarrayForms.push({IndexNo:t,EntityCode:n,module:r,EntityNam:o,Allow:i,Edit:e.target.checked,Printing:s,Del:a,GroupRoleDetail:"",OrderNumber:""})}},{key:"checkPrint",value:function(e,t,n,r,o,i,s,a){this.GroupNameMessage="",this.lstarrayForms.find((function(e){return e.IndexNo==t}))?this.lstarrayForms.find((function(e){return e.IndexNo==t})).Printing=e.target.checked:this.lstarrayForms.push({IndexNo:t,EntityCode:n,module:r,EntityNam:o,Allow:i,Edit:s,Printing:e.target.checked,Del:a,GroupRoleDetail:"",OrderNumber:""})}},{key:"checkDelete",value:function(e,t,n,r,o,i,s,a){this.GroupNameMessage="",this.lstarrayForms.find((function(e){return e.IndexNo==t}))?this.lstarrayForms.find((function(e){return e.IndexNo==t})).Del=e.target.checked:this.lstarrayForms.push({IndexNo:t,EntityCode:n,module:r,EntityNam:o,Allow:i,Edit:s,Printing:a,Del:e.target.checked,GroupRoleDetail:"",OrderNumber:""})}},{key:"EditGroups",value:function(e){var t=this;this.UserFormNameGrid(),this.objuserRole.GroupID=e.data.GroupID,this._userService.get("UserRights/GetGroupsData/"+this.objuserRole.GroupID).subscribe((function(e){t.objuserRole.GroupName=e[0].GroupRole[0].GroupName;for(var n=function(n){t.lstarrayForms.find((function(t){return t.EntityCode==e[0].GroupRole[n].EntityCode}))&&(t.lstarrayForms.find((function(t){return t.EntityCode==e[0].GroupRole[n].EntityCode})).Allow=e[0].GroupRole[n].Allow,t.lstarrayForms.find((function(t){return t.EntityCode==e[0].GroupRole[n].EntityCode})).New=e[0].GroupRole[n].New,t.lstarrayForms.find((function(t){return t.EntityCode==e[0].GroupRole[n].EntityCode})).Edit=e[0].GroupRole[n].Edit,t.lstarrayForms.find((function(t){return t.EntityCode==e[0].GroupRole[n].EntityCode})).Del=e[0].GroupRole[n].Del,t.lstarrayForms.find((function(t){return t.EntityCode==e[0].GroupRole[n].EntityCode})).Printing=e[0].GroupRole[n].Printing)},r=0;r<e[0].GroupRole.length;r++)n(r)}))}}]),e}()).\u0275fac=function(e){return new(e||A)(m.Ob(p.a),m.Ob(I.a),m.Ob(f.a),m.Ob(b.a))},A.\u0275cmp=m.Ib({type:A,selectors:[["ngx-userrole"]],decls:53,vars:6,consts:[[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","inputFirstName",1,"label"],["type","text","nbInput","","fullWidth","","id","inputCode","name","Code","placeholder","Code","disabled","",3,"ngModel","ngModelChange"],["for","inputUnitName",1,"label"],["type","text","nbInput","","fullWidth","","id","GroupName","name","Description","placeholder","Group Name",3,"ngModel","ngModelChange"],["class","caption status-danger",3,"ngModel","ngModelChange",4,"ngIf"],[1,"row",2,"float","right","margin-right","3px"],["type","submit","nbButton","",2,"width","99px",3,"click"],["type","submit","nbButton","",3,"click"],["allowFiltering","true","allowPaging","true",3,"settings","source","delete","edit"],[1,"table-responsive"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"caption","status-danger",3,"ngModel","ngModelChange"],[2,"display","none"],["status","success",3,"id","ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(m.Ub(0,"nb-card"),m.Ub(1,"nb-card-header"),m.Lc(2,"User Security Group"),m.Tb(),m.Ub(3,"nb-card-body"),m.Ub(4,"div",0),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"label",3),m.Lc(8,"Code"),m.Tb(),m.Ub(9,"input",4),m.bc("ngModelChange",(function(e){return t.objuserRole.MaxCode=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(10,"div",1),m.Ub(11,"div",2),m.Ub(12,"label",5),m.Lc(13,"Group Name"),m.Tb(),m.Ub(14,"input",6),m.bc("ngModelChange",(function(e){return t.objuserRole.GroupName=e})),m.Tb(),m.Jc(15,E,2,2,"p",7),m.Tb(),m.Tb(),m.Tb(),m.Ub(16,"div",8),m.Ub(17,"button",9),m.bc("click",(function(){return t.SavesGroup()})),m.Lc(18,"Save"),m.Tb(),m.Lc(19,"\xa0\xa0 "),m.Ub(20,"button",10),m.bc("click",(function(){return t.CancelClick()})),m.Lc(21,"Cancel"),m.Tb(),m.Tb(),m.Pb(22,"br"),m.Pb(23,"br"),m.Tb(),m.Tb(),m.Ub(24,"nb-card"),m.Ub(25,"nb-card-header"),m.Lc(26,"Group Names List"),m.Tb(),m.Ub(27,"nb-card-body"),m.Ub(28,"ng2-smart-table",11),m.bc("delete",(function(e){return t.onDeleteConfirm(e)}))("edit",(function(e){return t.EditGroups(e)})),m.Tb(),m.Tb(),m.Tb(),m.Ub(29,"nb-card"),m.Ub(30,"nb-card-header"),m.Lc(31,"Group Rights List"),m.Tb(),m.Ub(32,"nb-card-body"),m.Ub(33,"div",12),m.Ub(34,"table",13),m.Ub(35,"thead"),m.Ub(36,"tr"),m.Ub(37,"th",14),m.Lc(38,"Module"),m.Tb(),m.Ub(39,"th",14),m.Lc(40,"Entity Name"),m.Tb(),m.Ub(41,"th",14),m.Lc(42,"View"),m.Tb(),m.Ub(43,"th",14),m.Lc(44,"Add"),m.Tb(),m.Ub(45,"th",14),m.Lc(46,"Edit"),m.Tb(),m.Ub(47,"th",14),m.Lc(48,"Delete"),m.Tb(),m.Ub(49,"th",14),m.Lc(50,"Print"),m.Tb(),m.Tb(),m.Tb(),m.Ub(51,"tbody"),m.Jc(52,_,17,14,"tr",15),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(9),m.lc("ngModel",t.objuserRole.MaxCode),m.Cb(5),m.lc("ngModel",t.objuserRole.GroupName),m.Cb(1),m.lc("ngIf",t.showlabelGroupName),m.Cb(13),m.lc("settings",t.settings)("source",t.lstarrayGroup),m.Cb(24),m.lc("ngForOf",t.lstarrayForms))},directives:[l.o,l.q,l.n,l.H,c.b,c.p,c.s,g.p,l.l,u.b,g.o,l.t],styles:[""]}),A),R=function e(){i(this,e)},B=((j=function(){function e(t){i(this,e),this.dataservice=t,this.ObjChangePass=new z}return a(e,[{key:"ngOnInit",value:function(){}},{key:"onblur",value:function(e){this.ObjChangePass.Password!=this.ObjChangePass.ConfirmPassword&&alert("Password not match")}},{key:"OnSaveClick",value:function(){this.ObjChangePass.Password==this.ObjChangePass.ConfirmPassword?this.dataservice.post("Users/UpdatePassword",this.ObjChangePass).subscribe((function(e){alert("Password Changed Successfuly")})):alert("Password not match")}},{key:"Cancel",value:function(){this.ObjChangePass=new z}}]),e}()).\u0275fac=function(e){return new(e||j)(m.Ob(p.a))},j.\u0275cmp=m.Ib({type:j,selectors:[["ngx-change-password"]],decls:28,vars:3,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group"],["for","OldPass",1,"label"],["type","password","fullWidth","","nbInput","","name","OldPass","placeholder","Old Password",3,"ngModel","ngModelChange"],["for","NewPass",1,"label"],["type","password","fullWidth","","nbInput","","name","NewPass","placeholder","New Password",3,"ngModel","ngModelChange"],["for","ConfirmPass",1,"label"],["type","password","fullWidth","","nbInput","","name","ConfirmPass","placeholder","Confirm Password",3,"ngModel","ngModelChange","blur"],[1,"pull-right"],["nbButton","","status","success",2,"margin-right","1rem","width","99px",3,"click"],["nbButton","",3,"click"]],template:function(e,t){1&e&&(m.Pb(0,"link",0),m.Ub(1,"nb-card"),m.Ub(2,"nb-card-header"),m.Lc(3," Change password "),m.Tb(),m.Ub(4,"nb-card-body"),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"div",3),m.Ub(8,"label",4),m.Lc(9,"Old Password"),m.Tb(),m.Ub(10,"input",5),m.bc("ngModelChange",(function(e){return t.ObjChangePass.OldPassword=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(11,"div",2),m.Ub(12,"div",3),m.Ub(13,"label",6),m.Lc(14,"New Password"),m.Tb(),m.Ub(15,"input",7),m.bc("ngModelChange",(function(e){return t.ObjChangePass.Password=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(16,"div",1),m.Ub(17,"div",2),m.Ub(18,"div",3),m.Ub(19,"label",8),m.Lc(20,"Confirm Password "),m.Tb(),m.Ub(21,"input",9),m.bc("ngModelChange",(function(e){return t.ObjChangePass.ConfirmPassword=e}))("blur",(function(e){return t.onblur(e)})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(22,"nb-card-footer"),m.Ub(23,"div",10),m.Ub(24,"button",11),m.bc("click",(function(){return t.OnSaveClick()})),m.Lc(25," Save "),m.Tb(),m.Ub(26,"button",12),m.bc("click",(function(){return t.Cancel()})),m.Lc(27," Cancel "),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(10),m.lc("ngModel",t.ObjChangePass.OldPassword),m.Cb(5),m.lc("ngModel",t.ObjChangePass.Password),m.Cb(6),m.lc("ngModel",t.ObjChangePass.ConfirmPassword))},directives:[l.o,l.q,l.n,l.H,c.b,c.p,c.s,l.p,l.l],styles:[""]}),j),z=function e(){i(this,e)},F=s("LvDl"),V=["ChooseFileName"];function G(e,t){1&e&&(m.Ub(0,"p",27),m.Lc(1,"please Enter Code"),m.Tb())}function $(e,t){1&e&&(m.Ub(0,"p",27),m.Lc(1,"please enter Currency Code"),m.Tb())}function H(e,t){if(1&e&&(m.Sb(0),m.Pb(1,"img",28),m.Rb()),2&e){var n=m.fc();m.Cb(1),m.lc("src",n.objcurrency.impagePath,m.Ac)}}function J(e,t){1&e&&(m.Ub(0,"p",27),m.Lc(1,"please Currency Name"),m.Tb())}function W(e,t){1&e&&(m.Ub(0,"p",27),m.Lc(1,"Currency Name is Alredy Exists"),m.Tb())}function q(e,t){1&e&&(m.Ub(0,"p",27),m.Lc(1,"please Enter Rate"),m.Tb())}var K,X=((K=function(){function e(t,n){i(this,e),this.ObjDataservice=t,this.popup=n,this.showlabelCode=!1,this.showlabelcurrencyCode=!1,this.showlabelCurrencyName=!1,this.showlabelRate=!1,this.showlabelExistsName=!1,this.isImageSaved=!0,this.objcurrency=new Y,this.settings={actions:{columnTitle:"",add:!1},mode:"external",edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="fa fa-floppy-o">&nbsp;&nbsp; </i>',cancelButtonContent:'<i class="fa fa-times"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{CurrencyCode:{title:"Currency Code"},CurrencyName:{title:"Name"},Rate:{title:"Rate"},CurrencyImage:{title:"Image",type:"html",valuePrepareFunction:function(e){return'<img width="100px" src="'.concat(e,'" />')}}},attr:{class:"table table-bordered"},hideSubHeader:!1}}return a(e,[{key:"ngOnInit",value:function(){this.ObjDataservice.checkFormRights("posCurrency","Allow"),this.LoadGridData(),this.objcurrency.impagePath="assets/images/ImageUppload.png"}},{key:"fileChangeEvent",value:function(e){var t=this;if(this.imageError=null,e.target.files&&e.target.files[0]){if(e.target.files[0].size>20971520)return this.imageError="Maximum size allowed is 20971.52Mb",!1;if(!F.includes(["image/png","image/jpeg"],e.target.files[0].type))return this.imageError="Only Images are allowed ( JPG | PNG )",!1;var n=new FileReader;n.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(n){var r=n.currentTarget.height,o=n.currentTarget.width;if(console.log(r,o),r>15200&&o>25600)return t.imageError="Maximum dimentions allowed 15200*25600px",!1;var i=e.target.result;t.cardImageBase64=i,t.objcurrency.impagePath=i,t.objcurrency.CurrencyImage=i,t.isImageSaved=!0}},n.readAsDataURL(e.target.files[0])}}},{key:"LoadGridData",value:function(){var e=this;this.ObjDataservice.get("Currency/GetCurrencyData").subscribe((function(t){e.objcurrency.ID=t[0].MaxCount[0].Column1+1,e.lystarray=t[0].Currency}))}},{key:"OnSaveRecord",value:function(){var e=this;this.HideValidationLabel(),null!=this.objcurrency.ID&&""!=this.objcurrency.ID||(this.showlabelCode=!0),null!=this.objcurrency.CurrencyCode&&""!=this.objcurrency.CurrencyCode||(this.showlabelcurrencyCode=!0),null!=this.objcurrency.Rate&&""!=this.objcurrency.Rate||(this.showlabelRate=!0),null!=this.objcurrency.CurrencyName&&""!=this.objcurrency.CurrencyName||(this.showlabelCurrencyName=!0),null!=this.objcurrency.CurrencyName&&null!=this.objcurrency.CurrencyName&&null!=this.objcurrency.Rate&&null!=this.objcurrency.CurrencyName&&1!=this.showlabelCode&&1!=this.showlabelcurrencyCode&&1!=this.showlabelRate&&1!=this.showlabelCurrencyName&&this.ObjDataservice.post("Currency/SaveCurrency",this.objcurrency).subscribe((function(t){"Insert"==t?(e.popup.ShowPopup("Insert"),e.Cancel()):"Update"==t?(e.popup.ShowPopup("Update"),e.Cancel()):"Name"==t?e.showlabelExistsName=!0:alert(t)}),(function(e){return alert("error")}))}},{key:"ClearSelection",value:function(){this.objcurrency=new Y}},{key:"HideValidationLabel",value:function(){this.showlabelCode=!1,this.showlabelCurrencyName=!1,this.showlabelRate=!1,this.showlabelcurrencyCode=!1,this.showlabelExistsName=!1}},{key:"onDeleteConfirm",value:function(e){var t=this;window.confirm("Are you sure you want to delete?")&&(this.objcurrency.CurrencyCode=e.data.CurrencyCode,this.objcurrency.ID=e.data.ID,this.ObjDataservice.post("Currency/DeleteCurrency",this.objcurrency).subscribe((function(e){e&&"1"==e&&(t.popup.ShowPopup("Delete"),t.Cancel())}),(function(e){return alert("error")})))}},{key:"onedit",value:function(e){this.HideValidationLabel(),this.objcurrency.ID=e.data.ID,this.objcurrency.CurrencyCode=e.data.CurrencyCode,this.objcurrency.CurrencyName=e.data.CurrencyName,this.objcurrency.Rate=e.data.Rate,this.objcurrency.IsDefault=e.data.IsDefault,this.objcurrency.CurrencyImage=e.data.CurrencyImage,this.objcurrency.impagePath=e.data.CurrencyImage,this.isImageSaved=!0,this.objcurrency.Flag="Update"}},{key:"Cancel",value:function(){this.LoadGridData(),this.HideValidationLabel(),this.ClearSelection(),this.ChooseFileName.nativeElement.value="",this.objcurrency.impagePath="assets/images/ImageUppload.png"}}]),e}()).\u0275fac=function(e){return new(e||K)(m.Ob(p.a),m.Ob(f.a))},K.\u0275cmp=m.Ib({type:K,selectors:[["ngx-currency"]],viewQuery:function(e,t){var n;1&e&&m.Pc(V,!0),2&e&&m.tc(n=m.cc())&&(t.ChooseFileName=n.first)},decls:57,vars:13,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group"],["for","Code",1,"label"],["type","text","nbInput","","fullWidth","","disabled","","maxlength","10","width","100%","name","Code","placeholder","Code",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],["for","currency",1,"label"],["type","text","nbInput","","fullWidth","","name","currency","width","100%","placeholder","Currency Code",3,"ngModel","ngModelChange"],[1,"col-md-5","col-sm-12"],[1,"img-space"],[4,"ngIf"],["type","file",1,"fileInputProfile",2,"margin-left","4rem",3,"change"],["ChooseFileName",""],[1,"col-md-6"],["for","CurrencyName",1,"label"],["type","text","nbInput","","fullWidth","","name","CurrencyName","width","100%","placeholder","Currency Name",3,"ngModel","ngModelChange"],["for","Rate",1,"label"],["type","number","fullWidth","","name","Rate","width","100%","nbInput","","placeholder","Rate",3,"ngModel","ngModelChange"],[1,"col-sm-12"],["for","IsActive",1,"label"],[3,"ngModel","ngModelChange"],[1,"pull-right"],["nbButton","","status","success",2,"width","99px","margin-right","1rem",3,"click"],["nbButton","",3,"click"],[1,"col-md-12"],[3,"settings","source","delete","edit"],[1,"caption","status-danger"],[2,"border","1px solid #ddd","padding","5px","width","150px","height","150px","margin-left","4rem",3,"src"]],template:function(e,t){1&e&&(m.Pb(0,"link",0),m.Ub(1,"nb-card"),m.Ub(2,"nb-card-header"),m.Lc(3," Currency Information "),m.Tb(),m.Ub(4,"nb-card-body"),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"div",3),m.Ub(8,"label",4),m.Lc(9,"Code"),m.Tb(),m.Ub(10,"input",5),m.bc("ngModelChange",(function(e){return t.objcurrency.ID=e})),m.Tb(),m.Jc(11,G,2,0,"p",6),m.Tb(),m.Ub(12,"div",3),m.Ub(13,"label",7),m.Lc(14,"Currency Code"),m.Tb(),m.Ub(15,"input",8),m.bc("ngModelChange",(function(e){return t.objcurrency.CurrencyCode=e})),m.Tb(),m.Jc(16,$,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(17,"div",9),m.Ub(18,"div",3),m.Ub(19,"div",10),m.Jc(20,H,2,1,"ng-container",11),m.Tb(),m.Pb(21,"br"),m.Ub(22,"input",12,13),m.bc("change",(function(e){return t.fileChangeEvent(e)})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(24,"div",1),m.Ub(25,"div",14),m.Ub(26,"div",3),m.Ub(27,"label",15),m.Lc(28,"Currency Name "),m.Tb(),m.Ub(29,"input",16),m.bc("ngModelChange",(function(e){return t.objcurrency.CurrencyName=e})),m.Tb(),m.Jc(30,J,2,0,"p",6),m.Jc(31,W,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(32,"div",14),m.Ub(33,"div",3),m.Ub(34,"label",17),m.Lc(35,"Rate "),m.Tb(),m.Ub(36,"input",18),m.bc("ngModelChange",(function(e){return t.objcurrency.Rate=e})),m.Tb(),m.Jc(37,q,2,0,"p",6),m.Tb(),m.Tb(),m.Tb(),m.Ub(38,"div",1),m.Ub(39,"div",19),m.Ub(40,"div",3),m.Ub(41,"label",20),m.Lc(42,"Is Active"),m.Tb(),m.Pb(43,"br"),m.Ub(44,"nb-checkbox",21),m.bc("ngModelChange",(function(e){return t.objcurrency.IsDefault=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(45,"nb-card-footer"),m.Ub(46,"div",22),m.Ub(47,"button",23),m.bc("click",(function(){return t.OnSaveRecord()})),m.Lc(48,"Save"),m.Tb(),m.Ub(49,"button",24),m.bc("click",(function(){return t.Cancel()})),m.Lc(50,"Cancel"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(51,"nb-card"),m.Ub(52,"nb-card-header"),m.Lc(53," Currency Information Detail "),m.Tb(),m.Ub(54,"nb-card-body"),m.Ub(55,"div",25),m.Ub(56,"ng2-smart-table",26),m.bc("delete",(function(e){return t.onDeleteConfirm(e)}))("edit",(function(e){return t.onedit(e)})),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(10),m.lc("ngModel",t.objcurrency.ID),m.Cb(1),m.lc("ngIf",t.showlabelCode),m.Cb(4),m.lc("ngModel",t.objcurrency.CurrencyCode),m.Cb(1),m.lc("ngIf",t.showlabelcurrencyCode),m.Cb(4),m.lc("ngIf",t.isImageSaved),m.Cb(9),m.lc("ngModel",t.objcurrency.CurrencyName),m.Cb(1),m.lc("ngIf",t.showlabelCurrencyName),m.Cb(1),m.lc("ngIf",t.showlabelExistsName),m.Cb(5),m.lc("ngModel",t.objcurrency.Rate),m.Cb(1),m.lc("ngIf",t.showlabelRate),m.Cb(7),m.lc("ngModel",t.objcurrency.IsDefault),m.Cb(12),m.lc("settings",t.settings)("source",t.lystarray))},directives:[l.o,l.q,l.n,l.H,c.b,c.k,c.p,c.s,g.p,c.u,l.t,l.p,l.l,u.b],styles:[""]}),K),Y=function e(){i(this,e),this.impagePath="",this.ID="",this.CurrencyCode="",this.Rate="",this.IsDefault="",this.CurrencyName="",this.CurrencyImage="",this.CreatedBy="",this.CreatedOn="",this.ModifyBy="",this.ModifyOn="",this.Flag="Insert",this.DocumentFile="",this.fileName=""};function Q(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please Enter Denomination Symbol "),m.Tb())}function Z(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"Denomination Name Alredy Exists"),m.Tb())}function ee(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please Enter Denomination Name "),m.Tb())}var te,ne=((te=function(){function e(t,n){i(this,e),this.dataservice=t,this.popup=n,this.ObjDenomination=new re,this.lstarray=[],this.lstCount=[],this.showlabelSymbol=!1,this.showlabelSizeNameExists=!1,this.settings={actions:{columnTitle:"",add:!1},mode:"external",edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{CurrencySymbol:{title:"Symbol"},CurrencyName:{title:"Description"},Rate:{title:"Rate"}},attr:{class:"table table-bordered"},hideSubHeader:!1}}return a(e,[{key:"ngOnInit",value:function(){this.dataservice.checkFormRights("CashDenomination","Allow"),this.CashdeominationGrid()}},{key:"Hidevalidaton",value:function(){this.showlabelSymbol=!1,this.showlabelSizeNameExists=!1}},{key:"OnSaveClick",value:function(){var e=this;this.showlabelSymbol=!0,this.showlabelSizeNameExists=!1,""==this.ObjDenomination.CurrencyName||null==this.ObjDenomination.CurrencyName?(this.showlabelSymbol=!0,this.showlabelSizeNameExists=!1):this.dataservice.post("CashDenomination/SaveRecord",this.ObjDenomination).subscribe((function(t){"Insert"==t?(e.popup.ShowPopup("Insert"),e.CashdeominationGrid(),e.showlabelSymbol=!1,e.showlabelSizeNameExists=!1,e.Cancel()):"Update"==t?(e.popup.ShowPopup("Update"),e.CashdeominationGrid(),e.showlabelSymbol=!1,e.showlabelSizeNameExists=!1,e.Cancel()):(e.showlabelSymbol=!1,e.showlabelSizeNameExists=!0)}))}},{key:"Cancel",value:function(){this.ObjDenomination=new re,this.CashdeominationGrid(),this.Hidevalidaton()}},{key:"CashdeominationGrid",value:function(){var e=this;this.dataservice.get("CashDenomination/GetDenominationdData").subscribe((function(t){e.lstarray=t[0].Denomination,e.lstCount=t[0].Count,e.ObjDenomination.Code=e.lstCount[0].Column1+1}))}},{key:"onedit",value:function(e){this.showlabelSymbol=!1,this.showlabelSizeNameExists=!1,this.ObjDenomination.Code=e.data.Code,this.ObjDenomination.CurrencyName=e.data.CurrencyName,this.ObjDenomination.CurrencySymbol=e.data.CurrencySymbol,this.ObjDenomination.Rate=e.data.Rate,this.ObjDenomination.Active=e.data.Active}},{key:"onDeleteConfirm",value:function(e){var t=this;window.confirm("Are you sure you want to delete?")&&(this.showlabelSymbol=!1,this.showlabelSizeNameExists=!1,this.ObjDenomination.Code=e.data.Code,this.dataservice.post("CashDenomination/DeleteRecord",this.ObjDenomination).subscribe((function(e){e&&"1"==e&&(t.popup.ShowPopup("Delete"),t.CashdeominationGrid(),t.ObjDenomination=new re,t.Hidevalidaton())}),(function(e){return alert("error")})))}}]),e}()).\u0275fac=function(e){return new(e||te)(m.Ob(p.a),m.Ob(f.a))},te.\u0275cmp=m.Ib({type:te,selectors:[["ngx-cashdenomination"]],decls:45,vars:10,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"row"],[1,"col-md-6","col-sm-12"],["for","Code",1,"label"],["type","text","fullWidth","","nbInput","","name","Code","placeholder","Code","disabled","",3,"ngModel","ngModelChange"],["for","Symbol",1,"label"],["type","text","fullWidth","","nbInput","","name","Symbol","placeholder","Denomination Symbol",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],["for","Name",1,"label"],["type","text","fullWidth","","nbInput","","name","Name","placeholder","Denomination Name",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIfShowlabelSymbol","ngIf"],["for","rate",1,"label"],["type","number","fullWidth","","nbInput","","name","rate","placeholder","Rate",3,"ngModel","ngModelChange"],[1,"form-group"],["for","IsActive",1,"label"],[3,"ngModel","ngModelChange"],[1,"pull-right"],["nbButton","","status","success",2,"margin-right","1rem","width","99px",3,"click"],["nbButton","",3,"click"],[1,"col-md-12"],[3,"settings","source","delete","edit"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(m.Pb(0,"link",0),m.Ub(1,"nb-card"),m.Ub(2,"nb-card-header"),m.Lc(3," Cash Denomination Infromation "),m.Tb(),m.Ub(4,"nb-card-body"),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"label",3),m.Lc(8,"Code"),m.Tb(),m.Ub(9,"input",4),m.bc("ngModelChange",(function(e){return t.ObjDenomination.Code=e})),m.Tb(),m.Tb(),m.Ub(10,"div",2),m.Ub(11,"label",5),m.Lc(12,"Denomination Symbol"),m.Tb(),m.Ub(13,"input",6),m.bc("ngModelChange",(function(e){return t.ObjDenomination.CurrencySymbol=e})),m.Tb(),m.Jc(14,Q,2,0,"p",7),m.Tb(),m.Tb(),m.Ub(15,"div",1),m.Ub(16,"div",2),m.Ub(17,"label",8),m.Lc(18,"Denomination Name "),m.Tb(),m.Ub(19,"input",9),m.bc("ngModelChange",(function(e){return t.ObjDenomination.CurrencyName=e})),m.Tb(),m.Jc(20,Z,2,0,"p",10),m.Jc(21,ee,2,0,"p",7),m.Tb(),m.Ub(22,"div",2),m.Ub(23,"label",11),m.Lc(24,"Rate "),m.Tb(),m.Ub(25,"input",12),m.bc("ngModelChange",(function(e){return t.ObjDenomination.Rate=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(26,"div",1),m.Ub(27,"div",2),m.Ub(28,"div",13),m.Ub(29,"label",14),m.Lc(30,"Active"),m.Tb(),m.Pb(31,"br"),m.Ub(32,"nb-checkbox",15),m.bc("ngModelChange",(function(e){return t.ObjDenomination.Active=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(33,"nb-card-footer"),m.Ub(34,"div",16),m.Ub(35,"button",17),m.bc("click",(function(){return t.OnSaveClick()})),m.Lc(36,"Save"),m.Tb(),m.Ub(37,"button",18),m.bc("click",(function(){return t.Cancel()})),m.Lc(38,"Cancel"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(39,"nb-card"),m.Ub(40,"nb-card-header"),m.Lc(41," Cash Denomination Detail "),m.Tb(),m.Ub(42,"nb-card-body"),m.Ub(43,"div",19),m.Ub(44,"ng2-smart-table",20),m.bc("delete",(function(e){return t.onDeleteConfirm(e)}))("edit",(function(e){return t.onedit(e)})),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(9),m.lc("ngModel",t.ObjDenomination.Code),m.Cb(4),m.lc("ngModel",t.ObjDenomination.CurrencySymbol),m.Cb(1),m.lc("ngIf",t.showlabelSymbol),m.Cb(5),m.lc("ngModel",t.ObjDenomination.CurrencyName),m.Cb(1),m.lc("ngIf",t.showlabelSizeNameExists),m.Cb(1),m.lc("ngIf",t.showlabelSymbol),m.Cb(4),m.lc("ngModel",t.ObjDenomination.Rate),m.Cb(7),m.lc("ngModel",t.ObjDenomination.Active),m.Cb(12),m.lc("settings",t.settings)("source",t.lstarray))},directives:[l.o,l.q,l.n,l.H,c.b,c.p,c.s,g.p,c.u,l.t,l.p,l.l,u.b],styles:[""]}),te),re=function e(){i(this,e),this.Code="",this.CurrencyName="",this.CurrencySymbol="",this.Rate="",this.Active="",this.CurrencyImage="",this.Sort="",this.CreatedBy="",this.CreatedOn="",this.ModifyBy="",this.ModifyOn=""},oe=["ChooseFileName"];function ie(e,t){1&e&&(m.Ub(0,"p",32),m.Lc(1,"please Enter Code"),m.Tb())}function se(e,t){1&e&&(m.Ub(0,"p",32),m.Lc(1,"Please Enter Payment Name"),m.Tb())}function ae(e,t){1&e&&(m.Ub(0,"p",32),m.Lc(1,"Payment Name is Alredy Exists"),m.Tb())}function ce(e,t){if(1&e&&(m.Sb(0),m.Pb(1,"img",33),m.Rb()),2&e){var n=m.fc();m.Cb(1),m.lc("src",n.objPayMode.impagePath,m.Ac)}}function le(e,t){1&e&&(m.Ub(0,"p",32),m.Lc(1,"Please Enter Currency Name"),m.Tb())}function ue(e,t){1&e&&(m.Ub(0,"p",32),m.Lc(1,"please Enter Description"),m.Tb())}var he,de=((he=function(){function e(t,n,r){i(this,e),this.ObjDataservice=t,this.popup=n,this.Utilities=r,this.showlabelCode=!1,this.showlabelcurrencyCode=!1,this.showlabelCurrencyName=!1,this.showlabelRate=!1,this.showlabelExistsName=!1,this.isImageSaved=!0,this.objPayMode=new pe,this.settings={actions:{columnTitle:"",add:!1},mode:"external",edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="fa fa-floppy-o">&nbsp;&nbsp; </i>',cancelButtonContent:'<i class="fa fa-times"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{Code:{title:"Code"},PaymentName:{title:"Name"},Rate:{title:"Rate"},Image:{title:"Image"}},attr:{class:"table table-bordered"},hideSubHeader:!1}}return a(e,[{key:"ngOnInit",value:function(){this.ObjDataservice.checkFormRights("posPaymentMode","Allow"),this.LoadGridData(),this.objPayMode.impagePath="assets/images/ImageUppload.png"}},{key:"fileChangeEvent",value:function(e){var t=this;if(this.imageError=null,e.target.files&&e.target.files[0]){if(e.target.files[0].size>20971520)return this.imageError="Maximum size allowed is 20971.52Mb",!1;if(!F.includes(["image/png","image/jpeg"],e.target.files[0].type))return this.imageError="Only Images are allowed ( JPG | PNG )",!1;var n=new FileReader;n.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(n){var r=n.currentTarget.height,o=n.currentTarget.width;if(console.log(r,o),r>15200&&o>25600)return t.imageError="Maximum dimentions allowed 15200*25600px",!1;var i=e.target.result;t.cardImageBase64=i,t.objPayMode.impagePath=i,t.objPayMode.PamyentImage=i,t.isImageSaved=!0}},n.readAsDataURL(e.target.files[0])}}},{key:"LoadGridData",value:function(){var e=this;this.ObjDataservice.get("PaymentMode/GetPaymentModeData").subscribe((function(t){e.objPayMode.Code=t[0].MaxCount[0].Column1+1,e.lystarray=t[0].payment}))}},{key:"OnSaveRecord",value:function(){var e=this;this.HideValidationLabel(),null!=this.objPayMode.Code&&""!=this.objPayMode.Code||(this.showlabelCode=!0),null!=this.objPayMode.PaymentName&&""!=this.objPayMode.PaymentName||(this.showlabelcurrencyCode=!0),null!=this.objPayMode.Rate&&""!=this.objPayMode.Rate||(this.showlabelRate=!0),null!=this.objPayMode.Description&&null!=this.objPayMode.Description&&""!=this.objPayMode.Description||(this.showlabelCurrencyName=!0),null!=this.objPayMode.PaymentName&&null!=this.objPayMode.Code&&null!=this.objPayMode.Rate&&null!=this.objPayMode.PaymentName&&1!=this.showlabelCode&&1!=this.showlabelcurrencyCode&&1!=this.showlabelRate&&1!=this.showlabelCurrencyName&&(this.objPayMode.CreatedBy=this.Utilities.getUserId(),this.objPayMode.ModifyBy=this.Utilities.getUserId(),this.objPayMode.ModifyOn=this.Utilities.GetCurrentDateTime(),this.objPayMode.CreatedOn=this.Utilities.GetCurrentDateTime(),this.objPayMode.CompanyId=this.Utilities.getSubscriptionID(),this.ObjDataservice.post("PaymentMode/SavePayment",this.objPayMode).subscribe((function(t){"Insert"==t?(e.popup.ShowPopup("Insert"),e.Cancel()):"Update"==t?(e.popup.ShowPopup("Update"),e.Cancel()):"Name"==t?e.showlabelExistsName=!0:alert(t)}),(function(e){return alert("error")})))}},{key:"ClearSelection",value:function(){this.objPayMode=new pe}},{key:"HideValidationLabel",value:function(){this.showlabelCode=!1,this.showlabelCurrencyName=!1,this.showlabelRate=!1,this.showlabelcurrencyCode=!1,this.showlabelExistsName=!1}},{key:"onDeleteConfirm",value:function(e){var t=this;window.confirm("Are you sure you want to delete?")&&(this.objPayMode.Code=e.data.Code,this.ObjDataservice.post("PaymentMode/DeletePayment",this.objPayMode).subscribe((function(e){e&&"1"==e&&(t.popup.ShowPopup("Delete"),t.Cancel())}),(function(e){return alert("error")})))}},{key:"onedit",value:function(e){this.HideValidationLabel(),this.objPayMode.Code=e.data.Code,this.objPayMode.PaymentName=e.data.PaymentName,this.objPayMode.Rate=e.data.Rate,this.objPayMode.Description=e.data.Description,this.objPayMode.PamyentImage=e.data.Image,this.objPayMode.Type=e.data.Type,this.objPayMode.Active=e.data.Active,this.objPayMode.impagePath=e.data.Image,this.isImageSaved=!0,this.objPayMode.Flag="Update"}},{key:"Cancel",value:function(){this.ClearSelection(),this.HideValidationLabel(),this.LoadGridData(),this.objPayMode.impagePath="assets/images/ImageUppload.png",this.ChooseFileName.nativeElement.value=""}}]),e}()).\u0275fac=function(e){return new(e||he)(m.Ob(p.a),m.Ob(f.a),m.Ob(b.a))},he.\u0275cmp=m.Ib({type:he,selectors:[["ngx-paymentmode"]],viewQuery:function(e,t){var n;1&e&&m.Pc(oe,!0),2&e&&m.tc(n=m.cc())&&(t.ChooseFileName=n.first)},decls:70,vars:14,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"row"],[1,"col-md-7","col-sm-12"],[1,"form-group"],["for","Code",1,"label"],["type","text","nbInput","","fullWidth","","disabled","","maxlength","10","width","100%","name","Code","placeholder","Code",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],["for","PaymentName",1,"label"],["type","text","nbInput","","fullWidth","","name","PaymentName","width","100%","placeholder","Payment Name",3,"ngModel","ngModelChange"],[1,"col-md-5","col-sm-12"],[1,"img-space"],[4,"ngIf"],["type","file",1,"fileInputProfile",3,"change"],["ChooseFileName",""],[1,"col-md-6"],["for","Rate",1,"label"],["type","number","nbInput","","fullWidth","","name","Rate","width","100%","placeholder","Rate",3,"ngModel","ngModelChange"],["for","Description",1,"label"],["type","text","fullWidth","","name","Description","width","100%","nbInput","","placeholder","Description",3,"ngModel","ngModelChange"],["for","UserGroup",1,"label"],["name","UserGroup","fullWidth","",3,"ngModel","ngModelChange"],["value","Debit"],["value","Credit"],["value","Visa"],["value","Other"],["for","IsActive",1,"label"],["width","100%",3,"ngModel","ngModelChange"],[1,"pull-right"],["nbButton","","status","success",2,"width","99px","margin-right","1rem",3,"click"],["nbButton","",3,"click"],[1,"col-md-12"],[3,"settings","source","delete","edit"],[1,"caption","status-danger"],[2,"border","1px solid #ddd","padding","5px","width","150px","height","150px",3,"src"]],template:function(e,t){1&e&&(m.Pb(0,"link",0),m.Ub(1,"nb-card"),m.Ub(2,"nb-card-header"),m.Lc(3," Payment Mode Information "),m.Tb(),m.Ub(4,"nb-card-body"),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"div",3),m.Ub(8,"label",4),m.Lc(9,"Code"),m.Tb(),m.Ub(10,"input",5),m.bc("ngModelChange",(function(e){return t.objPayMode.Code=e})),m.Tb(),m.Jc(11,ie,2,0,"p",6),m.Tb(),m.Ub(12,"div",3),m.Ub(13,"label",7),m.Lc(14,"Payment Name"),m.Tb(),m.Ub(15,"input",8),m.bc("ngModelChange",(function(e){return t.objPayMode.PaymentName=e})),m.Tb(),m.Jc(16,se,2,0,"p",6),m.Jc(17,ae,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(18,"div",9),m.Ub(19,"div",3),m.Ub(20,"div",10),m.Jc(21,ce,2,1,"ng-container",11),m.Tb(),m.Pb(22,"br"),m.Ub(23,"input",12,13),m.bc("change",(function(e){return t.fileChangeEvent(e)})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(25,"div",1),m.Ub(26,"div",14),m.Ub(27,"div",3),m.Ub(28,"label",15),m.Lc(29,"Rate "),m.Tb(),m.Ub(30,"input",16),m.bc("ngModelChange",(function(e){return t.objPayMode.Rate=e})),m.Tb(),m.Jc(31,le,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(32,"div",14),m.Ub(33,"div",3),m.Ub(34,"label",17),m.Lc(35,"Description "),m.Tb(),m.Ub(36,"input",18),m.bc("ngModelChange",(function(e){return t.objPayMode.Description=e})),m.Tb(),m.Jc(37,ue,2,0,"p",6),m.Tb(),m.Tb(),m.Tb(),m.Ub(38,"div",1),m.Ub(39,"div",14),m.Ub(40,"div",3),m.Ub(41,"label",19),m.Lc(42,"Type"),m.Tb(),m.Ub(43,"nb-select",20),m.bc("ngModelChange",(function(e){return t.objPayMode.Type=e})),m.Ub(44,"nb-option",21),m.Lc(45,"Debit"),m.Tb(),m.Ub(46,"nb-option",22),m.Lc(47,"Credit"),m.Tb(),m.Ub(48,"nb-option",23),m.Lc(49,"Visa"),m.Tb(),m.Ub(50,"nb-option",24),m.Lc(51,"Other"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(52,"div",14),m.Ub(53,"div",3),m.Ub(54,"label",25),m.Lc(55,"Is Active"),m.Tb(),m.Pb(56,"br"),m.Ub(57,"nb-checkbox",26),m.bc("ngModelChange",(function(e){return t.objPayMode.Active=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(58,"nb-card-footer"),m.Ub(59,"div",27),m.Ub(60,"button",28),m.bc("click",(function(){return t.OnSaveRecord()})),m.Lc(61,"Save"),m.Tb(),m.Ub(62,"button",29),m.bc("click",(function(){return t.Cancel()})),m.Lc(63,"Cancel"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(64,"nb-card"),m.Ub(65,"nb-card-header"),m.Lc(66," Payment Mode Detail "),m.Tb(),m.Ub(67,"nb-card-body"),m.Ub(68,"div",30),m.Ub(69,"ng2-smart-table",31),m.bc("delete",(function(e){return t.onDeleteConfirm(e)}))("edit",(function(e){return t.onedit(e)})),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(10),m.lc("ngModel",t.objPayMode.Code),m.Cb(1),m.lc("ngIf",t.showlabelCode),m.Cb(4),m.lc("ngModel",t.objPayMode.PaymentName),m.Cb(1),m.lc("ngIf",t.showlabelcurrencyCode),m.Cb(1),m.lc("ngIf",t.showlabelExistsName),m.Cb(4),m.lc("ngIf",t.isImageSaved),m.Cb(9),m.lc("ngModel",t.objPayMode.Rate),m.Cb(1),m.lc("ngIf",t.showlabelCurrencyName),m.Cb(5),m.lc("ngModel",t.objPayMode.Description),m.Cb(1),m.lc("ngIf",t.showlabelRate),m.Cb(6),m.lc("ngModel",t.objPayMode.Type),m.Cb(14),m.lc("ngModel",t.objPayMode.Active),m.Cb(12),m.lc("settings",t.settings)("source",t.lystarray))},directives:[l.o,l.q,l.n,l.H,c.b,c.k,c.p,c.s,g.p,c.u,l.bb,l.U,l.t,l.p,l.l,u.b],styles:[""]}),he),pe=function e(){i(this,e),this.Code="",this.PaymentName="",this.Rate="",this.Description="",this.PamyentImage="",this.Type="",this.Active="",this.Flag="Insert",this.impagePath=""};function fe(e,t){1&e&&(m.Ub(0,"p",20),m.Lc(1,"please Enter Country Name "),m.Tb())}function be(e,t){1&e&&(m.Ub(0,"p",20),m.Lc(1," Country Name Alredy Exists"),m.Tb())}var me,ge=((me=function(){function e(t,n,r){i(this,e),this.Utilities=t,this.dataservice=n,this.popup=r,this.objCountry=new ve,this.lstarray=[],this.lstCount=[],this.showlabelCountryName=!1,this.showlabelCountryExists=!1,this.settings={actions:{columnTitle:"",add:!1},mode:"external",edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{CountryID:{title:"Code"},CountryName:{title:"Country Name"}},attr:{class:"table table-bordered"},hideSubHeader:!1}}return a(e,[{key:"ngOnInit",value:function(){this.dataservice.checkFormRights("CountrySetup","Allow"),this.CountryGrid()}},{key:"OnSaveClick",value:function(){var e=this;this.showlabelCountryName=!0,this.showlabelCountryExists=!1,""==this.objCountry.CountryName||null==this.objCountry.CountryName?(this.showlabelCountryName=!0,this.showlabelCountryExists=!1):(this.objCountry.CreatedBy=this.Utilities.getUserId(),this.objCountry.ModifyBy=this.Utilities.getUserId(),this.objCountry.CreatedOn=this.Utilities.GetCurrentDateTime(),this.objCountry.ModifyOn=this.Utilities.GetCurrentDateTime(),this.objCountry.CompanyId=this.Utilities.getSubscriptionID(),this.dataservice.post("Country/SaveRecords",this.objCountry).subscribe((function(t){"Insert"==t?(e.popup.ShowPopup("Insert"),e.CountryGrid(),e.showlabelCountryName=!1,e.showlabelCountryExists=!1,e.Cancel()):"Update"==t?(e.popup.ShowPopup("Update"),e.CountryGrid(),e.showlabelCountryName=!1,e.showlabelCountryExists=!1,e.Cancel()):(e.showlabelCountryName=!1,e.showlabelCountryExists=!0)})))}},{key:"Cancel",value:function(){this.objCountry=new ve}},{key:"CountryGrid",value:function(){var e=this;this.dataservice.get("Country/GetCountryData").subscribe((function(t){e.lstarray=t[0].Country,e.lstCount=t[0].Count,e.objCountry.CountryID=e.lstCount[0].Column1+1}))}},{key:"onedit",value:function(e){this.showlabelCountryName=!1,this.showlabelCountryExists=!1,this.objCountry.CountryID=e.data.CountryID,this.objCountry.CountryName=e.data.CountryName,this.objCountry.ACountryName=e.data.ACountryName,this.objCountry.CountryCode=e.data.CountryCode,this.objCountry.Active=e.data.Active}},{key:"onDeleteConfirm",value:function(e){var t=this;window.confirm("Are you sure you want to delete?")&&(this.showlabelCountryName=!1,this.showlabelCountryExists=!1,this.objCountry.CountryID=e.data.CountryID,this.dataservice.post("Country/DeleteCountry",this.objCountry).subscribe((function(e){e&&"1"==e&&(t.popup.ShowPopup("Delete"),t.CountryGrid())}),(function(e){return alert("error")})))}}]),e}()).\u0275fac=function(e){return new(e||me)(m.Ob(b.a),m.Ob(p.a),m.Ob(f.a))},me.\u0275cmp=m.Ib({type:me,selectors:[["ngx-country"]],decls:41,vars:9,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"col-md-7"],["for","Code",1,"label"],["type","text","fullWidth","","nbInput","","name","Code","placeholder","Code","disabled","",3,"ngModel","ngModelChange"],["for","CountryName",1,"label"],["type","text","fullWidth","","nbInput","","name","CountryName","placeholder","Country Name",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],["for","ArabicName",1,"label"],["type","ArabicName","fullWidth","","nbInput","","name","ConfirmPass","placeholder","Arabic Name",3,"ngModel","ngModelChange"],["for","CountryShortName",1,"label"],["type","CountryShortName","fullWidth","","nbInput","","maxlength","5","name","CountryShortName","placeholder","Country Short Name",3,"ngModel","ngModelChange"],[1,"col-md-6","col-sm-12"],[1,"form-group"],["for","IsActive",1,"label"],["type","checkbox","name","IsActive",3,"ngModel","ngModelChange"],[1,"pull-right"],["nbButton","","status","success",2,"margin-right","1rem","width","99px",3,"click"],["nbButton","",3,"click"],[1,"col-md-12"],[3,"settings","source","delete","edit"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(m.Pb(0,"link",0),m.Ub(1,"nb-card"),m.Ub(2,"nb-card-header"),m.Lc(3," Country Infromation "),m.Tb(),m.Ub(4,"nb-card-body"),m.Ub(5,"div",1),m.Ub(6,"label",2),m.Lc(7,"Code"),m.Tb(),m.Ub(8,"input",3),m.bc("ngModelChange",(function(e){return t.objCountry.CountryID=e})),m.Tb(),m.Tb(),m.Ub(9,"div",1),m.Ub(10,"label",4),m.Lc(11,"Country Name"),m.Tb(),m.Ub(12,"input",5),m.bc("ngModelChange",(function(e){return t.objCountry.CountryName=e})),m.Tb(),m.Jc(13,fe,2,0,"p",6),m.Jc(14,be,2,0,"p",6),m.Tb(),m.Ub(15,"div",1),m.Ub(16,"label",7),m.Lc(17,"Arabic Name "),m.Tb(),m.Ub(18,"input",8),m.bc("ngModelChange",(function(e){return t.objCountry.ACountryName=e})),m.Tb(),m.Tb(),m.Ub(19,"div",1),m.Ub(20,"label",9),m.Lc(21,"Country Short Name "),m.Tb(),m.Ub(22,"input",10),m.bc("ngModelChange",(function(e){return t.objCountry.CountryCode=e})),m.Tb(),m.Tb(),m.Ub(23,"div",11),m.Ub(24,"div",12),m.Ub(25,"label",13),m.Lc(26,"Enable/Disable"),m.Tb(),m.Pb(27,"br"),m.Ub(28,"input",14),m.bc("ngModelChange",(function(e){return t.objCountry.Active=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(29,"nb-card-footer"),m.Ub(30,"div",15),m.Ub(31,"button",16),m.bc("click",(function(){return t.OnSaveClick()})),m.Lc(32,"Save"),m.Tb(),m.Ub(33,"button",17),m.bc("click",(function(){return t.Cancel()})),m.Lc(34,"Cancel"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(35,"nb-card"),m.Ub(36,"nb-card-header"),m.Lc(37," User Information Detail "),m.Tb(),m.Ub(38,"nb-card-body"),m.Ub(39,"div",18),m.Ub(40,"ng2-smart-table",19),m.bc("delete",(function(e){return t.onDeleteConfirm(e)}))("edit",(function(e){return t.onedit(e)})),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(8),m.lc("ngModel",t.objCountry.CountryID),m.Cb(4),m.lc("ngModel",t.objCountry.CountryName),m.Cb(1),m.lc("ngIf",t.showlabelCountryName),m.Cb(1),m.lc("ngIf",t.showlabelCountryExists),m.Cb(4),m.lc("ngModel",t.objCountry.ACountryName),m.Cb(4),m.lc("ngModel",t.objCountry.CountryCode),m.Cb(6),m.lc("ngModel",t.objCountry.Active),m.Cb(12),m.lc("settings",t.settings)("source",t.lstarray))},directives:[l.o,l.q,l.n,l.H,c.b,c.p,c.s,g.p,c.k,c.a,l.p,l.l,u.b],styles:[""]}),me),ve=function e(){i(this,e),this.CountryID="",this.CountryName="",this.ACountryName="",this.Active="",this.CreatedBy="",this.CreatedOn="",this.ModifyBy="",this.ModifyOn="",this.CountryCode=""};function ye(e,t){1&e&&(m.Ub(0,"p",26),m.Lc(1,"Please enter Printer Name!"),m.Tb())}function Ce(e,t){1&e&&(m.Ub(0,"p",26),m.Lc(1,"Printer Name already exist!"),m.Tb())}function we(e,t){if(1&e){var n=m.Vb();m.Ub(0,"button",27),m.bc("click",(function(){return m.yc(n),m.fc().Save()})),m.Lc(1,"Save"),m.Tb()}}function ke(e,t){if(1&e){var n=m.Vb();m.Ub(0,"button",28),m.bc("click",(function(){return m.yc(n),m.fc().Save()})),m.Lc(1,"Update"),m.Tb()}}var xe,Me,Te=((xe=function(){function e(t,n,r){i(this,e),this._userService=t,this._http=n,this.popup=r,this.objprinter=new Oe,this.showButton=!1,this.lstProdCategory=[],this.valLabel="Please enter mandatory field",this.showlblPrinterName=!1,this.showlblDuplPrinterName=!1,this.sessionData=[],this.settings={actions:{add:!1,width:"5px",columnTitle:""},mode:"external",edit:{editButtonContent:'<i class="nb-edit"></i>',confirmEdit:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{Code:{title:"Code",addable:!1,width:"46%"},PrinterName:{title:"Printer Name",width:"46%"},Language:{title:"Language",width:"46%"},IsDefault:{title:"Default",width:"46%"}},attr:{class:"table table-bordered"},hideSubHeader:!1}}return a(e,[{key:"ngOnInit",value:function(){this._userService.checkFormRights("posPrinterSetup","Allow"),this.objprinter.Language="English",this.GridBind()}},{key:"GridBind",value:function(){var e=this;this._userService.get("PrinterSetup/GetPrinterData").subscribe((function(t){e.lstProdCategory=t.Table,e.objprinter.Code=t.Table1[0].Column1+1}))}},{key:"Save",value:function(){var e=this;""!=this.objprinter.PrinterName&&null!=this.objprinter.PrinterName?(this.showlblPrinterName=!1,this.sessionData=JSON.parse(localStorage.getItem("sessionObject")),"New"==this.objprinter.Mode&&(this.objprinter.CreatedBy=this.sessionData[0].Name,this.objprinter.ModifyBy=null),"Update"==this.objprinter.Mode&&(this.objprinter.CreatedBy=null,this.objprinter.ModifyBy=this.sessionData[0].Name),this._userService.post("PrinterSetup/SavePrinterSetup",this.objprinter).subscribe((function(t){"Insert"==t?(e.popup.ShowPopup("Insert"),e.objprinter=new Oe,e.GridBind(),e.showlblPrinterName=!1,e.showlblDuplPrinterName=!1,e.objprinter.Language="English"):"Update"==t?(e.popup.ShowPopup("Update"),e.GridBind(),e.objprinter=new Oe,e.showButton=!1,e.showlblDuplPrinterName=!1,e.objprinter.Language="English"):"Record Already Exist."==t?(e.showlblDuplPrinterName=!0,window.scrollTo(0,0)):alert("404: Error")}))):this.showlblPrinterName=!0}},{key:"onDeleteConfirm",value:function(e){var t=this;window.confirm("Are you sure you want to delete?")&&(this.objprinter.Code=e.data.Code,this._userService.post("PrinterSetup/DeletePrinterSetup",this.objprinter).subscribe((function(e){"Deleted"==e?(t.popup.ShowPopup("Delete"),t.GridBind(),t.objprinter=new Oe,t.showlblPrinterName=!1,t.showlblDuplPrinterName=!1,t.objprinter.Language="English"):alert("404: Error")})))}},{key:"Cancel",value:function(){this.showButton=!1,this.objprinter=new Oe,this.objprinter.Language="English"}},{key:"onedit",value:function(e){this.objprinter.Code=e.data.Code,this.objprinter.PrinterName=e.data.PrinterName,this.objprinter.PrinterPath=e.data.PrinterPath,this.objprinter.IsDefault=e.data.IsDefault,this.objprinter.Language=e.data.Language,this.showButton=!0,this.showlblPrinterName=!1,this.showlblDuplPrinterName=!1,this.objprinter.Mode="Update"}}]),e}()).\u0275fac=function(e){return new(e||xe)(m.Ob(p.a),m.Ob(I.a),m.Ob(f.a))},xe.\u0275cmp=m.Ib({type:xe,selectors:[["ngx-printersetup"]],decls:60,vars:12,consts:[[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","inputFirstName",1,"label"],["type","text","nbInput","","fullWidth","","placeholder","Printer Code","disabled","",3,"ngModel","ngModelChange"],["for","ADescription",1,"label"],["type","text","nbInput","","fullWidth","","placeholder","Printer Status","disabled","",3,"ngModel","ngModelChange"],["for","inputUnitName",1,"label"],["type","text","nbInput","","fullWidth","","placeholder","Printer Name",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],[1,"col-md-6"],["type","text","nbInput","","fullWidth","","placeholder","Printer Path",3,"ngModel","ngModelChange"],[1,"col-md-6","col-sm-12"],["for","UserGroup",1,"label"],["fullWidth","",3,"selected","selectedChange"],["value","English"],["value","Urdu"],["value","Arabic"],["value","French"],[1,"checkbox"],[3,"ngModel","ngModelChange"],[2,"float","right"],["type","submit","status","success","nbButton","","style","width: 94px;",3,"click",4,"ngIf"],["type","submit","status","success","nbButton","",3,"click",4,"ngIf"],["type","submit","nbButton","",3,"click"],[3,"settings","source","delete","edit"],[1,"caption","status-danger"],["type","submit","status","success","nbButton","",2,"width","94px",3,"click"],["type","submit","status","success","nbButton","",3,"click"]],template:function(e,t){1&e&&(m.Ub(0,"nb-card"),m.Ub(1,"nb-card-header"),m.Lc(2,"Printer Setup"),m.Tb(),m.Ub(3,"nb-card-body"),m.Ub(4,"div",0),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"label",3),m.Lc(8,"Printer Code"),m.Tb(),m.Ub(9,"input",4),m.bc("ngModelChange",(function(e){return t.objprinter.Code=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(10,"div",1),m.Ub(11,"div",2),m.Ub(12,"label",5),m.Lc(13,"Printer Status"),m.Tb(),m.Ub(14,"input",6),m.bc("ngModelChange",(function(e){return t.objprinter.Mode=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(15,"div",0),m.Ub(16,"div",1),m.Ub(17,"div",2),m.Ub(18,"label",7),m.Lc(19,"Printer Name"),m.Tb(),m.Ub(20,"input",8),m.bc("ngModelChange",(function(e){return t.objprinter.PrinterName=e})),m.Tb(),m.Jc(21,ye,2,0,"p",9),m.Jc(22,Ce,2,0,"p",9),m.Tb(),m.Tb(),m.Ub(23,"div",10),m.Ub(24,"div",2),m.Ub(25,"label",5),m.Lc(26,"Printer Path"),m.Tb(),m.Ub(27,"input",11),m.bc("ngModelChange",(function(e){return t.objprinter.PrinterPath=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(28,"div",0),m.Ub(29,"div",12),m.Ub(30,"div",2),m.Ub(31,"label",13),m.Lc(32,"Language"),m.Tb(),m.Ub(33,"nb-select",14),m.bc("selectedChange",(function(e){return t.objprinter.Language=e})),m.Ub(34,"nb-option",15),m.Lc(35,"English"),m.Tb(),m.Ub(36,"nb-option",16),m.Lc(37,"Urdu"),m.Tb(),m.Ub(38,"nb-option",17),m.Lc(39,"Arabic"),m.Tb(),m.Ub(40,"nb-option",18),m.Lc(41,"French"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(42,"div",10),m.Ub(43,"div",2),m.Ub(44,"div",19),m.Ub(45,"nb-checkbox",20),m.bc("ngModelChange",(function(e){return t.objprinter.IsDefault=e})),m.Lc(46,"Default Printer"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(47,"nb-card-footer"),m.Ub(48,"div",21),m.Jc(49,we,2,0,"button",22),m.Lc(50,"\xa0\xa0 "),m.Jc(51,ke,2,0,"button",23),m.Lc(52,"\xa0 "),m.Ub(53,"button",24),m.bc("click",(function(){return t.Cancel()})),m.Lc(54,"Cancel"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(55,"nb-card"),m.Ub(56,"nb-card-header"),m.Lc(57,"Printer Setup Information"),m.Tb(),m.Ub(58,"nb-card-body"),m.Ub(59,"ng2-smart-table",25),m.bc("delete",(function(e){return t.onDeleteConfirm(e)}))("edit",(function(e){return t.onedit(e)})),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(9),m.lc("ngModel",t.objprinter.Code),m.Cb(5),m.lc("ngModel",t.objprinter.Mode),m.Cb(6),m.lc("ngModel",t.objprinter.PrinterName),m.Cb(1),m.lc("ngIf",t.showlblPrinterName),m.Cb(1),m.lc("ngIf",t.showlblDuplPrinterName),m.Cb(5),m.lc("ngModel",t.objprinter.PrinterPath),m.Cb(6),m.lc("selected",t.objprinter.Language),m.Cb(12),m.lc("ngModel",t.objprinter.IsDefault),m.Cb(4),m.lc("ngIf",!t.showButton),m.Cb(2),m.lc("ngIf",t.showButton),m.Cb(8),m.lc("settings",t.settings)("source",t.lstProdCategory))},directives:[l.o,l.q,l.n,l.H,c.b,c.p,c.s,g.p,l.bb,l.U,l.t,l.p,l.l,u.b],styles:[""]}),xe),Oe=function e(){i(this,e),this.Mode="New"},Se=((Me=function e(){i(this,e)}).\u0275fac=function(e){return new(e||Me)},Me.\u0275cmp=m.Ib({type:Me,selectors:[["ngx-usermanagement"]],decls:1,vars:0,template:function(e,t){1&e&&m.Pb(0,"router-outlet")},directives:[d.h],encapsulation:2}),Me);function Ne(e,t){1&e&&(m.Ub(0,"p",39),m.Lc(1,"please Enter Bank Name"),m.Tb())}function Pe(e,t){1&e&&(m.Ub(0,"p",39),m.Lc(1,"POS Bank Name is already Exists"),m.Tb())}function Ue(e,t){if(1&e&&(m.Ub(0,"nb-option",40),m.Lc(1),m.Tb()),2&e){var n=t.$implicit;m.lc("value",n.BranchID),m.Cb(1),m.Mc(n.BranchName)}}function De(e,t){1&e&&(m.Ub(0,"p",39),m.Lc(1,"please Select Branch"),m.Tb())}var Ie,Ee,_e=((Ie=function(){function e(t,n){i(this,e),this.dataservice=t,this.popup=n,this.ObjPOS=new Ae,this.showlblPOSBankName=!1,this.showlblBranch=!1,this.showlblPOSBankNameExists=!1,this.settings={actions:{columnTitle:"",add:!1},mode:"external",edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="fa fa-floppy-o">&nbsp;&nbsp; </i>',cancelButtonContent:'<i class="fa fa-times"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{Code:{title:"Code"},POSName:{title:"POS Name"}},attr:{class:"table table-bordered"},hideSubHeader:!1}}return a(e,[{key:"ngOnInit",value:function(){this.dataservice.checkFormRights("POSSetting","Allow"),this.LoadGridData()}},{key:"HideValidation",value:function(){this.showlblPOSBankName=!1,this.showlblBranch=!1,this.showlblPOSBankNameExists=!1}},{key:"OnSaveClick",value:function(){var e=this;this.HideValidation(),null!=this.ObjPOS.POSName&&""!=this.ObjPOS.POSName||(this.showlblPOSBankName=!0),1!=this.showlblPOSBankName&&1!=this.showlblBranch&&this.dataservice.post("POSsetting/SavePOS",this.ObjPOS).subscribe((function(t){t&&("Insert"==t?(e.popup.ShowPopup("Insert"),e.OnCancel()):"Update"==t?(e.popup.ShowPopup("Update"),e.OnCancel()):"Name"==t&&(e.showlblPOSBankNameExists=!0))}),(function(e){return alert("error")}))}},{key:"OnCancel",value:function(){this.ObjPOS=new Ae,this.LoadGridData(),this.HideValidation()}},{key:"LoadGridData",value:function(){var e=this;this.dataservice.get("POSsetting/GetPOSsettingData").subscribe((function(t){e.lstarrayPOS=t[0].POS,e.lstarrayBranch=t[0].Branch,e.ObjPOS.Code=t[0].MaxCount[0].Column1+1}))}},{key:"onedit",value:function(e){this.HideValidation(),this.ObjPOS.Code=e.data.Code,this.ObjPOS.POSSerial=e.data.POSSerial,this.ObjPOS.POSValidity=e.data.POSValidity,this.ObjPOS.POSMachineID=e.data.POSMachineID,this.ObjPOS.POSName=e.data.POSName,this.ObjPOS.BranchID=e.data.BranchID,this.ObjPOS.CashierPrinter=e.data.CashierPrinter,this.ObjPOS.CashDrawerPort=e.data.CashDrawerPort,this.ObjPOS.BarcodePrinter=e.data.BarcodePrinter,this.ObjPOS.PrintCustomerBill=e.data.PrintCustomerBill,this.ObjPOS.PreviewCustomerBill=e.data.PreviewCustomerBill,this.ObjPOS.CashCustomerID=e.data.CashCustomerID,this.ObjPOS.EnableCustomerDisplay=e.data.EnableCustomerDisplay,this.ObjPOS.CustomerDisplayPort=e.data.CustomerDisplayPort,this.ObjPOS.CustomerDisplayBaudRate=e.data.CustomerDisplayBaudRate,this.ObjPOS.CustomerDisplayStopBit=e.data.CustomerDisplayStopBit,this.ObjPOS.CustomerDisplayParity=e.data.CustomerDisplayParity,this.ObjPOS.CustomerDisplayHandShake=e.data.CustomerDisplayHandShake,this.ObjPOS.CustomerDisplayWelcomeMsg=e.data.CustomerDisplayWelcomeMsg,this.ObjPOS.InventoryCheck=e.data.InventoryCheck,this.ObjPOS.FLag="Update"}},{key:"onDeleteConfirm",value:function(e){var t=this;window.confirm("Are you sure you want to delete?")&&(this.ObjPOS.Code=e.data.Code,this.dataservice.post("POSsetting/DeletePOS",this.ObjPOS).subscribe((function(e){e&&"1"==e&&(t.popup.ShowPopup("Delete"),t.OnCancel())}),(function(e){return alert("error")})))}}]),e}()).\u0275fac=function(e){return new(e||Ie)(m.Ob(p.a),m.Ob(f.a))},Ie.\u0275cmp=m.Ib({type:Ie,selectors:[["ngx-possetting"]],decls:116,vars:22,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","Code",1,"label"],["type","text","nbInput","","fullWidth","","maxlength","10","disabled","","name","Code","placeholder","Code",3,"ngModel","ngModelChange"],["for","POSBankName",1,"label"],["type","text","nbInput","","fullWidth","","name","POSBankName","placeholder","POS Bank Name",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],["for","UserName",1,"label"],["name","UserGroup","fullWidth","",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],["for","CashierPrinter",1,"label"],["type","text","nbInput","","fullWidth","","name","CashierPrinter","placeholder","Cashier Printer",3,"ngModel","ngModelChange"],["for","BarcodePrinter",1,"label"],["type","text","nbInput","","fullWidth","","name","BarcodePrinter","placeholder","Barcode Printer",3,"ngModel","ngModelChange"],["type","text","nbInput","","fullWidth","","name","DisplayPort","placeholder","Display Port",3,"ngModel","ngModelChange"],["for","CashDrawPort",1,"label"],["type","text","nbInput","","fullWidth","","name","CashDrawPort","placeholder","Cash Draw Port",3,"ngModel","ngModelChange"],["for","BaudRate",1,"label"],["type","text","nbInput","","fullWidth","","name","BaudRate","placeholder","Baud Rate",3,"ngModel","ngModelChange"],["for","StopBit",1,"label"],["type","text","nbInput","","fullWidth","","maxlength","10","name","StopBit","placeholder","Stop Bit",3,"ngModel","ngModelChange"],["for","Parity",1,"label"],["type","text","nbInput","","fullWidth","","name","Parity","placeholder","Parity",3,"ngModel","ngModelChange"],["for","HandShake",1,"label"],["type","text","nbInput","","fullWidth","","name","HandShake","placeholder","Hand Shake",3,"ngModel","ngModelChange"],["nbInput","","fullWidth","","name","bOfficeAddress","placeholder","Welcome Message",3,"ngModel","ngModelChange"],[1,"col-sm-6","col-md-3"],["for","CustomerDisplay",1,"label"],["name","CustomerDisplay",3,"ngModel","ngModelChange"],["for","PrintCustomerBill",1,"label"],["name","IsActive",3,"ngModel","ngModelChange"],["for","Preview Bill",1,"label"],["for","CheckInventory",1,"label"],[1,"pull-right"],["nbButton","","status","success",2,"width","99px","margin-right","1rem",3,"click"],["nbButton","",3,"click"],[3,"settings","source","edit","delete"],[1,"caption","status-danger"],[3,"value"]],template:function(e,t){1&e&&(m.Pb(0,"link",0),m.Ub(1,"nb-card"),m.Ub(2,"nb-card-header"),m.Lc(3," POS System Setting "),m.Tb(),m.Ub(4,"nb-card-body"),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"div",3),m.Ub(8,"label",4),m.Lc(9,"Code"),m.Tb(),m.Ub(10,"input",5),m.bc("ngModelChange",(function(e){return t.ObjPOS.Code=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(11,"div",1),m.Ub(12,"div",2),m.Ub(13,"div",3),m.Ub(14,"label",6),m.Lc(15,"POS Bank Name"),m.Tb(),m.Ub(16,"input",7),m.bc("ngModelChange",(function(e){return t.ObjPOS.POSName=e})),m.Tb(),m.Jc(17,Ne,2,0,"p",8),m.Jc(18,Pe,2,0,"p",8),m.Tb(),m.Tb(),m.Ub(19,"div",2),m.Ub(20,"div",3),m.Ub(21,"label",9),m.Lc(22,"Branch"),m.Tb(),m.Ub(23,"nb-select",10),m.bc("selectedChange",(function(e){return t.ObjPOS.BranchID=e})),m.Jc(24,Ue,2,2,"nb-option",11),m.Tb(),m.Jc(25,De,2,0,"p",8),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(26,"nb-card"),m.Ub(27,"nb-card-header"),m.Lc(28," POS Banks Option "),m.Tb(),m.Ub(29,"nb-card-body"),m.Ub(30,"div",1),m.Ub(31,"div",2),m.Ub(32,"div",3),m.Ub(33,"label",12),m.Lc(34,"Cashier Printer"),m.Tb(),m.Ub(35,"input",13),m.bc("ngModelChange",(function(e){return t.ObjPOS.CashierPrinter=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(36,"div",2),m.Ub(37,"div",3),m.Ub(38,"label",14),m.Lc(39,"Barcode Printer"),m.Tb(),m.Ub(40,"input",15),m.bc("ngModelChange",(function(e){return t.ObjPOS.BarcodePrinter=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(41,"div",1),m.Ub(42,"div",2),m.Ub(43,"div",3),m.Ub(44,"label",12),m.Lc(45,"Display Port"),m.Tb(),m.Ub(46,"input",16),m.bc("ngModelChange",(function(e){return t.ObjPOS.CustomerDisplayPort=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(47,"div",2),m.Ub(48,"div",3),m.Ub(49,"label",17),m.Lc(50,"Cash Draw Port"),m.Tb(),m.Ub(51,"input",18),m.bc("ngModelChange",(function(e){return t.ObjPOS.CashDrawerPort=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(52,"div",1),m.Ub(53,"div",2),m.Ub(54,"div",3),m.Ub(55,"label",19),m.Lc(56,"Baud Rate"),m.Tb(),m.Ub(57,"input",20),m.bc("ngModelChange",(function(e){return t.ObjPOS.CustomerDisplayBaudRate=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(58,"div",2),m.Ub(59,"div",3),m.Ub(60,"label",21),m.Lc(61,"Stop Bit"),m.Tb(),m.Ub(62,"input",22),m.bc("ngModelChange",(function(e){return t.ObjPOS.CustomerDisplayStopBit=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(63,"div",1),m.Ub(64,"div",2),m.Ub(65,"div",3),m.Ub(66,"label",23),m.Lc(67,"Parity "),m.Tb(),m.Ub(68,"input",24),m.bc("ngModelChange",(function(e){return t.ObjPOS.CustomerDisplayParity=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(69,"div",2),m.Ub(70,"div",3),m.Ub(71,"label",25),m.Lc(72,"Hand Shake"),m.Tb(),m.Ub(73,"input",26),m.bc("ngModelChange",(function(e){return t.ObjPOS.CustomerDisplayHandShake=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(74,"div",1),m.Ub(75,"div",2),m.Ub(76,"div",3),m.Ub(77,"label",23),m.Lc(78,"Welcome Message "),m.Tb(),m.Ub(79,"textarea",27),m.bc("ngModelChange",(function(e){return t.ObjPOS.CustomerDisplayWelcomeMsg=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(80,"div",1),m.Ub(81,"div",28),m.Ub(82,"div",3),m.Ub(83,"label",29),m.Lc(84,"Customer Display"),m.Tb(),m.Pb(85,"br"),m.Ub(86,"nb-checkbox",30),m.bc("ngModelChange",(function(e){return t.ObjPOS.EnableCustomerDisplay=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(87,"div",28),m.Ub(88,"div",3),m.Ub(89,"label",31),m.Lc(90,"Print Customer Bill"),m.Tb(),m.Pb(91,"br"),m.Ub(92,"nb-checkbox",32),m.bc("ngModelChange",(function(e){return t.ObjPOS.PrintCustomerBill=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(93,"div",28),m.Ub(94,"div",3),m.Ub(95,"label",33),m.Lc(96,"Preview Bill"),m.Tb(),m.Pb(97,"br"),m.Ub(98,"nb-checkbox",32),m.bc("ngModelChange",(function(e){return t.ObjPOS.PreviewCustomerBill=e})),m.Tb(),m.Tb(),m.Tb(),m.Ub(99,"div",28),m.Ub(100,"div",3),m.Ub(101,"label",34),m.Lc(102,"Check Inventory"),m.Tb(),m.Pb(103,"br"),m.Ub(104,"nb-checkbox",32),m.bc("ngModelChange",(function(e){return t.ObjPOS.InventoryCheck=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(105,"nb-card-footer"),m.Ub(106,"div",35),m.Ub(107,"button",36),m.bc("click",(function(){return t.OnSaveClick()})),m.Lc(108,"Save"),m.Tb(),m.Ub(109,"button",37),m.bc("click",(function(){return t.OnCancel()})),m.Lc(110,"Cancel"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(111,"nb-card"),m.Ub(112,"nb-card-header"),m.Lc(113," POS Detail Information "),m.Tb(),m.Ub(114,"nb-card-body"),m.Ub(115,"ng2-smart-table",38),m.bc("edit",(function(e){return t.onedit(e)}))("delete",(function(e){return t.onDeleteConfirm(e)})),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(10),m.lc("ngModel",t.ObjPOS.Code),m.Cb(6),m.lc("ngModel",t.ObjPOS.POSName),m.Cb(1),m.lc("ngIf",t.showlblPOSBankName),m.Cb(1),m.lc("ngIf",t.showlblPOSBankNameExists),m.Cb(5),m.lc("selected",t.ObjPOS.BranchID),m.Cb(1),m.lc("ngForOf",t.lstarrayBranch),m.Cb(1),m.lc("ngIf",t.showlblBranch),m.Cb(10),m.lc("ngModel",t.ObjPOS.CashierPrinter),m.Cb(5),m.lc("ngModel",t.ObjPOS.BarcodePrinter),m.Cb(6),m.lc("ngModel",t.ObjPOS.CustomerDisplayPort),m.Cb(5),m.lc("ngModel",t.ObjPOS.CashDrawerPort),m.Cb(6),m.lc("ngModel",t.ObjPOS.CustomerDisplayBaudRate),m.Cb(5),m.lc("ngModel",t.ObjPOS.CustomerDisplayStopBit),m.Cb(6),m.lc("ngModel",t.ObjPOS.CustomerDisplayParity),m.Cb(5),m.lc("ngModel",t.ObjPOS.CustomerDisplayHandShake),m.Cb(6),m.lc("ngModel",t.ObjPOS.CustomerDisplayWelcomeMsg),m.Cb(7),m.lc("ngModel",t.ObjPOS.EnableCustomerDisplay),m.Cb(6),m.lc("ngModel",t.ObjPOS.PrintCustomerBill),m.Cb(6),m.lc("ngModel",t.ObjPOS.PreviewCustomerBill),m.Cb(6),m.lc("ngModel",t.ObjPOS.InventoryCheck),m.Cb(11),m.lc("settings",t.settings)("source",t.lstarrayPOS))},directives:[l.o,l.q,l.n,l.H,c.b,c.k,c.p,c.s,g.p,l.bb,g.o,l.t,l.p,l.l,u.b,l.U],styles:[""]}),Ie),Ae=function e(){i(this,e),this.Code="",this.FLag="Insert"},je=((Ee=function(){function e(t){i(this,e),this.dataservice=t,this.lstarray=[],this.settings={actions:{columnTitle:"",add:!1,delete:!1,edit:!1},columns:{Code:{title:"Code",editable:!1},ShiftDate:{title:"Shift Date",editable:!1},StartTime:{title:"Start Time",editable:!1},UserName:{title:"User Name",editable:!1},POSID:{title:"POS ID",editable:!1},index:{title:"Close Shift",type:"html",filter:!1,valuePrepareFunction:function(e){return'<button style="color:red;width:100px">Colse Shift</button>'}}},attr:{class:"table table-bordered"},hideSubHeader:!1},this.LoadGrid()}return a(e,[{key:"ngoninit",value:function(){this.dataservice.checkFormRights("ShiftEndProcess","Allow")}},{key:"LoadGrid",value:function(){var e=this;this.dataservice.get("PrinterSetup/GetPrinterData").subscribe((function(t){e.lstarray=t.Table}))}}]),e}()).\u0275fac=function(e){return new(e||Ee)(m.Ob(p.a))},Ee.\u0275cmp=m.Ib({type:Ee,selectors:[["ngx-shiftendprocess"]],decls:7,vars:2,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"col-md-12"],[3,"settings","source"]],template:function(e,t){1&e&&(m.Pb(0,"link",0),m.Ub(1,"nb-card"),m.Ub(2,"nb-card-header"),m.Lc(3," View Close Shifts "),m.Tb(),m.Ub(4,"nb-card-body"),m.Ub(5,"div",1),m.Pb(6,"ng2-smart-table",2),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(6),m.lc("settings",t.settings)("source",t.lstarray))},directives:[l.o,l.q,l.n,u.b],styles:[""]}),Ee);function Le(e,t){if(1&e&&(m.Ub(0,"nb-option",16),m.Lc(1),m.Tb()),2&e){var n=t.$implicit;m.lc("value",n.CityId),m.Cb(1),m.Nc(" ",n.CityName,"")}}function Re(e,t){1&e&&(m.Ub(0,"p",17),m.Lc(1,"please enter Area Name!"),m.Tb())}function Be(e,t){1&e&&(m.Ub(0,"p",17),m.Lc(1,"Area Name Already Exist!"),m.Tb())}var ze,Fe=((ze=function(){function e(t,n){i(this,e),this.dataservice=t,this.popup=n,this.objArea=new Ve,this.lstCities=[],this.lstArea=[],this.lstCount=[],this.showlabelAreaName=!1,this.showlabelAreaExists=!1,this.SaveUpdate="Save",this.settings={actions:{columnTitle:"",add:!1},mode:"external",edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{AreaId:{title:"Code"},CityName:{title:"City Name"},AreaName:{title:"Area Name"},Active:{title:"Active"}},attr:{class:"table table-bordered"},hideSubHeader:!1}}return a(e,[{key:"ngOnInit",value:function(){var e=this;this.dataservice.checkFormRights("AreaSetup","Allow"),this.dataservice.get("Area/GetCities").subscribe((function(t){e.lstCities=t.Table,e.objArea.CityId=e.lstCities[0].CityId})),this.AreaGrid()}},{key:"OnSaveClick",value:function(){var e=this;if(""==this.objArea.AreaName||null==this.objArea.AreaName)return this.showlabelAreaName=!0,void(this.showlabelAreaExists=!1);this.showlabelAreaName=!1,this.dataservice.post("Area/SaveArea",this.objArea).subscribe((function(t){"Insert"==t?(e.popup.ShowPopup("Insert"),e.AreaGrid(),e.showlabelAreaName=!1,e.showlabelAreaExists=!1,e.Cancel(),e.objArea.CityId=e.lstCities[0].CityId):"Update"==t?(e.popup.ShowPopup("Update"),e.AreaGrid(),e.showlabelAreaName=!1,e.showlabelAreaExists=!1,e.Cancel(),e.AreaID=e.lstCount[0].Column1+1):"Record Already Exist."==t?(e.showlabelAreaName=!1,e.showlabelAreaExists=!0):(e.showlabelAreaName=!1,e.showlabelAreaExists=!1)}))}},{key:"Cancel",value:function(){this.SaveUpdate="Save",this.objArea=new Ve,this.objArea.CityId=this.lstCities[0].CityId,this.AreaID=this.lstCount[0].Column1+1,this.showlabelAreaName=!1,this.showlabelAreaExists=!1}},{key:"AreaGrid",value:function(){var e=this;this.dataservice.get("Area/GetAreaData").subscribe((function(t){e.lstArea=t[0].Areas,e.lstCount=t[0].Count,e.AreaID=e.lstCount[0].Column1+1}))}},{key:"onedit",value:function(e){this.SaveUpdate="Update",this.showlabelAreaName=!1,this.showlabelAreaExists=!1,this.AreaID=e.data.AreaId,this.objArea.AreaId=e.data.AreaId,this.objArea.AreaName=e.data.AreaName,this.objArea.CityId=e.data.CityId,this.objArea.Active=e.data.Active}},{key:"onDeleteConfirm",value:function(e){var t=this;window.confirm("Are you sure you want to delete?")&&(this.showlabelAreaName=!1,this.showlabelAreaExists=!1,this.objArea.AreaId=e.data.AreaId,this.dataservice.post("Area/DeleteArea",this.objArea).subscribe((function(e){e&&"1"==e&&(t.popup.ShowPopup("Delete"),t.AreaGrid(),t.objArea.AreaId=0,t.Cancel())}),(function(e){return alert("error")})))}}]),e}()).\u0275fac=function(e){return new(e||ze)(m.Ob(p.a),m.Ob(f.a))},ze.\u0275cmp=m.Ib({type:ze,selectors:[["ngx-area"]],decls:41,vars:10,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"label"],["type","text","fullWidth","","nbInput","","placeholder","Code","disabled","",3,"ngModel","ngModelChange"],["fullWidth","",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","fullWidth","","nbInput","","placeholder","Area Name",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],[1,"form-group"],[3,"ngModel","ngModelChange"],[1,"pull-right"],["nbButton","","status","success",2,"margin-right","1rem","width","99px",3,"click"],["nbButton","",3,"click"],[1,"col-md-12"],[3,"settings","source","delete","edit"],[3,"value"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(m.Pb(0,"link",0),m.Ub(1,"nb-card"),m.Ub(2,"nb-card-header"),m.Lc(3," Area Information "),m.Tb(),m.Ub(4,"nb-card-body"),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"label",3),m.Lc(8,"Code"),m.Tb(),m.Ub(9,"input",4),m.bc("ngModelChange",(function(e){return t.AreaID=e})),m.Tb(),m.Tb(),m.Ub(10,"div",2),m.Ub(11,"label",3),m.Lc(12,"City Name "),m.Tb(),m.Ub(13,"nb-select",5),m.bc("selectedChange",(function(e){return t.objArea.CityId=e})),m.Jc(14,Le,2,2,"nb-option",6),m.Tb(),m.Tb(),m.Tb(),m.Pb(15,"br"),m.Ub(16,"div",1),m.Ub(17,"div",2),m.Ub(18,"label",3),m.Lc(19,"Area Name"),m.Tb(),m.Ub(20,"input",7),m.bc("ngModelChange",(function(e){return t.objArea.AreaName=e})),m.Tb(),m.Jc(21,Re,2,0,"p",8),m.Jc(22,Be,2,0,"p",8),m.Tb(),m.Ub(23,"div",2),m.Ub(24,"div",9),m.Ub(25,"label",3),m.Lc(26,"Enable/Disable"),m.Tb(),m.Pb(27,"br"),m.Ub(28,"nb-checkbox",10),m.bc("ngModelChange",(function(e){return t.objArea.Active=e})),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(29,"nb-card-footer"),m.Ub(30,"div",11),m.Ub(31,"button",12),m.bc("click",(function(){return t.OnSaveClick()})),m.Lc(32),m.Tb(),m.Ub(33,"button",13),m.bc("click",(function(){return t.Cancel()})),m.Lc(34,"Cancel"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(35,"nb-card"),m.Ub(36,"nb-card-header"),m.Lc(37," Area Information Detail "),m.Tb(),m.Ub(38,"nb-card-body"),m.Ub(39,"div",14),m.Ub(40,"ng2-smart-table",15),m.bc("delete",(function(e){return t.onDeleteConfirm(e)}))("edit",(function(e){return t.onedit(e)})),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(9),m.lc("ngModel",t.AreaID),m.Cb(4),m.lc("selected",t.objArea.CityId),m.Cb(1),m.lc("ngForOf",t.lstCities),m.Cb(6),m.lc("ngModel",t.objArea.AreaName),m.Cb(1),m.lc("ngIf",t.showlabelAreaName),m.Cb(1),m.lc("ngIf",t.showlabelAreaExists),m.Cb(6),m.lc("ngModel",t.objArea.Active),m.Cb(4),m.Nc(" ",t.SaveUpdate,""),m.Cb(8),m.lc("settings",t.settings)("source",t.lstArea))},directives:[l.o,l.q,l.n,l.H,c.b,c.p,c.s,l.bb,g.o,g.p,l.t,l.p,l.l,u.b,l.U],styles:[""]}),ze),Ve=function e(){i(this,e)};function Ge(e){this.content=e}Ge.prototype={constructor:Ge,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return-1==o?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new Ge(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new Ge(n)},addToStart:function(e,t){return new Ge([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Ge(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(-1==i?o.length:i,0,t,n),new Ge(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=Ge.from(e)).size?new Ge(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=Ge.from(e)).size?new Ge(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Ge.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},Ge.from=function(e){if(e instanceof Ge)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Ge(t)};var $e=Ge,He=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},Je={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};He.prototype.nodesBetween=function(e,t,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<t;i++){var a=this.content[i],c=s+a.nodeSize;if(c>e&&!1!==n(a,r+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,e-l),Math.min(a.content.size,t-l),n,r+l)}s=c}},He.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},He.prototype.textBetween=function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(o+=s.text.slice(Math.max(e,a)-a,t-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},He.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new He(r,this.size+e.size)},He.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(t>e)for(var o=0,i=0;i<t;o++){var s=this.content[o],a=i+s.nodeSize;a>e&&((i<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-i),Math.min(s.text.length,t-i)):s.cut(Math.max(0,e-i-1),Math.min(s.content.size,t-i-1))),n.push(s),r+=s.nodeSize),i=a}return new He(n,r)},He.prototype.cutByIndex=function(e,t){return e==t?He.empty:0==e&&t==this.content.length?this:new He(this.content.slice(e,t))},He.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new He(r,o)},He.prototype.addToStart=function(e){return new He([e].concat(this.content),this.size+e.nodeSize)},He.prototype.addToEnd=function(e){return new He(this.content.concat(e),this.size+e.nodeSize)},He.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},Je.firstChild.get=function(){return this.content.length?this.content[0]:null},Je.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Je.childCount.get=function(){return this.content.length},He.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},He.prototype.maybeChild=function(e){return this.content[e]},He.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},He.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),function e(t,n,r){for(var o=0;;o++){if(o==t.childCount||o==n.childCount)return t.childCount==n.childCount?null:r;var i=t.child(o),s=n.child(o);if(i!=s){if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)r++;return r}if(i.content.size||s.content.size){var c=e(i.content,s.content,r+1);if(null!=c)return c}r+=i.nodeSize}else r+=i.nodeSize}}(this,e,t)},He.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),function e(t,n,r,o){for(var i=t.childCount,s=n.childCount;;){if(0==i||0==s)return i==s?null:{a:r,b:o};var a=t.child(--i),c=n.child(--s),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:r,b:o};if(a.isText&&a.text!=c.text){for(var u=0,h=Math.min(a.text.length,c.text.length);u<h&&a.text[a.text.length-u-1]==c.text[c.text.length-u-1];)u++,r--,o--;return{a:r,b:o}}if(a.content.size||c.content.size){var d=e(a.content,c.content,r-1,o-1);if(d)return d}r-=l,o-=l}else r-=l,o-=l}}(this,e,t,n)},He.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return qe(0,e);if(e==this.size)return qe(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?qe(n+1,o):qe(n,r);r=o}},He.prototype.toString=function(){return"<"+this.toStringInner()+">"},He.prototype.toStringInner=function(){return this.content.join(", ")},He.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},He.fromJSON=function(e,t){if(!t)return He.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new He(t.map(e.nodeFromJSON))},He.fromArray=function(e){if(!e.length)return He.empty;for(var t,n=0,r=0;r<e.length;r++){var o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new He(t||e,n)},He.from=function(e){if(!e)return He.empty;if(e instanceof He)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new He([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(He.prototype,Je);var We={index:0,offset:0};function qe(e,t){return We.index=e,We.offset=t,We}function Ke(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!Ke(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!Ke(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}He.empty=new He([],0);var Xe=function(e,t){this.type=e,this.attrs=t};function Ye(e){var t=Error.call(this,e);return t.__proto__=Ye.prototype,t}Xe.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t},Xe.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},Xe.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},Xe.prototype.eq=function(e){return this==e||this.type==e.type&&Ke(this.attrs,e.attrs)},Xe.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},Xe.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},Xe.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},Xe.setFrom=function(e){if(!e||0==e.length)return Xe.none;if(e instanceof Xe)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},Xe.none=[],(Ye.prototype=Object.create(Error.prototype)).constructor=Ye,Ye.prototype.name="ReplaceError";var Qe=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},Ze={size:{configurable:!0}};function et(e,t){if(!t.type.compatibleContent(e.type))throw new Ye("Cannot join "+t.type.name+" onto "+e.type.name)}function tt(e,t,n){var r=e.node(n);return et(r,t.node(n)),r}function nt(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function rt(e,t,n,r){var o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(nt(e.nodeAfter,r),i++));for(var a=i;a<s;a++)nt(o.child(a),r);t&&t.depth==n&&t.textOffset&&nt(t.nodeBefore,r)}function ot(e,t){if(!e.type.validContent(t))throw new Ye("Invalid content for node "+e.type.name);return e.copy(t)}function it(e,t,n){var r=[];return rt(null,e,n,r),e.depth>n&&nt(ot(tt(e,t,n+1),it(e,t,n+1)),r),rt(t,null,n,r),new He(r)}Ze.size.get=function(){return this.content.size-this.openStart-this.openEnd},Qe.prototype.insertAt=function(e,t){var n=function e(t,n,r,o){var i=t.findIndex(n),s=i.index,a=i.offset,c=t.maybeChild(s);if(a==n||c.isText)return o&&!o.canReplace(s,s,r)?null:t.cut(0,n).append(r).append(t.cut(n));var l=e(c.content,n-a-1,r);return l&&t.replaceChild(s,c.copy(l))}(this.content,e+this.openStart,t,null);return n&&new Qe(n,this.openStart,this.openEnd)},Qe.prototype.removeBetween=function(e,t){return new Qe(function e(t,n,r){var o=t.findIndex(n),i=o.index,s=o.offset,a=t.maybeChild(i),c=t.findIndex(r),l=c.index;if(s==n||a.isText){if(c.offset!=r&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(i,a.copy(e(a.content,n-s-1,r-s-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},Qe.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},Qe.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Qe.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},Qe.fromJSON=function(e,t){if(!t)return Qe.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Qe(He.fromJSON(e,t.content),n,r)},Qe.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new Qe(e,n,r)},Object.defineProperties(Qe.prototype,Ze),Qe.empty=new Qe(He.empty,0,0);var st=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},at={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};st.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},at.parent.get=function(){return this.node(this.depth)},at.doc.get=function(){return this.node(0)},st.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},st.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},st.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},st.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},st.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},st.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},st.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},at.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},at.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},at.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},st.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r},st.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return Xe.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},st.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},st.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},st.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new ht(this,e,n)},st.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},st.prototype.max=function(e){return e.pos>this.pos?e:this},st.prototype.min=function(e){return e.pos<this.pos?e:this},st.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},st.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,o=t,i=e;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(n.push(i,a,r+c),!l)break;if((i=i.child(a)).isText)break;o=l-1,r+=c+1}return new st(t,n,o)},st.resolveCached=function(e,t){for(var n=0;n<ct.length;n++){var r=ct[n];if(r.pos==t&&r.doc==e)return r}var o=ct[lt]=st.resolve(e,t);return lt=(lt+1)%ut,o},Object.defineProperties(st.prototype,at);var ct=[],lt=0,ut=12,ht=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},dt={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};dt.start.get=function(){return this.$from.before(this.depth+1)},dt.end.get=function(){return this.$to.after(this.depth+1)},dt.parent.get=function(){return this.$from.node(this.depth)},dt.startIndex.get=function(){return this.$from.index(this.depth)},dt.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(ht.prototype,dt);var pt=Object.create(null),ft=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||He.empty,this.marks=r||Xe.none},bt={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};bt.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},bt.childCount.get=function(){return this.content.childCount},ft.prototype.child=function(e){return this.content.child(e)},ft.prototype.maybeChild=function(e){return this.content.maybeChild(e)},ft.prototype.forEach=function(e){this.content.forEach(e)},ft.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},ft.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},bt.textContent.get=function(){return this.textBetween(0,this.content.size,"")},ft.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},bt.firstChild.get=function(){return this.content.firstChild},bt.lastChild.get=function(){return this.content.lastChild},ft.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},ft.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},ft.prototype.hasMarkup=function(e,t,n){return this.type==e&&Ke(this.attrs,t||e.defaultAttrs||pt)&&Xe.sameSet(this.marks,n||Xe.none)},ft.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},ft.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},ft.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},ft.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return Qe.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new Qe(a,r.depth-i,o.depth-i)},ft.prototype.replace=function(e,t,n){return function(e,t,n){if(n.openStart>e.depth)throw new Ye("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Ye("Inconsistent open depths");return function e(t,n,r,o){var i=t.index(o),s=t.node(o);if(i==n.index(o)&&o<t.depth-r.openStart){var a=e(t,n,r,o+1);return s.copy(s.content.replaceChild(i,a))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){var c=function(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),o=n-1;o>=0;o--)r=t.node(o).copy(He.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t);return ot(s,function e(t,n,r,o,i){var s=t.depth>i&&tt(t,n,i+1),a=o.depth>i&&tt(r,o,i+1),c=[];return rt(null,t,i,c),s&&a&&n.index(i)==r.index(i)?(et(s,a),nt(ot(s,e(t,n,r,o,i+1)),c)):(s&&nt(ot(s,it(t,n,i+1)),c),rt(n,r,i,c),a&&nt(ot(a,it(r,o,i+1)),c)),rt(o,null,i,c),new He(c)}(t,c.start,c.end,n,o))}var l=t.parent,u=l.content;return ot(l,u.cut(0,t.parentOffset).append(r.content).append(u.cut(n.parentOffset)))}return ot(s,it(t,n,o))}(e,t,n,0)}(this.resolve(e),this.resolve(t),n)},ft.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.offset;if(!(t=t.maybeChild(n.index)))return null;if(r==e||t.isText)return t;e-=r+1}},ft.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},ft.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},ft.prototype.resolve=function(e){return st.resolveCached(this,e)},ft.prototype.resolveNoCache=function(e){return st.resolve(this,e)},ft.prototype.rangeHasMark=function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r},bt.isBlock.get=function(){return this.type.isBlock},bt.isTextblock.get=function(){return this.type.isTextblock},bt.inlineContent.get=function(){return this.type.inlineContent},bt.isInline.get=function(){return this.type.isInline},bt.isText.get=function(){return this.type.isText},bt.isLeaf.get=function(){return this.type.isLeaf},bt.isAtom.get=function(){return this.type.isAtom},ft.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),gt(this.marks,e)},ft.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},ft.prototype.canReplace=function(e,t,n,r,o){void 0===n&&(n=He.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(e).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},ft.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd},ft.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},ft.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(e){return e.check()}))},ft.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},ft.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=He.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(ft.prototype,bt);var mt=function(e){function t(t,n,r,o){if(e.call(this,t,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):gt(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(ft);function gt(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var vt=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},yt={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};vt.parse=function(e,t){var n=new Ct(e,t);if(null==n.next)return vt.empty;var r=kt(n);n.next&&n.err("Unexpected trailing text");var o=function(e){var t=Object.create(null);return function n(r){var o=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];Nt(e,r).forEach((function(e){s||o.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var i=t[r.join(",")]=new vt(r.indexOf(e.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(St);i.next.push(o[s],t[a.join(",")]||n(a))}return i}(Nt(e,0))}(function(e){var t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,i))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=e(t.exprs[s],i);if(s==t.exprs.length-1)return a;o(a,i=n())}else{if("star"==t.type){var c=n();return r(i,c),o(e(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return o(e(t.expr,i),l),o(e(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){for(var u=i,h=0;h<t.min;h++){var d=n();o(e(t.expr,u),d),u=d}if(-1==t.max)o(e(t.expr,u),u);else for(var p=t.min;p<t.max;p++){var f=n();r(u,f),o(e(t.expr,u),f),u=f}return[r(u)]}if("name"==t.type)return[r(i,null,t.value)]}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}}(r));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},vt.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},vt.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r},yt.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},yt.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},vt.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},vt.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];return function o(i,s){var a=i.matchFragment(e,n);if(a&&(!t||a.validEnd))return He.from(s.map((function(e){return e.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var l=i.next[c],u=i.next[c+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var h=o(u,s.concat(l));if(h)return h}}}(this,[])},vt.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},vt.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}},yt.edgeCount.get=function(){return this.next.length>>1},vt.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},vt.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o+=2)r+=(o?", ":"")+t.next[o].name+"->"+e.indexOf(t.next[o+1]);return r})).join("\n")},Object.defineProperties(vt.prototype,yt),vt.empty=new vt(!0);var Ct=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},wt={next:{configurable:!0}};function kt(e){var t=[];do{t.push(xt(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function xt(e){var t=[];do{t.push(Mt(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Mt(e){for(var t=function(e){if(e.eat("(")){var t=kt(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(t)>-1&&o.push(s)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Ot(e,t)}return t}function Tt(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Ot(e,t){var n=Tt(e),r=n;return e.eat(",")&&(r="}"!=e.next?Tt(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function St(e,t){return t-e}function Nt(e,t){var n=[];return function t(r){var o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.to;s.term||-1!=n.indexOf(a)||t(a)}}(t),n.sort(St)}function Pt(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Ut(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function Dt(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new _t(e[n]);return t}wt.next.get=function(){return this.tokens[this.pos]},Ct.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},Ct.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(Ct.prototype,wt);var It=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Dt(n.attrs),this.defaultAttrs=Pt(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},Et={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Et.isInline.get=function(){return!this.isBlock},Et.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Et.isLeaf.get=function(){return this.contentMatch==vt.empty},Et.isAtom.get=function(){return this.isLeaf||this.spec.atom},It.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},It.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},It.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ut(this.attrs,e)},It.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ft(this,this.computeAttrs(e),He.from(t),Xe.setFrom(n))},It.prototype.createChecked=function(e,t,n){if(t=He.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new ft(this,this.computeAttrs(e),t,Xe.setFrom(n))},It.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=He.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t).fillBefore(He.empty,!0);return o?new ft(this,e,t.append(o),Xe.setFrom(n)):null},It.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},It.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},It.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},It.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:Xe.empty:e},It.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,r){return n[e]=new It(e,t,r)}));var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(It.prototype,Et);var _t=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},At={isRequired:{configurable:!0}};At.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(_t.prototype,At);var jt=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=Dt(r.attrs),this.rank=t,this.excluded=null;var o=Pt(this.attrs);this.instance=o&&new Xe(this,o)};jt.prototype.create=function(e){return!e&&this.instance?this.instance:new Xe(this,Ut(this.attrs,e))},jt.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach((function(e,o){return n[e]=new jt(e,r++,t,o)})),n},jt.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},jt.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},jt.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var Lt=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=$e.from(e.nodes),this.spec.marks=$e.from(e.marks),this.nodes=It.compile(this.spec.nodes,this),this.marks=jt.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[i]||(n[i]=vt.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?Rt(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var a in this.marks){var c=this.marks[a],l=c.spec.excludes;c.excluded=null==l?[c]:""==l?[]:Rt(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Rt(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(var a in e.marks){var c=e.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}Lt.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof It))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},Lt.prototype.text=function(e,t){var n=this.nodes.text;return new mt(n,n.defaultAttrs,e,Xe.setFrom(t))},Lt.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},Lt.prototype.nodeFromJSON=function(e){return ft.fromJSON(this,e)},Lt.prototype.markFromJSON=function(e){return Xe.fromJSON(this,e)},Lt.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var Bt=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))};Bt.prototype.parse=function(e,t){void 0===t&&(t={});var n=new Ht(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},Bt.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new Ht(this,t,!0);return n.addAll(e,null,t.from,t.to),Qe.maxOpen(n.finish())},Bt.prototype.matchTag=function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Wt(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},Bt.prototype.matchStyle=function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(e)||i.context&&!n.matchesContext(i.context)||i.style.length>e.length&&(61!=i.style.charCodeAt(e.length)||i.style.slice(e.length+1)!=t))){if(i.getAttrs){var s=i.getAttrs(t);if(!1===s)continue;i.attrs=s}return i}}},Bt.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)}var r,o=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=qt(e)),e.mark=t}))};for(var i in e.marks)o(i);for(var s in e.nodes)r=void 0,(r=e.nodes[s].spec.parseDOM)&&r.forEach((function(e){n(e=qt(e)),e.node=s}));return t},Bt.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new Bt(e,Bt.schemaRules(e)))};var zt={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ft={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Vt={ol:!0,ul:!0};function Gt(e){return(e?1:0)|("full"===e?2:0)}var $t=function(e,t,n,r,o,i,s){this.type=e,this.attrs=t,this.solid=o,this.match=i||(4&s?null:e.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=Xe.none,this.pendingMarks=r,this.stashMarks=[]};$t.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(He.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},$t.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=He.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(He.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},$t.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},$t.prototype.applyPending=function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):Kt(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var Ht=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n;var r,o=t.topNode,i=Gt(t.preserveWhitespace)|(n?4:0);r=o?new $t(o.type,o.attrs,Xe.none,Xe.none,!0,t.topMatch||o.type.contentMatch,i):new $t(n?null:e.schema.topNodeType,null,Xe.none,Xe.none,!0,null,i),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},Jt={top:{configurable:!0},currentPos:{configurable:!0}};function Wt(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function qt(e){var t={};for(var n in e)t[n]=e[n];return t}function Kt(e,t){var n=t.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(e)){var i=[];return function e(n){i.push(n);for(var r=0;r<n.edgeCount;r++){var o=n.edge(r),s=o.next;if(o.type==t)return!0;if(i.indexOf(s)<0&&e(s))return!0}}(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}Jt.top.get=function(){return this.nodes[this.open]},Ht.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){for(var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(e),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},Ht.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)2&n.options||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},Ht.prototype.addElement=function(e,t){var n,r=e.nodeName.toLowerCase();Vt.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&Vt.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(o?o.ignore:Ft.hasOwnProperty(r))this.findInside(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);var i,s=this.top,a=this.needsBlock;if(zt.hasOwnProperty(r))i=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,o,!1===o.consuming?n:null)},Ht.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},Ht.prototype.readStyles=function(e){var t=Xe.none;e:for(var n=0;n<e.length;n+=2)for(var r=null;;){var o=this.parser.matchStyle(e[n],e[n+1],this,r);if(!o)continue e;if(o.ignore)return null;if(t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),!1!==o.consuming)break;r=o}return t},Ht.prototype.addElementByRule=function(e,t,n){var r,o,i,s=this;t.node?(o=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):r=this.enter(o,t.attrs,t.preserveWhitespace):(i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return s.insertNode(e)}));else{var c=t.contentElement;"string"==typeof c?c=e.querySelector(c):"function"==typeof c&&(c=c(e)),c||(c=e),this.findAround(e,c,!0),this.addAll(c,r)}r&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},Ht.prototype.addAll=function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i),t&&zt.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)},Ht.prototype.findPlace=function(e){for(var t,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},Ht.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1},Ht.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r},Ht.prototype.enterInner=function(e,t,n,r){this.closeExtra();var o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e,t);var i=null==r?-5&o.options:Gt(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new $t(e,t,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},Ht.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},Ht.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Ht.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},Jt.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e},Ht.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},Ht.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},Ht.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)},Ht.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},Ht.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=(o?0:1)-(r?r.depth+1:0);return function e(s,a){for(;s>=0;s--){var c=n[s];if(""==c){if(s==n.length-1||0==s)continue;for(;a>=i;a--)if(e(s-1,a))return!0;return!1}var l=a>0||0==a&&o?t.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0}(n.length-1,this.open)},Ht.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Ht.prototype.addPendingMark=function(e){var t=function(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},Ht.prototype.removePendingMark=function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var o=r.popFromStashMark(e);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==t)break}},Object.defineProperties(Ht.prototype,Jt);var Xt=function(e,t){this.nodes=e||{},this.marks=t||{}};function Yt(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Qt(e){return e.document||window.document}Xt.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=Qt(t).createDocumentFragment());var o=n,i=null;return e.forEach((function(e){if(i||e.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<e.marks.length;){var a=e.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<e.marks.length;){var c=e.marks[s++],l=r.serializeMark(c,e.isInline,t);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(e,t))})),n},Xt.prototype.serializeNode=function(e,t){void 0===t&&(t={});var n=Xt.renderSpec(Qt(t),this.nodes[e.type.name](e)),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,o,t):this.serializeFragment(e.content,t,o)}return r},Xt.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var n=this.serializeNode(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},Xt.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&Xt.renderSpec(Qt(n),r(e,t))},Xt.renderSpec=function(e,t,n){if(void 0===n&&(n=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var r=t[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?e.createElementNS(n,r):e.createElement(r),a=t[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var h=c;h<t.length;h++){var d=t[h];if(0===d){if(h<t.length-1||h>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var p=Xt.renderSpec(e,d,n),f=p.contentDOM;if(s.appendChild(p.dom),f){if(i)throw new RangeError("Multiple content holes");i=f}}return{dom:s,contentDOM:i}},Xt.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new Xt(this.nodesFromSchema(e),this.marksFromSchema(e)))},Xt.nodesFromSchema=function(e){var t=Yt(e.nodes);return t.text||(t.text=function(e){return e.text}),t},Xt.marksFromSchema=function(e){return Yt(e.marks)};var Zt=Math.pow(2,16);function en(e){return 65535&e}var tn=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},nn=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};nn.prototype.recover=function(e){var t=0,n=en(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/Zt}(e)},nn.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},nn.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},nn.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;var c=this.ranges[s+o],l=this.ranges[s+i],u=a+c;if(e<=u){var h=a+r+((c?e==a?-1:e==u?1:t:t)<0?0:l);return n?h:new tn(h,t<0?e!=a:e!=u,e==(t<0?a:u)?null:s/3+(e-a)*Zt)}r+=l-c}return n?e+r:new tn(e+r)},nn.prototype.touches=function(e,t){for(var n=0,r=en(t),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var c=this.ranges[s+o];if(e<=a+c&&s==3*r)return!0;n+=this.ranges[s+i]-c}return!1},nn.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+t],l=this.ranges[r+n];e(s,s+c,a,a+l),o+=l-c}},nn.prototype.invert=function(){return new nn(this.ranges,!this.inverted)},nn.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},nn.offset=function(e){return 0==e?nn.empty:new nn(e<0?[0,-e,0]:[0,0,e])},nn.empty=new nn([]);var rn=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function on(e){var t=Error.call(this,e);return t.__proto__=on.prototype,t}rn.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new rn(this.maps,this.mirror,e,t)},rn.prototype.copy=function(){return new rn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},rn.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},rn.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},rn.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},rn.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},rn.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},rn.prototype.invert=function(){var e=new rn;return e.appendMappingInverted(this),e},rn.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},rn.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},rn.prototype._map=function(e,t,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(e,t);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,e=this.maps[s].recover(i.recover);continue}}i.deleted&&(r=!0),e=i.pos}return n?e:new tn(e,r)},(on.prototype=Object.create(Error.prototype)).constructor=on,on.prototype.name="TransformError";var sn=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new rn},an={before:{configurable:!0},docChanged:{configurable:!0}};function cn(){throw new Error("Override me")}an.before.get=function(){return this.docs.length?this.docs[0]:this.doc},sn.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new on(t.failed);return this},sn.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},an.docChanged.get=function(){return this.steps.length>0},sn.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(sn.prototype,an);var ln=Object.create(null),un=function(){};un.prototype.apply=function(e){return cn()},un.prototype.getMap=function(){return nn.empty},un.prototype.invert=function(e){return cn()},un.prototype.map=function(e){return cn()},un.prototype.merge=function(e){return null},un.prototype.toJSON=function(){return cn()},un.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=ln[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},un.jsonID=function(e,t){if(e in ln)throw new RangeError("Duplicate use of step JSON ID "+e);return ln[e]=t,t.prototype.jsonID=e,t};var hn=function(e,t){this.doc=e,this.failed=t};hn.ok=function(e){return new hn(e,null)},hn.fail=function(e){return new hn(null,e)},hn.fromReplace=function(e,t,n,r){try{return hn.ok(e.replace(t,n,r))}catch(o){if(o instanceof Ye)return hn.fail(o.message);throw o}};var dn=function(e){function t(t,n,r,o){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!o}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.apply=function(e){return this.structure&&fn(e,this.from,this.to)?hn.fail("Structure replace would overwrite content"):hn.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new nn([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?Qe.empty:new Qe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?Qe.empty:new Qe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,Qe.fromJSON(e,n.slice),!!n.structure)},t}(un);un.jsonID("replace",dn);var pn=function(e){function t(t,n,r,o,i,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.apply=function(e){if(this.structure&&(fn(e,this.from,this.gapFrom)||fn(e,this.gapTo,this.to)))return hn.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return hn.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?hn.fromReplace(e,this.from,this.to,n):hn.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new nn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,Qe.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(un);function fn(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function bn(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function mn(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!bn(r,o,i))break}}function gn(e,t,n,r){void 0===r&&(r=e);var o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);return i&&n.canReplaceWith(r,o,i.length?i[0]:t)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,c=r;a&&c<o;c++)a=a.matchType(n.child(c).type);return a&&a.validEnd?s:null}(r,t);return i?o.map(vn).concat({type:t,attrs:n}).concat(i.map(vn)):null}function vn(e){return{type:e,attrs:null}}function yn(e,t,n,r){void 0===n&&(n=1);var o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var l=o.node(a),u=o.index(a);if(l.type.spec.isolating)return!1;var h=l.content.cutByIndex(u,l.childCount),d=r&&r[c]||l;if(d!=l&&(h=h.replaceChild(0,d.type.create(d.attrs))),!l.canReplace(u+1,l.childCount)||!d.type.validContent(h))return!1}var p=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(p,p,f?f.type:o.node(i+1).type)}function Cn(e,t){var n,r,o=e.resolve(t),i=o.index();return r=o.nodeAfter,(n=o.nodeBefore)&&r&&!n.isLeaf&&n.canAppend(r)&&o.parent.canReplace(i,i+1)}function wn(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(wn(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return He.fromArray(r)}un.jsonID("replaceAround",pn),sn.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,o=e.depth,i=n.before(o+1),s=r.after(o+1),a=i,c=s,l=He.empty,u=0,h=o,d=!1;h>t;h--)d||n.index(h)>0?(d=!0,l=He.from(n.node(h).copy(l)),u++):a--;for(var p=He.empty,f=0,b=o,m=!1;b>t;b--)m||r.after(b+1)<r.end(b)?(m=!0,p=He.from(r.node(b).copy(p)),f++):c++;return this.step(new pn(a,c,i,s,new Qe(l.append(p),u,f),l.size-u,!0))},sn.prototype.wrap=function(e,t){for(var n=He.empty,r=t.length-1;r>=0;r--)n=He.from(t[r].type.create(t[r].attrs,n));var o=e.start,i=e.end;return this.step(new pn(o,i,o,i,new Qe(n,0,0),t.length,!0))},sn.prototype.setBlockType=function(e,t,n,r){var o=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,r)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(i).map(t),n)){o.clearIncompatible(o.mapping.slice(i).map(t,1),n);var s=o.mapping.slice(i),a=s.map(t,1),c=s.map(t+e.nodeSize,1);return o.step(new pn(a,c,a+1,c-1,new Qe(He.from(n.create(r,null,e.marks)),0,0),1,!0)),!1}})),this},sn.prototype.setNodeMarkup=function(e,t,n,r){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var i=t.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,i);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new pn(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Qe(He.from(i),0,0),1,!0))},sn.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var r=this.doc.resolve(e),o=He.empty,i=He.empty,s=r.depth,a=r.depth-t,c=t-1;s>a;s--,c--){o=He.from(r.node(s).copy(o));var l=n&&n[c];i=He.from(l?l.type.create(l.attrs,i):r.node(s).copy(i))}return this.step(new dn(e,e,new Qe(o.append(i),t,t),!0))},sn.prototype.join=function(e,t){void 0===t&&(t=1);var n=new dn(e-t,e+t,Qe.empty,!0);return this.step(n)};var kn=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Qe(wn(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return hn.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new xn(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(un);un.jsonID("addMark",kn);var xn=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=new Qe(wn(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return hn.fromReplace(e,this.from,this.to,r)},t.prototype.invert=function(){return new kn(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(un);function Mn(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}un.jsonID("removeMark",xn),sn.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var h=Math.max(c,e),d=Math.min(c+r.nodeSize,t),p=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(p)||(s&&s.to==h&&s.mark.eq(u[f])?s.to=d:o.push(s=new xn(h,d,u[f])));a&&a.to==h?a.to=d:i.push(a=new kn(h,d,n))}}})),o.forEach((function(e){return r.step(e)})),i.forEach((function(e){return r.step(e)})),this},sn.prototype.removeMark=function(e,t,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(e,t,(function(r,s){if(r.isInline){i++;var a=null;if(n instanceof jt)for(var c,l=r.marks;c=n.isInSet(l);)(a||(a=[])).push(c),l=c.removeFromSet(l);else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var u=Math.min(s+r.nodeSize,t),h=0;h<a.length;h++){for(var d=a[h],p=void 0,f=0;f<o.length;f++){var b=o[f];b.step==i-1&&d.eq(o[f].style)&&(p=b)}p?(p.to=u,p.step=i):o.push({style:d,from:Math.max(s,e),to:u,step:i})}}})),o.forEach((function(e){return r.step(new xn(e.from,e.to,e.style))})),this},sn.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),o=[],i=e+1,s=0;s<r.childCount;s++){var a=r.child(s),c=i+a.nodeSize,l=n.matchType(a.type,a.attrs);if(l){n=l;for(var u=0;u<a.marks.length;u++)t.allowsMarkType(a.marks[u].type)||this.step(new xn(i,c,a.marks[u]))}else o.push(new dn(i,c,Qe.empty));i=c}if(!n.validEnd){var h=n.fillBefore(He.empty,!0);this.replace(i,i,new Qe(h,0,0))}for(var d=o.length-1;d>=0;d--)this.step(o[d]);return this},sn.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=Qe.empty);var r=function(e,t,n,r){if(void 0===n&&(n=t),void 0===r&&(r=Qe.empty),t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return Mn(o,i,r)?new dn(t,n,r):new Tn(o,i,r).fit()}(this.doc,e,t,n);return r&&this.step(r),this},sn.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new Qe(He.from(n),0,0))},sn.prototype.delete=function(e,t){return this.replace(e,t,Qe.empty)},sn.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var Tn=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var r=0;r<=e.depth;r++){var o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}this.placed=He.empty;for(var i=e.depth;i>0;i--)this.placed=He.from(e.node(i).copy(this.placed))},On={depth:{configurable:!0}};function Sn(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(Sn(e.firstChild.content,t-1,n)))}function Nn(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Nn(e.lastChild.content,t-1,n)))}function Pn(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function Un(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,Un(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(He.empty,!0)))),e.copy(r)}function Dn(e,t,n,r,o){var i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function In(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(In(i.content,t+1,n,r,i)))}if(t>r){var s=o.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(He.empty,!0))}return e}function En(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;o==t.start(r)&&n.push(r)}return n}On.depth.get=function(){return this.frontier.length-1},Tn.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;for(var i=this.placed,s=r.depth,a=o.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var c=new Qe(i,s,a);return t>-1?new pn(r.pos,t,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new dn(r.pos,o.pos,c):void 0},Tn.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,r=(t?(n=Pn(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var i=this.frontier[o],s=i.type,a=i.match,c=void 0,l=void 0;if(1==e&&(r?a.matchType(r.type)||(l=a.fillBefore(He.from(r),!1)):s.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:o,parent:n,inject:l};if(2==e&&r&&(c=a.findWrapping(r.type)))return{sliceDepth:t,frontierDepth:o,parent:n,wrap:c};if(n&&a.matchType(n.type))break}},Tn.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Pn(t,n);return!(!o.childCount||o.firstChild.isLeaf||(this.unplaced=new Qe(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),0))},Tn.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=Pn(t,n);if(o.childCount<=1&&n>0){var i=t.size-n<=n+o.size;this.unplaced=new Qe(Sn(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Qe(Sn(t,n,1),n,r)},Tn.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,c=r?r.content:a.content,l=a.openStart-t,u=0,h=[],d=this.frontier[n],p=d.match,f=d.type;if(o){for(var b=0;b<o.childCount;b++)h.push(o.child(b));p=p.matchFragment(o)}for(var m=c.size+t-(a.content.size-a.openEnd);u<c.childCount;){var g=c.child(u),v=p.matchType(g.type);if(!v)break;(++u>1||0==l||g.content.size)&&(p=v,h.push(Un(g.mark(f.allowedMarks(g.marks)),1==u?l:0,u==c.childCount?m:-1)))}var y=u==c.childCount;y||(m=-1),this.placed=Nn(this.placed,n,He.from(h)),this.frontier[n].match=p,y&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var C=0,w=c;C<m;C++){var k=w.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),w=k.content}this.unplaced=y?0==t?Qe.empty:new Qe(Sn(a.content,t-1,1),t-1,m<0?a.openEnd:t-1):new Qe(Sn(a.content,t,u),a.openStart,a.openEnd)},Tn.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Dn(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},Tn.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Dn(e,t,o,r,i);if(s){for(var a=t-1;a>=0;a--){var c=this.frontier[a],l=Dn(e,a,c.type,c.match,!0);if(!l||l.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}},Tn.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Nn(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e},Tn.prototype.openFrontierNode=function(e,t,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Nn(this.placed,this.depth,He.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},Tn.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(He.empty,!0);e.childCount&&(this.placed=Nn(this.placed,this.frontier.length,e))},Object.defineProperties(Tn.prototype,On),sn.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),o=this.doc.resolve(t);if(Mn(r,o,n))return this.step(new dn(e,t,n));var i=En(r,this.doc.resolve(t));0==i[i.length-1]&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var l=r.node(a).type.spec;if(l.defining||l.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==c&&i.splice(1,0,-a)}for(var u=i.indexOf(s),h=[],d=n.openStart,p=n.content,f=0;;f++){var b=p.firstChild;if(h.push(b),f==n.openStart)break;p=b.content}d>0&&h[d-1].type.spec.defining&&r.node(u).type!=h[d-1].type?d-=1:d>=2&&h[d-1].isTextblock&&h[d-2].type.spec.defining&&r.node(u).type!=h[d-2].type&&(d-=2);for(var m=n.openStart;m>=0;m--){var g=(m+d+1)%(n.openStart+1),v=h[g];if(v)for(var y=0;y<i.length;y++){var C=i[(y+u)%i.length],w=!0;C<0&&(w=!1,C=-C);var k=r.node(C-1),x=r.index(C-1);if(k.canReplaceWith(x,x,v.type,v.marks))return this.replace(r.before(C),w?o.after(C):t,new Qe(In(n.content,0,n.openStart,g),g,n.openEnd))}}for(var M=this.steps.length,T=i.length-1;T>=0&&(this.replace(e,t,n),!(this.steps.length>M));T--){var O=i[T];T<0||(e=r.before(O),t=o.after(O))}return this},sn.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new Qe(He.from(n),0,0))},sn.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=En(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&r.end(c)-t!=r.depth-c)return this.delete(n.before(c),t);return this.delete(e,t)};var _n=Object.create(null),An=function(e,t,n){this.ranges=n||[new Ln(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},jn={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};jn.anchor.get=function(){return this.$anchor.pos},jn.head.get=function(){return this.$head.pos},jn.from.get=function(){return this.$from.pos},jn.to.get=function(){return this.$to.pos},jn.$from.get=function(){return this.ranges[0].$from},jn.$to.get=function(){return this.ranges[0].$to},jn.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},An.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},An.prototype.replace=function(e,t){void 0===t&&(t=Qe.empty);for(var n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)r=n,n=n.lastChild;for(var i=e.steps.length,s=this.ranges,a=0;a<s.length;a++){var c=s[a],l=c.$from,u=c.$to,h=e.mapping.slice(i);e.replaceRange(h.map(l.pos),h.map(u.pos),a?Qe.empty:t),0==a&&Hn(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}},An.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=e.mapping.slice(n),l=c.map(s.pos),u=c.map(a.pos);o?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),Hn(e,n,t.isInline?-1:1))}},An.findFrom=function(e,t,n){var r=e.parent.inlineContent?new Rn(e):$n(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?$n(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):$n(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}},An.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new Vn(e.node(0))},An.atStart=function(e){return $n(e,e,0,0,1)||new Vn(e)},An.atEnd=function(e){return $n(e,e,e.content.size,e.childCount,-1)||new Vn(e)},An.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=_n[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},An.jsonID=function(e,t){if(e in _n)throw new RangeError("Duplicate use of selection JSON ID "+e);return _n[e]=t,t.prototype.jsonID=e,t},An.prototype.getBookmark=function(){return Rn.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(An.prototype,jn),An.prototype.visible=!0;var Ln=function(e,t){this.$from=e,this.$to=t},Rn=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=n.resolve(r.map(this.anchor));return new t(i.parent.inlineContent?i:o,o)},t.prototype.replace=function(t,n){if(void 0===n&&(n=Qe.empty),e.prototype.replace.call(this,t,n),n==Qe.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new Bn(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=e.findFrom(r,o,!0)||e.findFrom(r,-o,!0);if(!s)return e.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i||(n=(e.findFrom(n,-o,!0)||e.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new t(n,r)},Object.defineProperties(t.prototype,n),t}(An);An.jsonID("text",Rn);var Bn=function(e,t){this.anchor=e,this.head=t};Bn.prototype.map=function(e){return new Bn(e.map(this.anchor),e.map(this.head))},Bn.prototype.resolve=function(e){return Rn.between(e.resolve(this.anchor),e.resolve(this.head))};var zn=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=n.resolve(o.pos);return i?e.near(s):new t(s)},t.prototype.content=function(){return new Qe(He.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new Fn(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(An);zn.prototype.visible=!1,An.jsonID("node",zn);var Fn=function(e){this.anchor=e};Fn.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.pos;return t.deleted?new Bn(n,n):new Fn(n)},Fn.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&zn.isSelectable(n)?new zn(t):An.near(t)};var Vn=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.replace=function(t,n){if(void 0===n&&(n=Qe.empty),n==Qe.empty){t.delete(0,t.doc.content.size);var r=e.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else e.prototype.replace.call(this,t,n)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return Gn},t}(An);An.jsonID("all",Vn);var Gn={map:function(){return this},resolve:function(e){return new Vn(e)}};function $n(e,t,n,r,o,i){if(t.inlineContent)return Rn.create(e,n);for(var s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){var a=t.child(s);if(a.isAtom){if(!i&&zn.isSelectable(a))return zn.create(e,n-(o<0?a.nodeSize:0))}else{var c=$n(e,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function Hn(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o,i=e.steps[r];(i instanceof dn||i instanceof pn)&&(e.mapping.maps[r].forEach((function(e,t,n,r){null==o&&(o=r)})),e.setSelection(An.near(e.doc.resolve(o),n)))}}var Jn=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return Xe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Xe.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(An.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(sn);function Wn(e,t){return t&&e?e.bind(t):e}var qn=function(e,t,n){this.name=e,this.init=Wn(t.init,n),this.apply=Wn(t.apply,n)},Kn=[new qn("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new qn("selection",{init:function(e,t){return e.selection||An.atStart(t.doc)},apply:function(e){return e.selection}}),new qn("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new qn("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],Xn=function(e,t){var n=this;this.schema=e,this.fields=Kn.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new qn(e.key,e.spec.state,e))}))},Yn=function(e){this.config=e},Qn={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};Qn.schema.get=function(){return this.config.schema},Qn.plugins.get=function(){return this.config.plugins},Yn.prototype.apply=function(e){return this.applyTransaction(e).state},Yn.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},Yn.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,l=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,c,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}},Yn.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new Yn(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<Zn.length;i++)Zn[i](this,e,t);return t},Qn.tr.get=function(){return new Jn(this)},Yn.create=function(e){for(var t=new Xn(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Yn(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},Yn.prototype.reconfigure=function(e){for(var t=new Xn(this.schema,e.plugins),n=t.fields,r=new Yn(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r},Yn.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t},Yn.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var r=new Xn(e.schema,e.plugins),o=new Yn(r);return r.fields.forEach((function(r){if("doc"==r.name)o.doc=ft.fromJSON(e.schema,t.doc);else if("selection"==r.name)o.selection=An.fromJSON(o.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var i in n){var s=n[i],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(o[r.name]=a.fromJSON.call(s,e,t[i],o))}o[r.name]=r.init(e,o)}})),o},Yn.addApplyListener=function(e){Zn.push(e)},Yn.removeApplyListener=function(e){var t=Zn.indexOf(e);t>-1&&Zn.splice(t,1)},Object.defineProperties(Yn.prototype,Qn);var Zn=[],er=function(e){this.props={},e.props&&function e(t,n,r){for(var o in t){var i=t[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=e(i,n,{})),r[o]=i}return r}(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:nr("plugin")};er.prototype.getState=function(e){return e[this.key]};var tr=Object.create(null);function nr(e){return e in tr?e+"$"+ ++tr[e]:(tr[e]=0,e+"$")}var rr=function(e){void 0===e&&(e="key"),this.key=nr(e)};rr.prototype.get=function(e){return e.config.pluginsByKey[this.key]},rr.prototype.getState=function(e){return e[this.key]};var or={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var ir=/Edge\/(\d+)/.exec(navigator.userAgent),sr=/MSIE \d/.test(navigator.userAgent),ar=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);or.mac=/Mac/.test(navigator.platform);var cr=or.ie=!!(sr||ar||ir);or.ie_version=sr?document.documentMode||6:ar?+ar[1]:ir?+ir[1]:null,or.gecko=!cr&&/gecko\/(\d+)/i.test(navigator.userAgent),or.gecko_version=or.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var lr=!cr&&/Chrome\/(\d+)/.exec(navigator.userAgent);or.chrome=!!lr,or.chrome_version=lr&&+lr[1],or.safari=!cr&&/Apple Computer/.test(navigator.vendor),or.ios=or.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),or.android=/Android \d/.test(navigator.userAgent),or.webkit="webkitFontSmoothing"in document.documentElement.style,or.webkit_version=or.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var ur=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},hr=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},dr=null,pr=function(e,t,n){var r=dr||(dr=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},fr=function(e,t,n,r){return n&&(mr(e,t,n,r,-1)||mr(e,t,n,r,1))},br=/^(img|br|input|textarea|hr)$/i;function mr(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:gr(e))){var i=e.parentNode;if(1!=i.nodeType||vr(e)||br.test(e.nodeName)||"false"==e.contentEditable)return!1;t=ur(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?gr(e):0}}}function gr(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function vr(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var yr=function(e){var t=e.isCollapsed;return t&&or.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Cr(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function wr(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function kr(e,t){return"number"==typeof e?e:e[t]}function xr(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.left+e.clientWidth*(t.width/e.offsetWidth||1),top:t.top,bottom:t.top+e.clientHeight*(t.height/e.offsetHeight||1)}}function Mr(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=hr(e));return t}function Tr(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=s&&(o.scrollLeft=s)}}var Or=null;function Sr(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Nr(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var Pr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ur(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,s=or.webkit||or.gecko;if(3==o.nodeType){if(!s||!Pr.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var a=i,c=i,l=n<0?1:-1;return n<0&&!i?(c++,l=-1):n>=0&&i==o.nodeValue.length?(a--,l=1):n<0?a--:c++,Dr(Nr(pr(o,a,c),l),l<0)}var u=Nr(pr(o,i,i),n);if(or.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var h=Nr(pr(o,i-1,i-1),-1);if(h.top==u.top){var d=Nr(pr(o,i,i+1),-1);if(d.top!=u.top)return Dr(d,d.left<h.left)}}return u}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(n<0||i==gr(o))){var p=o.childNodes[i-1];if(1==p.nodeType)return Ir(p.getBoundingClientRect(),!1)}if(i<gr(o)){var f=o.childNodes[i];if(1==f.nodeType)return Ir(f.getBoundingClientRect(),!0)}return Ir(o.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==gr(o))){var b=o.childNodes[i-1],m=3==b.nodeType?pr(b,gr(b)-(s?0:1)):1!=b.nodeType||"BR"==b.nodeName&&b.nextSibling?null:b;if(m)return Dr(Nr(m,1),!1)}if(i<gr(o)){var g=o.childNodes[i],v=3==g.nodeType?pr(g,0,s?0:1):1==g.nodeType?g:null;if(v)return Dr(Nr(v,-1),!0)}return Dr(Nr(3==o.nodeType?pr(o):o,-n),n>=0)}function Dr(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Ir(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Er(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}var _r=/[\u0590-\u08ac]/,Ar=null,jr=null,Lr=!1,Rr=function(e,t,n,r){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},Br={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};Rr.prototype.matchesWidget=function(){return!1},Rr.prototype.matchesMark=function(){return!1},Rr.prototype.matchesNode=function(){return!1},Rr.prototype.matchesHack=function(){return!1},Br.beforePosition.get=function(){return!1},Rr.prototype.parseRule=function(){return null},Rr.prototype.stopEvent=function(){return!1},Br.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},Br.border.get=function(){return 0},Rr.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},Rr.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},Br.posBefore.get=function(){return this.parent.posBeforeChild(this)},Br.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Br.posAfter.get=function(){return this.posBefore+this.size},Br.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Rr.prototype.localPosFromDOM=function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>ur(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},Rr.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==e.nodeType?e:e.parentNode):o.nodeDOM==e))return o;n=!1}}},Rr.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},Rr.prototype.posFromDOM=function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1},Rr.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},Rr.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,r=0,o=!0;;r++,o=!1){for(;r<this.children.length&&(this.children[r].beforePosition||this.children[r].dom.parentNode!=this.contentDOM);)n+=this.children[r++].size;var i=r==this.children.length?null:this.children[r];if(n==e&&(0==t||!i||!i.size||i.border||t<0&&o)||i&&i.domAtom&&e<n+i.size)return{node:this.contentDOM,offset:i?ur(i.dom):this.contentDOM.childNodes.length};if(!i)throw new Error("Invalid position "+e);var s=n+i.size;if(!i.domAtom&&(t<0&&!i.border?s>=e:s>e)&&(s>e||r+1>=this.children.length||!this.children[r+1].beforePosition))return i.domFromPos(e-n-i.border,t);n=s}},Rr.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==r&&e<=c){var l=i+a.border;if(e>=l&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,l);e=i;for(var u=s;u>0;u--){var h=this.children[u-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=ur(h.dom)+1;break}e-=h.size}-1==r&&(r=0)}if(r>-1&&(c>t||s==this.children.length-1)){t=c;for(var d=s+1;d<this.children.length;d++){var p=this.children[d];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){o=ur(p.dom);break}t+=p.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},Rr.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},Rr.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},Rr.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),i=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(o>a&&i<l)return c.setSelection(e-a-c.border,t-a-c.border,n,r);a=l}var u=this.domFromPos(e,e?-1:1),h=t==e?u:this.domFromPos(t,t?-1:1),d=n.getSelection(),p=!1;if((or.gecko||or.safari)&&e==t){var f=u.node,b=u.offset;if(3==f.nodeType)(p=b&&"\n"==f.nodeValue[b-1])&&b==f.nodeValue.length&&f.nextSibling&&"BR"==f.nextSibling.nodeName&&(u=h={node:f.parentNode,offset:ur(f)+1});else{var m=f.childNodes[b-1];p=m&&("BR"==m.nodeName||"false"==m.contentEditable)}}if(r||p&&or.safari||!fr(u.node,u.offset,d.anchorNode,d.anchorOffset)||!fr(h.node,h.offset,d.focusNode,d.focusOffset)){var g=!1;if((d.extend||e==t)&&!p){d.collapse(u.node,u.offset);try{e!=t&&d.extend(h.node,h.offset),g=!0}catch(C){if(!(C instanceof DOMException))throw C}}if(!g){if(e>t){var v=u;u=h,h=v}var y=document.createRange();y.setEnd(h.node,h.offset),y.setStart(u.node,u.offset),d.removeAllRanges(),d.addRange(y)}}},Rr.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},Br.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Rr.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var s=n+o.border,a=i-o.border;if(e>=s&&t<=a)return this.dirty=e==n||t==i?2:1,void(e!=s||t!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-s,t-s):o.dirty=3);o.dirty=3}n=i}this.dirty=2},Rr.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?2:1;t.dirty<n&&(t.dirty=n)}},Br.domAtom.get=function(){return!1},Object.defineProperties(Rr.prototype,Br);var zr=[],Fr=function(e){function t(t,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,zr,s,null),this.widget=n,i=this}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(Rr),Vr=function(e){function t(t,n,r,o){e.call(this,t,zr,n,null),this.textDOM=r,this.text=o}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(Rr),Gr=function(e){function t(t,n,r,o){e.call(this,t,[],r,o),this.mark=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.create=function(e,n,r,o){var i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return s&&s.dom||(s=Xt.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,s.dom,s.contentDOM||s.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,r){var o=t.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=io(i,n,s,r)),e>0&&(i=io(i,0,e,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},t}(Rr),$r=function(e){function t(t,n,r,o,i,s,a,c,l){e.call(this,t,n.isLeaf?zr:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,l)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,n,r,o,i,s){var a,c,l=i.nodeViews[n.type.name],u=l&&l(n,i,(function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:s}),r,o),h=u&&u.dom,d=u&&u.contentDOM;if(n.isText)if(h){if(3!=h.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else h=document.createTextNode(n.text);else h||(h=(a=Xt.renderSpec(document,n.type.spec.toDOM(n))).dom,d=a.contentDOM);d||n.isText||"BR"==h.nodeName||(h.hasAttribute("contenteditable")||(h.contentEditable=!1),n.type.spec.draggable&&(h.draggable=!0));var p=h;return h=eo(h,r,n),u?c=new qr(e,n,r,o,h,d,p,u,i,s+1):n.isText?new Jr(e,n,r,o,h,p,i):new t(e,n,r,o,h,d,p,i,s+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?He.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&to(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=this.node.inlineContent,o=t,i=r&&e.composing&&this.localCompositionNode(e,t),s=new ro(this,i&&i.node);!function(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var s=0,a=[],c=null,l=0;;){if(s<o.length&&o[s].to==i){for(var u=o[s++],h=void 0;s<o.length&&o[s].to==i;)(h||(h=[u])).push(o[s++]);if(h){h.sort(oo);for(var d=0;d<h.length;d++)n(h[d],l,!!c)}else n(u,l,!!c)}var p=void 0,f=void 0;if(c)f=-1,p=c,c=null;else{if(!(l<e.childCount))break;f=l,p=e.child(l++)}for(var b=0;b<a.length;b++)a[b].to<=i&&a.splice(b--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);var m=i+p.nodeSize;if(p.isText){var g=m;s<o.length&&o[s].from<g&&(g=o[s].from);for(var v=0;v<a.length;v++)a[v].to<g&&(g=a[v].to);g<m&&(c=p.cut(g-i),p=p.cut(0,g-i),m=g,f=-1)}r(p,a.length?p.isInline&&!p.isLeaf?a.filter((function(e){return!e.inline})):a.slice():zr,t.forChild(i,p),f),i=m}else for(var y=0;y<e.childCount;y++){var C=e.child(y);r(C,o,t.forChild(i,C),y),i+=C.nodeSize}}(this.node,this.innerDeco,(function(t,i,a){t.spec.marks?s.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!a&&s.syncToMarks(i==n.node.childCount?Xe.none:n.node.child(i).marks,r,e),s.placeWidget(t,e,o)}),(function(t,n,i,a){s.syncToMarks(t.marks,r,e),s.findNodeMatch(t,n,i,a)||s.updateNextNode(t,n,i,e,a)||s.addNode(t,n,i,e,o),o+=t.nodeSize})),s.syncToMarks(zr,r,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),function e(t,n,r){for(var o=t.firstChild,i=!1,s=0;s<n.length;s++){var a=n[s],c=a.dom;if(c.parentNode==t){for(;c!=o;)o=no(o),i=!0;o=o.nextSibling}else i=!0,t.insertBefore(c,o);if(a instanceof Gr){var l=o?o.previousSibling:t.lastChild;e(a.contentDOM,a.children,r),o=l?l.nextSibling:t.firstChild}}for(;o;)o=no(o),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),or.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e),e.style.cssText=t}}(this.dom))},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,r=n.from,o=n.to;if(!(!(e.state.selection instanceof Rn)||r<t||o>t+this.node.content.size)){var i=e.root.getSelection(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=gr(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(i.focusNode,i.focusOffset);if(s&&this.dom.contains(s.parentNode)){var a=s.nodeValue,c=function(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var s=e.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var c=s.text;o<e.childCount;){var l=e.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var u=c.lastIndexOf(t,r-a);if(u>=0&&u+t.length+a>=n)return a+u}}}return-1}(this.node.content,a,r-t,o-t);return c<0?null:{node:s,pos:c,text:a}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new Vr(this,i,n,o);e.compositionNodes.push(s),this.children=io(this.children,r,r+o.length,e,s)}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,n,r),0))},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!to(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Qr(this.dom,this.nodeDOM,Yr(this.outerDeco,this.node,t),Yr(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(Rr);function Hr(e,t,n,r,o){return eo(r,t,e),new $r(null,e,t,n,r,r,r,o,0)}var Jr=function(e){function t(t,n,r,o,i,s,a){e.call(this,t,n,r,o,i,null,s,a)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,0))},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,r){var o=this.node.cut(e,n),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}($r),Wr=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(Rr),qr=function(e){function t(t,n,r,o,i,s,a,c,l,u){e.call(this,t,n,r,o,i,s,a,l,u),this.spec=c}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.update=function(t,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,o)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}($r);function Kr(e){e&&(this.nodeName=e)}Kr.prototype=Object.create(null);var Xr=[new Kr];function Yr(e,t,n){if(0==e.length)return Xr;for(var r=n?Xr[0]:new Kr,o=[r],i=0;i<e.length;i++){var s=e[i].type.attrs;if(s)for(var a in s.nodeName&&o.push(r=new Kr(s.nodeName)),s){var c=s[a];null!=c&&(n&&1==o.length&&o.push(r=new Kr(t.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+c:"style"==a?r.style=(r.style?r.style+";":"")+c:"nodeName"!=a&&(r[a]=c))}}return o}function Qr(e,t,n,r){if(n==Xr&&r==Xr)return t;for(var o=t,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=e&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName||((c=document.createElement(s.nodeName)).pmIsDeco=!0,c.appendChild(o),a=Xr[0]),o=c}Zr(o,a||Xr[0],s)}return o}function Zr(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" "):zr,s=n.class?n.class.split(" "):zr,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=n.style){if(t.style)for(var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=u.exec(t.style);)e.style.removeProperty(l[1]);n.style&&(e.style.cssText+=n.style)}}function eo(e,t,n){return Qr(e,e,Xr,Yr(t,n,1!=e.nodeType))}function to(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function no(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var ro=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var n=function(e,t){for(var n=[],r=e.childCount,o=t.length-1;r>0&&o>=0;o--){var i=t[o],s=i.node;if(s){if(s!=e.child(r-1))break;n.push(i),--r}}return{nodes:n.reverse(),offset:r}}(e.node.content,e.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function oo(e,t){return e.type.side-t.type.side}function io(e,t,n,r,o){for(var i=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,u=a+=c.size;l>=n||u<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function so(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(s<0)return null;var a,c,l=r.resolve(s);if(yr(n)){for(a=l;o&&!o.node;)o=o.parent;if(o&&o.node.isAtom&&zn.isSelectable(o.node)&&o.parent&&(!o.node.isInline||!function(e,t,n){for(var r=0==t,o=t==gr(e);r||o;){if(e==n)return!0;var i=ur(e);if(!(e=e.parentNode))return!1;r=r&&0==i,o=o&&i==gr(e)}}(n.focusNode,n.focusOffset,o.dom))){var u=o.posBefore;c=new zn(s==u?l:r.resolve(u))}}else{var h=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(h<0)return null;a=r.resolve(h)}return c||(c=mo(e,a,l,"pointer"==t||e.state.selection.head<l.pos&&!i?1:-1)),c}function ao(e){return e.editable?e.hasFocus():go(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function co(e,t){var n=e.state.selection;if(fo(e,n),ao(e)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,ur(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&or.ie&&or.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var r,o,i=n.anchor,s=n.head;!lo||n instanceof Rn||(n.$from.parent.inlineContent||(r=uo(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=uo(e,n.to))),e.docView.setSelection(i,s,e.root,t),lo&&(r&&po(r),o&&po(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){ao(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}ro.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},ro.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},ro.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ro.prototype.syncToMarks=function(e,t,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=Gr.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},ro.prototype.findNodeMatch=function(e,t,n,r){var o=-1,i=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(i&&i.matchesNode(e,t,n))o=s.indexOf(i);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(e,t,n)&&this.preMatched.indexOf(l)<0){o=a;break}}return!(o<0||(this.destroyBetween(this.index,o),this.index++,0))},ro.prototype.updateNextNode=function(e,t,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof $r){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=o)return!1;var c=s.dom;if((!this.lock||!(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))||e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&to(t,s.outerDeco))&&s.update(e,t,n,r))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},ro.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,$r.create(this.top,e,t,n,r,o)),this.changed=!0},ro.prototype.placeWidget=function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new Fr(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},ro.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof Gr;)e=e.children[e.children.length-1];if(!e||!(e instanceof Jr)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new Wr(this.top,zr,t,null)),this.changed=!0}};var lo=or.safari||or.chrome&&or.chrome_version<63;function uo(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(or.safari&&i&&"false"==i.contentEditable)return ho(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return ho(i);if(s)return ho(s)}}function ho(e){return e.contentEditable="true",or.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function po(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function fo(e,t){if(t instanceof zn){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(bo(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else bo(e)}function bo(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function mo(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||Rn.between(t,n,r)}function go(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function vo(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=t>0?r.max(o):r.min(o),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&An.findFrom(s,t)}function yo(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Co(e,t,n){var r=e.state.selection;if(!(r instanceof Rn)){if(r instanceof zn&&r.node.isInline)return yo(e,new Rn(t>0?r.$to:r.$from));var o=vo(e.state,t);return!!o&&yo(e,o)}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var i=vo(e.state,t);return!!(i&&i instanceof zn)&&yo(e,i)}if(!(or.mac&&n.indexOf("m")>-1)){var s,a=r.$head,c=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(!c||c.isText)return!1;var l=t<0?a.pos-c.nodeSize:a.pos;return!!(c.isAtom||(s=e.docView.descAt(l))&&!s.contentDOM)&&(zn.isSelectable(c)?yo(e,new zn(t<0?e.state.doc.resolve(a.pos-c.nodeSize):a)):!!or.webkit&&yo(e,new Rn(e.state.doc.resolve(t<0?l:l+c.nodeSize))))}}function wo(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ko(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function xo(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,s=!1;for(or.gecko&&1==n.nodeType&&r<wo(n)&&ko(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(ko(a))o=n,i=--r;else{if(3!=a.nodeType)break;r=(n=a).nodeValue.length}}else{if(To(n))break;for(var c=n.previousSibling;c&&ko(c);)o=n.parentNode,i=ur(c),c=c.previousSibling;if(c)r=wo(n=c);else{if((n=n.parentNode)==e.dom)break;r=0}}s?Oo(e,t,n,r):o&&Oo(e,t,o,i)}}function Mo(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,s=wo(n);;)if(r<s){if(1!=n.nodeType)break;if(!ko(n.childNodes[r]))break;o=n,i=++r}else{if(To(n))break;for(var a=n.nextSibling;a&&ko(a);)o=a.parentNode,i=ur(a)+1,a=a.nextSibling;if(a)r=0,s=wo(n=a);else{if((n=n.parentNode)==e.dom)break;r=s=0}}o&&Oo(e,t,o,i)}}function To(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Oo(e,t,n,r){if(yr(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var i=e.state;setTimeout((function(){e.state==i&&co(e)}),50)}function So(e,t,n){var r=e.state.selection;if(r instanceof Rn&&!r.empty||n.indexOf("s")>-1)return!1;if(or.mac&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=vo(e.state,t);if(s&&s instanceof zn)return yo(e,s)}if(!o.parent.inlineContent){var a=t<0?o:i,c=r instanceof Vn?An.near(a,t):An.findFrom(a,t);return!!c&&yo(e,c)}return!1}function No(e,t){if(!(e.state.selection instanceof Rn))return!0;var n=e.state.selection,r=n.$head,o=n.empty;if(!r.sameParent(n.$anchor))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var i=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(i&&!i.isText){var s=e.state.tr;return t<0?s.delete(r.pos-i.nodeSize,r.pos):s.delete(r.pos,r.pos+i.nodeSize),e.dispatch(s),!0}return!1}function Po(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Uo(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(or.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||or.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Do(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:mo(e,t.resolve(n.anchor),t.resolve(n.head))}function Io(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function Eo(e,t){for(var n=[],r=t.content,o=t.openStart,i=t.openEnd;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var s=r.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),r=s.content}var a=e.someProp("clipboardSerializer")||Xt.fromSchema(e.state.schema),c=Bo(),l=c.createElement("div");l.appendChild(a.serializeFragment(r,{document:c}));for(var u,h=l.firstChild;h&&1==h.nodeType&&(u=Lo[h.nodeName.toLowerCase()]);){for(var d=u.length-1;d>=0;d--){for(var p=c.createElement(u[d]);l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p)}h=l.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n)),{dom:l,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function _o(e,t,n,r,o){var i,s,a=o.parent.type.spec.code;if(!n&&!t)return null;var c=t&&(r||a||!n);if(c){if(e.someProp("transformPastedText",(function(e){t=e(t,a||r)})),a)return new Qe(He.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0);var l=e.someProp("clipboardTextParser",(function(e){return e(t,o,r)}));l?s=l:(i=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){i.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),i=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=Bo().createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=o&&Lo[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),i=n.length),r.innerHTML=e;for(var s=0;s<i;s++)r=r.firstChild;return r}(n);var u=i&&i.querySelector("[data-pm-slice]"),h=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!s){var d=e.someProp("clipboardParser")||e.someProp("domParser")||Bt.fromSchema(e.state.schema);s=d.parseSlice(i,{preserveWhitespace:!(!c&&!h),context:o})}return s=h?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(l){return e}for(var o=e.content,i=e.openStart,s=e.openEnd,a=n.length-2;a>=0;a-=2){var c=r.nodes[n[a]];if(!c||c.hasRequiredAttrs())break;o=He.from(c.create(n[a+1],o)),i++,s++}return new Qe(o,i,s)}(function(e,t,n){return t<e.openStart&&(e=new Qe(jo(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Qe(jo(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}(s,+h[1],+h[2]),h[3]):Qe.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),o=void 0,i=[];if(e.forEach((function(e){if(i){var t,n=r.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&o.length&&function e(t,n,r,o,i){if(i<t.length&&i<n.length&&t[i]==n[i]){var s=e(t,n,r,o.lastChild,i+1);if(s)return o.copy(o.content.replaceChild(o.childCount-1,s));if(o.contentMatchAt(o.childCount).matchType(i==t.length-1?r.type:t[i+1]))return o.copy(o.content.append(He.from(Ao(r,t,i+1))))}}(n,o,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),o=t.contentMatchAt(t.childCount).fillBefore(He.empty,!0);return t.copy(r.append(o))}(i[i.length-1],o.length));var s=Ao(e,n);i.push(s),r=r.matchType(s.type,s.attrs),o=n}}})),i)return{v:He.from(i)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}(s.content,o),!1),e.someProp("transformPasted",(function(e){s=e(s)})),s}function Ao(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,He.from(e));return e}function jo(e,t,n,r,o,i){var s=t<0?e.firstChild:e.lastChild,a=s.content;return o<r-1&&(a=jo(a,t,n,r,o+1,i)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,e.childCount>1||i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(He.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}var Lo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ro=null;function Bo(){return Ro||(Ro=document.implementation.createHTMLDocument("title"))}var zo={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Fo=or.ie&&or.ie_version<=11,Vo=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Vo.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Vo.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Go=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);or.ie&&or.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Vo,Fo&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Go.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},Go.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Go.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,zo),Fo&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Go.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Fo&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Go.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Go.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Go.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},Go.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&go(e)){var e;if(this.suppressingSelectionUpdates)return co(this.view);if(or.ie&&or.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&fr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Go.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Go.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},Go.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&go(this.view)&&!this.ignoreSelectionChange(t),r=-1,o=-1,i=!1,s=[];if(this.view.editable)for(var a=0;a<e.length;a++){var c=this.registerMutation(e[a],s);c&&(r=r<0?c.from:Math.min(c.from,r),o=o<0?c.to:Math.max(c.to,o),c.typeOver&&(i=!0))}if(or.gecko&&s.length>1){var l=s.filter((function(e){return"BR"==e.nodeName}));if(2==l.length){var u=l[0],h=l[1];u.parentNode&&u.parentNode.parentNode==h.parentNode?h.remove():u.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),$o||($o=!0,"normal"==getComputedStyle(this.view.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))),this.handleDOMChange(r,o,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||co(this.view),this.currentSelection.set(t))}},Go.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var r=e.previousSibling,o=e.nextSibling;if(or.ie&&or.ie_version<=11&&e.addedNodes.length)for(var i=0;i<e.addedNodes.length;i++){var s=e.addedNodes[i],a=s.previousSibling,c=s.nextSibling;(!a||Array.prototype.indexOf.call(e.addedNodes,a)<0)&&(r=a),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(o=c)}for(var l=r&&r.parentNode==e.target?ur(r)+1:0,u=n.localPosFromDOM(e.target,l,-1),h=o&&o.parentNode==e.target?ur(o):e.target.childNodes.length,d=0;d<e.addedNodes.length;d++)t.push(e.addedNodes[d]);return{from:u,to:n.localPosFromDOM(e.target,h,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var $o=!1,Ho={},Jo={};function Wo(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function qo(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Ko(e,t)})}))}function Ko(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Xo(e){return{left:e.clientX,top:e.clientY}}function Yo(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),s=function(r){if(e.someProp(t,(function(t){return r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Qo(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Zo(e,t,n,r){return Yo(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function ei(e,t,n,r){return Yo(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(Qo(e,Rn.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),o=r.depth+1;o>0;o--){var i=o>r.depth?r.nodeAfter:r.node(o),s=r.before(o);if(i.inlineContent)Qo(e,Rn.create(n,s+1,s+1+i.content.size),"pointer");else{if(!zn.isSelectable(i))continue;Qo(e,zn.create(n,s),"pointer")}return!0}}(e,n)}function ti(e){return ci(e)}Jo.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!oi(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!or.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(n){return n(e,t)}))||function(e,t){var n=t.keyCode,r=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||or.mac&&72==n&&"c"==r?No(e,-1)||xo(e):46==n||or.mac&&68==n&&"c"==r?No(e,1)||Mo(e):13==n||27==n||(37==n?Co(e,-1,r)||xo(e):39==n?Co(e,1,r)||Mo(e):38==n?So(e,-1,r)||xo(e):40==n?function(e){if(or.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode;if(n&&1==n.nodeType&&0==t.focusOffset&&n.firstChild&&"false"==n.firstChild.contentEditable){var r=n.firstChild;Po(e,r,!0),setTimeout((function(){return Po(e,r,!1)}),20)}}}(e)||So(e,1,r)||Mo(e):r==(or.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}(e,t)?t.preventDefault():Wo(e,"key");else{var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",(function(t){return t(e,Cr(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},Jo.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Jo.keypress=function(e,t){if(!(oi(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||or.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof Rn&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,r)}))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var ni=or.mac?"metaKey":"ctrlKey";Ho.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=ti(e),r=Date.now(),o="singleClick";r-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(t,e.lastClick)&&!t[ni]&&("singleClick"==e.lastClick.type?o="doubleClick":"doubleClick"==e.lastClick.type&&(o="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:o};var i=e.posAtCoords(Xo(t));i&&("singleClick"==o?e.mouseDown=new ri(e,i,t,n):("doubleClick"==o?Zo:ei)(e,i.pos,i.inside,t)?t.preventDefault():Wo(e,"pointer"))};var ri=function(e,t,n,r){var o,i,s=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[ni],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{var a=e.state.doc.resolve(t.pos);o=a.parent,i=a.depth?a.before():0}this.mightDrag=null;var c=r?null:n.target,l=c?e.docView.nearestDesc(c,!0):null;this.target=l?l.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||e.state.selection instanceof zn&&i==e.state.selection.from)&&(this.mightDrag={node:o,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&or.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wo(e,"pointer")};function oi(e,t){return!!e.composing||!!(or.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}ri.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},ri.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Xo(e))),this.allowDefault||!t?Wo(this.view,"pointer"):function(e,t,n,r,o){return Yo(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof zn&&(n=o.node);for(var i=e.state.doc.resolve(t),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s);if(zn.isSelectable(a)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(Qo(e,zn.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&zn.isSelectable(r))&&(Qo(e,new zn(n),"pointer"),!0)}(e,n))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||or.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||or.chrome&&!(this.view.state.selection instanceof Rn)&&(t.pos==this.view.state.selection.from||t.pos==this.view.state.selection.to)?(Qo(this.view,An.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Wo(this.view,"pointer")}},ri.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Wo(this.view,"pointer")},Ho.touchdown=function(e){ti(e),Wo(e,"pointer")},Ho.contextmenu=function(e){return ti(e)};var ii=or.android?5e3:-1;function si(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return ci(e)}),t))}function ai(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function ci(e,t){if(e.domObserver.forceFlush(),ai(e),t||e.docView.dirty){var n=so(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}Jo.compositionstart=Jo.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),ci(e,!0),e.markCursor=null;else if(ci(e),or.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}o=s,i=-1}e.composing=!0}si(e,ii)},Jo.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,si(e,20))};var li=or.ie&&or.ie_version<15||or.ios&&or.webkit_version<604;function ui(e,t,n,r){var o=_o(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,r,o||Qe.empty)})))return!0;if(!o)return!1;var i=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),s=i?e.state.tr.replaceSelectionWith(i,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ho.copy=Jo.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=li?null:t.clipboardData,i=Eo(e,n.content()),s=i.dom,a=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}(e,s),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Jo.paste=function(e,t){var n=li?null:t.clipboardData;n&&ui(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ui(e,r.value,null,t):ui(e,r.textContent,r.innerHTML,t)}),50)}}(e,t)};var hi=function(e,t){this.slice=e,this.move=t},di=or.mac?"altKey":"ctrlKey";for(var pi in Ho.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,o=r.empty?null:e.posAtCoords(Xo(t));if(o&&o.pos>=r.from&&o.pos<=(r instanceof zn?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(zn.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(zn.create(e.state.doc,i.posBefore)))}var s=e.state.selection.content(),a=Eo(e,s),c=a.dom,l=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(li?"Text":"text/html",c.innerHTML),li||t.dataTransfer.setData("text/plain",l),e.dragging=new hi(s,!t[di])}},Ho.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},Jo.dragover=Jo.dragenter=function(e,t){return t.preventDefault()},Jo.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords(Xo(t));if(r){var o=e.state.doc.resolve(r.pos);if(o){var i=n&&n.slice||_o(e,t.dataTransfer.getData(li?"Text":"text/plain"),li?null:t.dataTransfer.getData("text/html"),!1,o),s=n&&!t[di];if(e.someProp("handleDrop",(function(n){return n(e,t,i||Qe.empty,s)})))t.preventDefault();else if(i){t.preventDefault();var a=i?function(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(l,l,o):r.node(a).contentMatchAt(l).findWrapping(o.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}(e.state.doc,o.pos,i):o.pos;null==a&&(a=o.pos);var c=e.state.tr;s&&c.deleteSelection();var l=c.mapping.map(a),u=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,h=c.doc;if(u?c.replaceRangeWith(l,l,i.content.firstChild):c.replaceRange(l,l,i),!c.doc.eq(h)){var d=c.doc.resolve(l);if(u&&zn.isSelectable(i.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new zn(d));else{var p=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((function(e,t,n,r){return p=r})),c.setSelection(mo(e,d,c.doc.resolve(p)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}}},Ho.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&co(e)}),20))},Ho.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},Ho.beforeinput=function(e,t){if(or.chrome&&or.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,Cr(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},Jo)Ho[pi]=Jo[pi];function fi(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var bi=function(e,t){this.spec=t||wi,this.side=this.spec.side||0,this.toDOM=e};bi.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new vi(i-n,i-n,this)},bi.prototype.valid=function(){return!0},bi.prototype.eq=function(e){return this==e||e instanceof bi&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&fi(this.spec,e.spec))};var mi=function(e,t){this.spec=t||wi,this.attrs=e};mi.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new vi(o,i,this)},mi.prototype.valid=function(e,t){return t.from<t.to},mi.prototype.eq=function(e){return this==e||e instanceof mi&&fi(this.attrs,e.attrs)&&fi(this.spec,e.spec)},mi.is=function(e){return e.type instanceof mi};var gi=function(e,t){this.spec=t||wi,this.attrs=e};gi.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new vi(o.pos-n,i.pos-n,this)},gi.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.offset;return r==t.from&&r+e.child(n.index).nodeSize==t.to},gi.prototype.eq=function(e){return this==e||e instanceof gi&&fi(this.attrs,e.attrs)&&fi(this.spec,e.spec)};var vi=function(e,t,n){this.from=e,this.to=t,this.type=n},yi={spec:{configurable:!0},inline:{configurable:!0}};vi.prototype.copy=function(e,t){return new vi(e,t,this.type)},vi.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},vi.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},vi.widget=function(e,t,n){return new vi(e,e,new bi(t,n))},vi.inline=function(e,t,n,r){return new vi(e,t,new mi(n,r))},vi.node=function(e,t,n,r){return new vi(e,t,new gi(n,r))},yi.spec.get=function(){return this.type.spec},yi.inline.get=function(){return this.type instanceof mi},Object.defineProperties(vi.prototype,yi);var Ci=[],wi={},ki=function(e,t){this.local=e&&e.length?e:Ci,this.children=t&&t.length?t:Ci};ki.create=function(e,t){return t.length?Ni(t,e,0,wi):xi},ki.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},ki.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,n,r+c,o)}},ki.prototype.map=function(e,t,n){return this==xi||0==e.maps.length?this:this.mapInner(e,t,0,0,n||wi)},ki.prototype.mapInner=function(e,t,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,o,i,s){for(var a=e.slice(),c=function(e,t,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+i||(t>=a[s]+i?a[s+1]=-1:n>=o&&(l=r-n-(t-e))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,h=0;h<a.length;h+=3)if(-1==a[h+1]){var d=n.map(e[h]+i),p=d-o;if(p<0||p>=r.content.size){u=!0;continue}var f=n.map(e[h+1]+i,-1)-o,b=r.content.findIndex(p),m=b.offset,g=r.maybeChild(b.index);if(g&&m==p&&m+g.nodeSize==f){var v=a[h+2].mapInner(n,g,d+1,e[h]+i+1,s);v!=xi?(a[h]=p,a[h+1]=f,a[h+2]=v):(a[h+1]=-2,u=!0)}else u=!0}if(u){var y=Ni(function(e,t,n,r,o,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var c=e.local[i].map(r,o,t);c?n.push(c):s.onRemove&&s.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)a(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+i+1);return n}(a,e,t||[],n,o,i,s),r,0,s);t=y.local;for(var C=0;C<a.length;C+=3)a[C+1]<0&&(a.splice(C,3),C-=3);for(var w=0,k=0;w<y.children.length;w+=3){for(var x=y.children[w];k<a.length&&a[k]<x;)k+=3;a.splice(k,0,y.children[w],y.children[w+1],y.children[w+2])}}return new ki(t&&t.sort(Pi),a)}(this.children,i,e,t,n,r,o):i?new ki(i.sort(Pi)):xi},ki.prototype.add=function(e,t){return t.length?this==xi?ki.create(e,t):this.addInner(e,t,0):this},ki.prototype.addInner=function(e,t,n){var r,o=this,i=0;e.forEach((function(e,s){var a,c=s+n;if(a=Oi(t,e,c)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(e,a,c+1):r.splice(i,0,s,s+e.nodeSize,Ni(a,e,c+1,wi)),i+=3}}));for(var s=Ti(i?Si(t):t,-n),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new ki(s.length?this.local.concat(s).sort(Pi):this.local,r||this.children)},ki.prototype.remove=function(e){return 0==e.length||this==xi?this:this.removeInner(e,0)},ki.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+t,a=n[o+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=xi?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var h=0,d=void 0;h<e.length;h++)if(d=e[h])for(var p=0;p<r.length;p++)r[p].eq(d,t)&&(r==this.local&&(r=this.local.slice()),r.splice(p--,1));return n==this.children&&r==this.local?this:r.length||n.length?new ki(r,n):xi},ki.prototype.forChild=function(e,t){if(this==xi)return this;if(t.isLeaf)return ki.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof mi){var l=Math.max(i,c.from)-i,u=Math.min(s,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var h=new ki(r.sort(Pi));return n?new Mi([h,n]):h}return n||xi},ki.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof ki)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0},ki.prototype.locals=function(e){return Ui(this.localsInner(e))},ki.prototype.localsInner=function(e){if(this==xi)return Ci;if(e.inlineContent||!this.local.some(mi.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof mi||t.push(this.local[n]);return t};var xi=new ki;ki.empty=xi,ki.removeOverlap=Ui;var Mi=function(e){this.members=e};function Ti(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new vi(o.from+t,o.to+t,o.type))}return n}function Oi(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function Si(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Ni(e,t,n,r){var o=[],i=!1;t.forEach((function(t,s){var a=Oi(e,t,s+n);if(a){i=!0;var c=Ni(a,t,n+s+1,r);c!=xi&&o.push(s,s+t.nodeSize,c)}}));for(var s=Ti(i?Si(e):e,-n).sort(Pi),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new ki(s,o):xi}function Pi(e,t){return e.from-t.from||e.to-t.to}function Ui(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Di(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Di(t,o+1,i.copy(r.to,i.to)))}}return t}function Di(e,t,n){for(;t<e.length&&Pi(n,e[t])>0;)t++;e.splice(t,0,n)}function Ii(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=xi&&t.push(r)})),e.cursorWrapper&&t.push(ki.create(e.state.doc,[e.cursorWrapper.deco])),Mi.from(t)}Mi.prototype.forChild=function(e,t){if(t.isLeaf)return ki.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=xi&&(o instanceof Mi?n=n.concat(o.members):n.push(o))}return Mi.from(n)},Mi.prototype.eq=function(e){if(!(e instanceof Mi)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Mi.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?Ui(n?t:t.sort(Pi)):Ci},Mi.from=function(e){switch(e.length){case 0:return xi;case 1:return e[0];default:return new Mi(e)}};var Ei=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Li(this),this.markCursor=null,this.cursorWrapper=null,ji(this),this.nodeViews=Ri(this),this.docView=Hr(this.state.doc,Ai(this),Ii(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Go(e,(function(t,n,r,o){return function(e,t,n,r,o){if(t<0){var i=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,s=so(e,i);if(s&&!e.state.selection.eq(s)){var a=e.state.tr.setSelection(s);"pointer"==i?a.setMeta("pointer",!0):"key"==i&&a.scrollIntoView(),e.dispatch(a)}}else{var c=e.state.doc.resolve(t),l=c.sharedDepth(n);t=c.before(l+1),n=e.state.doc.resolve(n).after(l+1);var u=e.state.selection,h=function(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,i=r.fromOffset,s=r.toOffset,a=r.from,c=r.to,l=e.root.getSelection(),u=null,h=l.anchorNode;if(h&&e.dom.contains(1==h.nodeType?h:h.parentNode)&&(u=[{node:h,offset:l.anchorOffset}],yr(l)||u.push({node:l.focusNode,offset:l.focusOffset})),or.chrome&&8===e.lastKeyCode)for(var d=s;d>i;d--){var p=o.childNodes[d-1],f=p.pmViewDesc;if("BR"==p.nodeType&&!f){s=d;break}if(!f||f.size)break}var b=e.state.doc,m=e.someProp("domParser")||Bt.fromSchema(e.state.schema),g=b.resolve(a),v=null,y=m.parse(o,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:s,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:Uo,context:g});if(u&&null!=u[0].pos){var C=u[0].pos,w=u[1]&&u[1].pos;null==w&&(w=C),v={anchor:C+a,head:w+a}}return{doc:y,sel:v,from:a,to:c}}(e,t,n);if(or.chrome&&e.cursorWrapper&&h.sel&&h.sel.anchor==e.cursorWrapper.deco.from){var d=e.cursorWrapper.deco.type.toDOM.nextSibling,p=d&&d.nodeValue?d.nodeValue.length:1;h.sel={anchor:h.sel.anchor+p,head:h.sel.anchor+p}}var f,b,m=e.state.doc,g=m.slice(h.from,h.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(f=e.state.selection.to,b="end"):(f=e.state.selection.from,b="start"),e.lastKeyCode=null;var v=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,c=s.b;return"end"==o&&(r-=a+Math.max(0,i-Math.min(a,c))-i),a<i&&e.size<t.size?(c=(i-=r<=i&&r>=a?i-r:0)+(c-a),a=i):c<i&&(a=(i-=r<=i&&r>=c?i-r:0)+(a-c),c=i),{start:i,endA:a,endB:c}}(g.content,h.doc.content,h.from,f,b);if(!v){if(!(r&&u instanceof Rn&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||h.sel&&h.sel.anchor!=h.sel.head){if(or.ios&&e.lastIOSEnter>Date.now()-225&&o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,Cr(13,"Enter"))})))return void(e.lastIOSEnter=0);if(h.sel){var y=Do(e,e.state.doc,h.sel);y&&!y.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(y))}return}v={start:u.from,endA:u.to,endB:u.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof Rn&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),or.ie&&or.ie_version<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>h.from&&" \xa0"==h.doc.textBetween(v.start-h.from-1,v.start-h.from+1)&&(v.start--,v.endA--,v.endB--);var C,w=h.doc.resolveNoCache(v.start-h.from),k=h.doc.resolveNoCache(v.endB-h.from),x=w.sameParent(k)&&w.parent.inlineContent;if((or.ios&&e.lastIOSEnter>Date.now()-225&&(!x||o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!x&&w.pos<h.doc.content.size&&(C=An.findFrom(h.doc.resolve(w.pos+1),1,!0))&&C.head==k.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,Cr(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>v.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||Io(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(Io(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Io(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(m,v.start,v.endA,w,k)&&e.someProp("handleKeyDown",(function(t){return t(e,Cr(8,"Backspace"))})))or.android&&or.chrome&&e.domObserver.suppressSelectionUpdates();else{or.android&&!x&&w.start()!=k.start()&&0==k.parentOffset&&w.depth==k.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==v.endA&&(v.endB-=2,k=h.doc.resolveNoCache(v.endB-h.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,Cr(13,"Enter"))}))}),20));var M,T,O,S,N=v.start,P=v.endA;if(x)if(w.pos==k.pos)or.ie&&or.ie_version<=11&&0==w.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return co(e)}),20)),M=e.state.tr.delete(N,P),T=m.resolve(v.start).marksAcross(m.resolve(v.endA));else if(v.endA==v.endB&&(S=m.resolve(v.start))&&(O=function(e,t){for(var n,r,o,i=e.firstChild.marks,s=t.firstChild.marks,a=i,c=s,l=0;l<s.length;l++)a=s[l].removeFromSet(a);for(var u=0;u<i.length;u++)c=i[u].removeFromSet(c);if(1==a.length&&0==c.length)r=a[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=a.length||1!=c.length)return null;r=c[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var h=[],d=0;d<t.childCount;d++)h.push(o(t.child(d)));if(He.from(h).eq(e))return{mark:r,type:n}}(w.parent.content.cut(w.parentOffset,k.parentOffset),S.parent.content.cut(S.parentOffset,v.endA-S.start()))))M=e.state.tr,"add"==O.type?M.addMark(N,P,O.mark):M.removeMark(N,P,O.mark);else if(w.parent.child(w.index()).isText&&w.index()==k.index()-(k.textOffset?0:1)){var U=w.parent.textBetween(w.parentOffset,k.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,N,P,U)})))return;M=e.state.tr.insertText(U,N,P)}if(M||(M=e.state.tr.replace(N,P,h.doc.slice(v.start-h.from,v.endB-h.from))),h.sel){var D=Do(e,M.doc,h.sel);D&&!(or.chrome&&or.android&&e.composing&&D.empty&&(D.head==N||D.head==M.mapping.map(P)-1)||or.ie&&D.empty&&D.head==N)&&M.setSelection(D)}T&&M.ensureMarks(T),e.dispatch(M.scrollIntoView())}}}(e,t,n,r,o)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=Ho[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Ko(e,t)||!e.editable&&t.type in Jo||n(e,t)})};for(var n in Ho)t(n);or.safari&&e.dom.addEventListener("input",(function(){return null})),qo(e)}(this),this.pluginViews=[],this.updatePluginViews()},_i={props:{configurable:!0},root:{configurable:!0}};function Ai(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[vi.node(0,e.state.doc.content.size,t)]}function ji(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:vi.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Li(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Ri(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}_i.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Ei.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&qo(this),this._props=e,this.updateStateInner(e.state,!0)},Ei.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},Ei.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Ei.prototype.updateStateInner=function(e,t){var n=this,r=this.state,o=!1,i=!1;if(e.storedMarks&&this.composing&&(ai(this),i=!0),this.state=e,t){var s=Ri(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(s,this.nodeViews)&&(this.nodeViews=s,o=!0),qo(this)}this.editable=Li(this),ji(this);var a=Ii(this),c=Ai(this),l=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=o||!this.docView.matchesNode(e.doc,c,a);!u&&e.selection.eq(r.selection)||(i=!0);var h,d,p,f,b,m,g,v,y,C="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=o-20){t=a,n=c.top;break}}}return{refDOM:t,refTop:n,stack:Mr(e.dom)}}(this);if(i){this.domObserver.stop();var w=u&&(or.ie||or.chrome)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(p=r.selection,f=e.selection,b=Math.min(p.$anchor.sharedDepth(p.head),f.$anchor.sharedDepth(f.head)),p.$anchor.start(b)!=f.$anchor.start(b));if(u){var k=or.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!o&&this.docView.update(e.doc,c,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Hr(e.doc,c,a,this.dom,this)),k&&!this.trackWrites&&(w=!0)}w||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(h=this.docView.domFromPos(this.state.selection.anchor,0),d=this.root.getSelection(),fr(h.node,h.offset,d.anchorNode,d.anchorOffset)))?co(this,w):(fo(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var x=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||function(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=n||e.dom;s;s=hr(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,c=a?wr(i):xr(s),l=0,u=0;if(t.top<c.top+kr(r,"top")?u=-(c.top-t.top+kr(o,"top")):t.bottom>c.bottom-kr(r,"bottom")&&(u=t.bottom-c.bottom+kr(o,"bottom")),t.left<c.left+kr(r,"left")?l=-(c.left-t.left+kr(o,"left")):t.right>c.right-kr(r,"right")&&(l=t.right-c.right+kr(o,"right")),l||u)if(a)i.defaultView.scrollBy(l,u);else{var h=s.scrollLeft,d=s.scrollTop;u&&(s.scrollTop+=u),l&&(s.scrollLeft+=l);var p=s.scrollLeft-h,f=s.scrollTop-d;t={left:t.left-p,top:t.top-f,right:t.right-p,bottom:t.bottom-f}}if(a)break}}(this,e.selection instanceof zn?this.docView.domAfterPos(e.selection.from).getBoundingClientRect():this.coordsAtPos(e.selection.head,1),x)}else C&&(v=(m=C).refTop,Tr(m.stack,0==(y=(g=m.refDOM)?g.getBoundingClientRect().top:0)?0:y-v))},Ei.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Ei.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},Ei.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[e];if(null!=s&&(n=t?t(s):s))return n}},Ei.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Ei.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Or)return e.focus(Or);var t=Mr(e);e.focus(null==Or?{get preventScroll(){return Or={preventScroll:!0},!0}}:void 0),Or||(Or=!1,Tr(t,0))}(this.dom),co(this),this.domObserver.start()},_i.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Ei.prototype.posAtCoords=function(e){return function(e,t){var n,r,o,i,s=e.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(t.left,t.top);a&&(o=(n=a).offsetNode,i=n.offset)}catch(b){}if(!o&&s.caretRangeFromPoint){var c=s.caretRangeFromPoint(t.left,t.top);c&&(o=(r=c).startContainer,i=r.startOffset)}var l,u=s.elementFromPoint(t.left,t.top+1);if(!u||!e.dom.contains(1!=u.nodeType?u.parentNode:u)){var h=e.dom.getBoundingClientRect();if(!Sr(t,h))return null;if(!(u=function e(t,n,r){var o=t.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),s=i;;){var a=t.childNodes[s];if(1==a.nodeType)for(var c=a.getClientRects(),l=0;l<c.length;l++){var u=c[l];if(Sr(n,u))return e(a,n,u)}if((s=(s+1)%o)==i)break}return t}(e.dom,t,h)))return null}if(or.safari&&u.draggable&&(o=i=null),u=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(u,t),o){if(or.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var d,p=o.childNodes[i];"IMG"==p.nodeName&&(d=p.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}o==e.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(l=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n)}(e,o,i,t))}null==l&&(l=function(e,t,n){var r=function e(t,n){for(var r,o,i=2e8,s=0,a=n.top,c=n.top,l=t.firstChild,u=0;l;l=l.nextSibling,u++){var h=void 0;if(1==l.nodeType)h=l.getClientRects();else{if(3!=l.nodeType)continue;h=pr(l).getClientRects()}for(var d=0;d<h.length;d++){var p=h[d];if(p.top<=a&&p.bottom>=c){a=Math.max(p.bottom,a),c=Math.min(p.top,c);var f=p.left>n.left?p.left-n.left:p.right<n.left?n.left-p.right:0;if(f<i){r=l,i=f,o=f&&3==r.nodeType?{left:p.right<n.left?p.right:p.left,top:n.top}:n,1==l.nodeType&&f&&(s=u+(n.left>=(p.left+p.right)/2?1:0));continue}}!r&&(n.left>=p.right&&n.top>=p.top||n.left>=p.left&&n.top>=p.bottom)&&(s=u+1)}}return r&&3==r.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=Nr(r,1);if(i.top!=i.bottom&&Sr(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(r,o):!r||i&&1==r.nodeType?{node:t,offset:s}:e(r,o)}(t,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(o,i,s)}(e,u,t));var f=e.docView.nearestDesc(u,!0);return{pos:l,inside:f?f.posAtStart-f.border:-1}}(this,e)},Ei.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),Ur(this,e,t)},Ei.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},Ei.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Ei.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Ei.prototype.endOfTextblock=function(e,t){return function(e,t,n){return Ar==t&&jr==n?Lr:(Ar=t,jr=n,Lr="up"==n||"down"==n?function(e,t,n){var r=t.selection,o="up"==n?r.$from:r.$to;return Er(e,t,(function(){for(var t=e.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.dom;break}t=r.dom.parentNode}for(var i=Ur(e,o.pos,1),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=pr(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==n?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return _r.test(r.parent.textContent)&&a.modify?Er(e,t,(function(){var t=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var c=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),c})):"left"==n||"backward"==n?i:s}(e,t,n))}(this,t||this.state,e)},Ei.prototype.destroy=function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ii(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Ei.prototype.dispatchEvent=function(e){return function(e,t){Ko(e,t)||!Ho[t.type]||!e.editable&&t.type in Jo||Ho[t.type](e,t)}(this,e)},Ei.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Ei.prototype,_i);var Bi=["ol",0],zi=["ul",0],Fi=["li",0],Vi={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?Bi:["ol",{start:e.attrs.order},0]}},Gi={parseDOM:[{tag:"ul"}],toDOM:function(){return zi}};function $i(e){return function(t,n){var r=t.selection,o=r.$from,i=o.blockRange(r.$to,(function(t){return t.childCount&&t.firstChild.type==e}));return!!i&&(!n||(o.node(i.depth-1).type==e?function(e,t,n,r){var o=e.tr,i=r.end,s=r.$to.end(r.depth);return i<s&&(o.step(new pn(i-1,s,i,s,new Qe(He.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new ht(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth)),t(o.lift(r,mn(r)).scrollIntoView()),!0}(t,n,e,i):function(e,t,n){for(var r=e.tr,o=n.parent,i=n.end,s=n.endIndex-1,a=n.startIndex;s>a;s--)i-=o.child(s).nodeSize,r.delete(i-1,i+1);var c=r.doc.resolve(n.start),l=c.nodeAfter,u=0==n.startIndex,h=n.endIndex==o.childCount,d=c.node(-1),p=c.index(-1);if(!d.canReplace(p+(u?0:1),p+1,l.content.append(h?He.empty:He.from(o))))return!1;var f=c.pos,b=f+l.nodeSize;return r.step(new pn(f-(u?1:0),b+(h?1:0),f+1,b-1,new Qe((u?He.empty:He.from(o.copy(He.empty))).append(h?He.empty:He.from(o.copy(He.empty))),u?0:1,h?0:1),u?0:1)),t(r.scrollIntoView()),!0}(t,n,i)))}}function Hi(e){return function(t,n){var r=t.selection,o=r.$from.blockRange(r.$to,(function(t){return t.childCount&&t.firstChild.type==e}));if(!o)return!1;var i=o.startIndex;if(0==i)return!1;var s=o.parent,a=s.child(i-1);if(a.type!=e)return!1;if(n){var c=a.lastChild&&a.lastChild.type==s.type,l=He.from(c?e.create():null),u=new Qe(He.from(e.create(null,He.from(s.type.create(null,l)))),c?3:1,0),h=o.start,d=o.end;n(t.tr.step(new pn(h-(c?3:1),d,h,d,u,1,!0)).scrollIntoView())}return!0}}var Ji=function(e){var t=function(e){var t={};return Object.keys(e).forEach((function(n){e[n]&&(t[n]=e[n])})),t}(e);return Object.entries(t).map((function(e){var t,r=n(e,2),o=r[0],i=r[1];return"".concat((t=o,t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))),":").concat(i)})).join(";")},Wi=new Lt({marks:{link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title"),target:e.getAttribute("target")}}}],toDOM:function(e){var t=e.attrs;return["a",{href:t.href,title:t.title,target:t.target},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong",0]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline"}],toDOM:function(){return["u",0]}},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:function(){return["s",0]}},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:function(e){return{color:e}}}],toDOM:function(e){var t=e.attrs.color;return["span",{style:"color:".concat(t,";")},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:function(e){return{backgroundColor:e}}}],toDOM:function(e){var t=e.attrs.backgroundColor;return["span",{style:"background-color:".concat(t,";")},0]}}},nodes:{doc:{content:"block+"},text:{group:"inline"},paragraph:{content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs:function(e){var t=e.style.textAlign;return{align:e.getAttribute("align")||t||null}}}],toDOM:function(e){var t=e.attrs.align;return["p",{style:Ji({textAlign:"left"!==t?t:null})||null},0]}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},heading:{attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:function(e){var t=e.style.textAlign;return{level:1,align:e.getAttribute("align")||t||null}}},{tag:"h2",getAttrs:function(e){var t=e.style.textAlign;return{level:2,align:e.getAttribute("align")||t||null}}},{tag:"h3",getAttrs:function(e){var t=e.style.textAlign;return{level:3,align:e.getAttribute("align")||t||null}}},{tag:"h4",getAttrs:function(e){var t=e.style.textAlign;return{level:4,align:e.getAttribute("align")||t||null}}},{tag:"h5",getAttrs:function(e){var t=e.style.textAlign;return{level:5,align:e.getAttribute("align")||t||null}}},{tag:"h6",getAttrs:function(e){var t=e.style.textAlign;return{level:6,align:e.getAttribute("align")||t||null}}}],toDOM:function(e){var t=e.attrs,n=t.level,r=t.align;return["h"+n,{style:Ji({textAlign:"left"!==r?r:null})||null},0]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt"),width:e.getAttribute("width")}}}],toDOM:function(e){var t=e.attrs;return["img",{src:t.src,alt:t.alt,title:t.title,width:t.width}]}},list_item:Object.assign(Object.assign({},{parseDOM:[{tag:"li"}],toDOM:function(){return Fi},defining:!0}),{content:"paragraph block*"}),ordered_list:Object.assign(Object.assign({},Vi),{content:"list_item+",group:"block"}),bullet_list:Object.assign(Object.assign({},Gi),{content:"list_item+",group:"block"})}}),qi=s("jhN1"),Ki=s("XNiG");function Xi(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Yi(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function Qi(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Zi(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function es(e,t){var n=e.selection,r=n.$head;return!(!r.parent.type.spec.code||!r.sameParent(n.$anchor)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))}function ts(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function ns(e,t){var n=e.selection,r=n.$from,o=n.$to;if(n instanceof Vn||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=ts(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=e.tr.insert(s,i.createAndFill());a.setSelection(Rn.create(a.doc,s+1)),t(a.scrollIntoView())}return!0}function rs(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(yn(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&mn(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)}function is(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof zn&&e.selection.node.isBlock)return!(!r.parentOffset||!yn(e.doc,r.pos)||(t&&t(e.tr.split(r.pos).scrollIntoView()),0));if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,s=e.tr;(e.selection instanceof Rn||e.selection instanceof Vn)&&s.deleteSelection();var a=0==r.depth?null:ts(r.node(-1).contentMatchAt(r.indexAfter(-1))),c=i&&a?[{type:a}]:null,l=yn(s.doc,s.mapping.map(r.pos),1,c);c||l||!yn(s.doc,s.mapping.map(r.pos),1,a&&[{type:a}])||(c=[{type:a}],l=!0),l&&(s.split(s.mapping.map(r.pos),1,c),i||r.parentOffset||r.parent.type==a||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),He.from([a.create(),r.parent]))||s.setNodeMarkup(s.mapping.map(r.before()),a)),t(s.scrollIntoView())}return!0}function ss(e,t,n){var r,o,i=t.nodeBefore,s=t.nodeAfter;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(function(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!(!(r&&o&&r.type.compatibleContent(o.type))||(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(i,i+1)||!o.isTextblock&&!Cn(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;var a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(r[0]||s.type).validEnd){if(n){for(var c=t.pos+s.nodeSize,l=He.empty,u=r.length-1;u>=0;u--)l=He.from(r[u].create(null,l));l=He.from(i.copy(l));var h=e.tr.step(new pn(t.pos-1,c,t.pos,c,new Qe(l,1,0),r.length,!0)),d=c+2*r.length;Cn(h.doc,d)&&h.join(d),n(h.scrollIntoView())}return!0}var p=An.findFrom(t,1),f=p&&p.$from.blockRange(p.$to),b=f&&mn(f);if(null!=b&&b>=t.depth)return n&&n(e.tr.lift(f,b).scrollIntoView()),!0;if(a&&s.isTextblock&&Yi(i,"end")){for(var m=i,g=[];g.push(m),!m.isTextblock;)m=m.lastChild;if(m.canReplace(m.childCount,m.childCount,s.content)){if(n){for(var v=He.empty,y=g.length-1;y>=0;y--)v=He.from(g[y].copy(v));n(e.tr.step(new pn(t.pos-g.length,t.pos+s.nodeSize,t.pos+1,t.pos+s.nodeSize-1,new Qe(v,g.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function as(e,t){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,(function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)a=!0;else{var i=n.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,e)}})),!!a&&(r&&r(n.tr.setBlockType(i,s,e,t).scrollIntoView()),!0)}}function cs(e,t){return function(n,r){var o=n.selection,i=o.$cursor,s=o.ranges;if(o.empty&&!i||!function(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,s=o.$to,a=0==i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,s.pos,(function(e){if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)})),a)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if(i)return i.v}return!1}(n.doc,s,e))return!1;if(r)if(i)e.isInSet(n.storedMarks||i.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{for(var a=!1,c=n.tr,l=0;!a&&l<s.length;l++){var u=s[l];a=n.doc.rangeHasMark(u.$from.pos,u.$to.pos,e)}for(var h=0;h<s.length;h++){var d=s[h],p=d.$from,f=d.$to;if(a)c.removeMark(p.pos,f.pos,e);else{var b=p.pos,m=f.pos,g=p.nodeAfter,v=f.nodeBefore,y=g&&g.isText?/^\s*/.exec(g.text)[0].length:0,C=v&&v.isText?/\s*$/.exec(v.text)[0].length:0;b+y<m&&(b+=y,m-=C),c.addMark(b,m,e.create(t))}}r(c.scrollIntoView())}return!0}}function ls(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}s("xgIS"),s("D0XW"),s("gcYM");var us=ls(Xi,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var o=Qi(r);if(!o){var i=r.blockRange(),s=i&&mn(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)}var a=o.nodeBefore;if(!a.type.spec.isolating&&ss(e,o,t))return!0;if(0==r.parent.content.size&&(Yi(a,"end")||zn.isSelectable(a))){if(t){var c=e.tr.deleteRange(r.before(),r.after());c.setSelection(Yi(a,"end")?An.findFrom(c.doc.resolve(c.mapping.map(o.pos,-1)),-1):zn.create(c.doc,o.pos-a.nodeSize)),t(c.scrollIntoView())}return!0}return!(!a.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos-a.nodeSize,o.pos).scrollIntoView()),0))}),(function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;i=Qi(o)}var s=i&&i.nodeBefore;return!(!s||!zn.isSelectable(s)||(t&&t(e.tr.setSelection(zn.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),0))})),hs=ls(Xi,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var o=Zi(r);if(!o)return!1;var i=o.nodeAfter;if(ss(e,o,t))return!0;if(0==r.parent.content.size&&(Yi(i,"start")||zn.isSelectable(i))){if(t){var s=e.tr.deleteRange(r.before(),r.after());s.setSelection(Yi(i,"start")?An.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):zn.create(s.doc,s.mapping.map(o.pos))),t(s.scrollIntoView())}return!0}return!(!i.isAtom||o.depth!=r.depth-1||(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),0))}),(function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=Zi(o)}var s=i&&i.nodeAfter;return!(!s||!zn.isSelectable(s)||(t&&t(e.tr.setSelection(zn.create(e.doc,i.pos)).scrollIntoView()),0))})),ds={Enter:ls(es,ns,rs,is),"Mod-Enter":function(e,t){var n=e.selection,r=n.$head;if(!r.parent.type.spec.code||!r.sameParent(n.$anchor))return!1;var o=r.node(-1),i=r.indexAfter(-1),s=ts(o.contentMatchAt(i));if(!o.canReplaceWith(i,i,s))return!1;if(t){var a=r.after(),c=e.tr.replaceWith(a,a,s.createAndFill());c.setSelection(An.near(c.doc.resolve(a),1)),t(c.scrollIntoView())}return!0},Backspace:us,"Mod-Backspace":us,Delete:hs,"Mod-Delete":hs,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new Vn(e.doc))),!0}},ps={"Ctrl-h":ds.Backspace,"Alt-Backspace":ds["Mod-Backspace"],"Ctrl-d":ds.Delete,"Ctrl-Alt-Backspace":ds["Mod-Delete"],"Alt-Delete":ds["Mod-Delete"],"Alt-d":ds["Mod-Delete"]};for(var fs in ds)ps[fs]=ds[fs];for(var bs=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?ps:ds,ms=function(e,t){var n=e.selection,r=n.from,o=n.$from,i=n.to;return n.empty?!!t.isInSet(e.storedMarks||o.marks()):e.doc.rangeHasMark(r,i,t)},gs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,o=r.$from,i=r.to,s=function(e,t){for(var n=t.depth;n>0;n--)if(t.node(n).type===e)return t.node(n).type;return null}(t,o);return Object.entries(n).length&&s?i<=o.end()&&o.parent.hasMarkup(t,n):!!s},vs=function(e){var t=[],n=e.selection,r=n.from,o=n.to;return e.doc.nodesBetween(r,o,(function(e){t.push(e)})),t},ys=function(e,n,r){var o,i=t(n);try{var s=function(){var t=o.value,n=t.$from,i=t.$to,s=0===n.depth&&e.type.allowsMarkType(r);if(e.nodesBetween(n.pos,i.pos,(function(e){return!s&&(s=e.inlineContent&&e.type.allowsMarkType(r),!0)})),s)return{v:!0}};for(i.s();!(o=i.n()).done;){var a=s();if("object"==typeof a)return a.v}}catch(c){i.e(c)}finally{i.f()}return!1},Cs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var o=n.tr,i=n.selection,s=i.empty,a=i.ranges,c=i.$from,l=i.$to;if(s&&i instanceof Rn){if(!i.$cursor||!ys(n.doc,a,e))return!1;if(o.addStoredMark(e.create(t)),!o.storedMarksSet)return!1;null==r||r(o)}else{if(o.addMark(c.pos,l.pos,e.create(t)),!o.docChanged)return!1;null==r||r(o.scrollIntoView())}return!0}},ws={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},ks={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},xs="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Ms="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),Ts="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Os="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Ss="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ns=xs&&(Os||+xs[1]<57)||Ts&&Os,Ps=0;Ps<10;Ps++)ws[48+Ps]=ws[96+Ps]=String(Ps);for(Ps=1;Ps<=24;Ps++)ws[Ps+111]="F"+Ps;for(Ps=65;Ps<=90;Ps++)ws[Ps]=String.fromCharCode(Ps+32),ks[Ps]=String.fromCharCode(Ps);for(var Us in ws)ks.hasOwnProperty(Us)||(ks[Us]=ws[Us]);var Ds="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function Is(e){var t,n,r,o,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var c=i[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);Ds?o=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function Es(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function _s(e){return new er({props:{handleKeyDown:As(e)}})}function As(e){var t=function(e){var t=Object.create(null);for(var n in e)t[Is(n)]=e[n];return t}(e);return function(e,n){var r,o=function(e){var t=!(Ns&&(e.ctrlKey||e.altKey||e.metaKey)||(Ms||Ss)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?ks:ws)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=1==o.length&&" "!=o,s=t[Es(o,n,!i)];if(s&&s(e.state,e.dispatch,e))return!0;if(i&&(n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=ws[n.keyCode])&&r!=o){var a=t[Es(r,n,!0)];if(a&&a(e.state,e.dispatch,e))return!0}else if(i&&n.shiftKey){var c=t[Es(o,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}return!1}}var js=function(){};js.prototype.append=function(e){return e.length?(e=js.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},js.prototype.prepend=function(e){return e.length?js.from(e).append(this):this},js.prototype.appendInner=function(e){return new Rs(this,e)},js.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?js.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},js.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},js.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},js.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},js.from=function(e){return e instanceof js?e:e&&e.length?new Ls(e):js.empty};var Ls=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(js);js.empty=new Ls([]);var Rs=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(js),Bs=js,zs=function(e,t){this.items=e,this.eventCount=t};zs.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--)if(this.items.get(i-1).selection){--i;break}t&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,a,c=e.tr,l=[],u=[];return this.items.forEach((function(e,t){if(!e.step)return r||(r=n.remapping(i,t+1),o=r.maps.length),o--,void u.push(e);if(r){u.push(new Fs(e.map));var h,d=e.step.map(r.slice(o));d&&c.maybeStep(d).doc&&l.push(new Fs(h=c.mapping.maps[c.mapping.maps.length-1],null,null,l.length+u.length)),o--,h&&r.appendMap(h,o)}else c.maybeStep(e.step);return e.selection?(s=r?e.selection.map(r.slice(o)):e.selection,a=new zs(n.items.slice(0,i).append(u.reverse().concat(l)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:c,selection:s}},zs.prototype.addTransform=function(e,t,n,r){for(var o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,c=0;c<e.steps.length;c++){var l,u=e.steps[c].invert(e.docs[c]),h=new Fs(e.mapping.maps[c],u,t);(l=a&&a.merge(h))&&(h=l,c?o.pop():s=s.slice(0,s.length-1)),o.push(h),t&&(i++,t=null),r||(a=h)}var d,p,f,b=i-n.depth;return b>Gs&&(p=b,(d=s).forEach((function(e,t){if(e.selection&&0==p--)return f=t,!1})),s=d.slice(f),i-=b),new zs(s.append(o),i)},zs.prototype.remapping=function(e,t){var n=new rn;return this.items.forEach((function(t,r){n.appendMap(t.map,null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:null)}),e,t),n},zs.prototype.addMaps=function(e){return 0==this.eventCount?this:new zs(this.items.append(e.map((function(e){return new Fs(e)}))),this.eventCount)},zs.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),r);var a=t;this.items.forEach((function(t){var r=o.getMirror(--a);if(null!=r){i=Math.min(i,r);var c=o.maps[r];if(t.step){var l=e.steps[r].invert(e.docs[r]),u=t.selection&&t.selection.map(o.slice(a+1,r));u&&s++,n.push(new Fs(c,l,u))}else n.push(new Fs(c))}}),r);for(var c=[],l=t;l<i;l++)c.push(new Fs(o.maps[l]));var u=this.items.slice(0,r).append(c).append(n),h=new zs(u,s);return h.emptyItemCount()>500&&(h=h.compress(this.items.length-n.length)),h},zs.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},zs.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach((function(i,s){if(s>=e)r.push(i),i.selection&&o++;else if(i.step){var a=i.step.map(t.slice(n)),c=a&&a.getMap();if(n--,c&&t.appendMap(c,n),a){var l=i.selection&&i.selection.map(t.slice(n));l&&o++;var u,h=new Fs(c.invert(),a,l),d=r.length-1;(u=r.length&&r[d].merge(h))?r[d]=u:r.push(h)}}else i.map&&n--}),this.items.length,0),new zs(Bs.from(r.reverse()),o)},zs.empty=new zs(Bs.empty,0);var Fs=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};Fs.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new Fs(t.getMap().invert(),t,this.selection)}};var Vs=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},Gs=20;function $s(e){var t=[];return e.forEach((function(e,n,r,o){return t.push(r,o)})),t}function Hs(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function Js(e,t,n,r){var o=Ks(t),i=Xs.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),l=new Vs(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(Xs,{redo:r,historyState:l}).scrollIntoView())}}var Ws=!1,qs=null;function Ks(e){var t=e.plugins;if(qs!=t){Ws=!1,qs=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Ws=!0;break}}return Ws}var Xs=new rr("history"),Ys=new rr("closeHistory");function Qs(e,t){var n=Xs.getState(e);return!(!n||0==n.done.eventCount||(t&&Js(n,e,t,!1),0))}function Zs(e,t){var n=Xs.getState(e);return!(!n||0==n.undone.eventCount||(t&&Js(n,e,t,!0),0))}var ea=function(e,t){var n;this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,r,o){var i=n;if(t[1]){var s=t[0].lastIndexOf(t[1]);i+=t[0].slice(s+t[1].length);var a=(r+=s)-o;a>0&&(i=t[0].slice(s-a,s)+i,r=o)}return e.tr.insertText(i,r,o)}):t};function ta(e,t,n,r,o,i){if(e.composing)return!1;var s=e.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;for(var c=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"\ufffc")+r,l=0;l<o.length;l++){var u=o[l].match.exec(c),h=u&&o[l].handler(s,u,t-(u[0].length-r.length),n);if(h)return e.dispatch(h.setMeta(i,{transform:h,from:t,to:n,text:r})),!0}return!1}var na=new ea(/--$/,"\u2014"),ra=new ea(/\.\.\.$/,"\u2026"),oa=[new ea(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c"),new ea(/"$/,"\u201d"),new ea(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new ea(/'$/,"\u2019")];function ia(e,t,n,r){return new ea(e,(function(e,o,i,s){var a=n instanceof Function?n(o):n,c=e.tr.delete(i,s),l=c.doc.resolve(i).blockRange(),u=l&&gn(l,t,a);if(!u)return null;c.wrap(l,u);var h=c.doc.resolve(i-1).nodeBefore;return h&&h.type==t&&Cn(c.doc,i-1)&&(!r||r(o,h))&&c.join(i-1),c}))}function sa(e,t,n){return new ea(e,(function(e,r,o,i){var s=e.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,a):null}))}var aa=["imgEl"];function ca(e,t){if(1&e){var n=m.Vb();m.Ub(0,"span",4),m.Ub(1,"span",5),m.bc("mousedown",(function(e){return m.yc(n),m.fc().startResizing(e,"left")})),m.Tb(),m.Ub(2,"span",6),m.bc("mousedown",(function(e){return m.yc(n),m.fc().startResizing(e,"right")})),m.Tb(),m.Ub(3,"span",7),m.bc("mousedown",(function(e){return m.yc(n),m.fc().startResizing(e,"left")})),m.Tb(),m.Ub(4,"span",8),m.bc("mousedown",(function(e){return m.yc(n),m.fc().startResizing(e,"right")})),m.Tb(),m.Tb()}}var la=function(e){return{"NgxEditor__Resizer--Active":e}},ua=["ngxEditor"],ha=["*"];function da(e,t){if(1&e&&m.Pb(0,"ngx-toggle-command",7),2&e){var n=m.fc().$implicit,r=m.fc(2);m.Eb(r.iconContainerClass),m.lc("toolbarItem",n)}}function pa(e,t){if(1&e&&m.Pb(0,"ngx-link"),2&e){var n=m.fc(3);m.Eb(n.iconContainerClass)}}function fa(e,t){if(1&e&&m.Pb(0,"ngx-image"),2&e){var n=m.fc(3);m.Eb(n.iconContainerClass)}}function ba(e,t){if(1&e&&m.Pb(0,"ngx-dropdown",9),2&e){var n=t.$implicit,r=m.fc(4);m.Eb(r.dropdownContainerClass),m.lc("group",n.key)("items",n.value)}}function ma(e,t){if(1&e&&(m.Sb(0),m.Jc(1,ba,1,4,"ngx-dropdown",8),m.gc(2,"keyvalue"),m.Rb()),2&e){var n=m.fc().$implicit,r=m.fc(2);m.Cb(1),m.lc("ngForOf",m.hc(2,1,r.getDropdownItems(n)))}}function ga(e,t){if(1&e&&m.Pb(0,"ngx-color-picker",10),2&e){var n=m.fc(3);m.Eb(n.iconContainerClass),m.lc("presets",n.presets)}}function va(e,t){if(1&e&&m.Pb(0,"ngx-color-picker",11),2&e){var n=m.fc(3);m.Eb(n.iconContainerClass),m.lc("presets",n.presets)}}function ya(e,t){if(1&e&&m.Pb(0,"div"),2&e){var n=m.fc(3);m.Eb(n.seperatorClass)}}function Ca(e,t){if(1&e&&(m.Sb(0),m.Jc(1,da,1,3,"ngx-toggle-command",3),m.Jc(2,pa,1,2,"ngx-link",4),m.Jc(3,fa,1,2,"ngx-image",4),m.Jc(4,ma,3,3,"ng-container",2),m.Jc(5,ga,1,3,"ngx-color-picker",5),m.Jc(6,va,1,3,"ngx-color-picker",6),m.Jc(7,ya,1,2,"div",4),m.Rb()),2&e){var n=t.$implicit,r=t.last,o=m.fc().last,i=m.fc();m.Cb(1),m.lc("ngIf",i.toggleCommands.includes(n)),m.Cb(1),m.lc("ngIf","link"===n),m.Cb(1),m.lc("ngIf","image"===n),m.Cb(1),m.lc("ngIf",i.isDropDown(n)),m.Cb(1),m.lc("ngIf","text_color"===n),m.Cb(1),m.lc("ngIf","background_color"===n),m.Cb(1),m.lc("ngIf",r&&!o)}}function wa(e,t){if(1&e&&(m.Sb(0),m.Jc(1,Ca,8,7,"ng-container",1),m.Rb()),2&e){var n=t.$implicit;m.Cb(1),m.lc("ngForOf",n)}}function ka(e,t){if(1&e&&(m.Sb(0),m.Qb(1,12),m.Rb()),2&e){var n=m.fc();m.Cb(1),m.lc("ngTemplateOutlet",n.customMenuRef)}}var xa=function(e){return{"NgxEditor--Disabled":e}};function Ma(e,t){if(1&e&&(m.Ub(0,"div",12),m.Lc(1),m.Tb()),2&e){var n=m.fc(2);m.Cb(1),m.Nc(" ",(null==n.href.errors?null:n.href.errors.pattern)&&"Please enter valid url."," ")}}function Ta(e,t){if(1&e&&(m.Ub(0,"div",12),m.Lc(1),m.Tb()),2&e){var n=m.fc(2);m.Cb(1),m.Nc(" ",(null==n.text.errors?null:n.text.errors.required)&&"This is required"," ")}}function Oa(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",2),m.Ub(1,"form",3),m.bc("ngSubmit",(function(e){return m.yc(n),m.fc().insertLink(e)})),m.Ub(2,"div",4),m.Ub(3,"div",5),m.Ub(4,"label",6),m.Lc(5),m.Tb(),m.Pb(6,"input",7),m.Jc(7,Ma,2,1,"div",8),m.Tb(),m.Tb(),m.Ub(8,"div",4),m.Ub(9,"div",5),m.Ub(10,"label",6),m.Lc(11),m.Tb(),m.Pb(12,"input",9),m.Jc(13,Ta,2,1,"div",8),m.Tb(),m.Tb(),m.Ub(14,"div",4),m.Ub(15,"div",5),m.Ub(16,"label"),m.Pb(17,"input",10),m.Lc(18),m.Tb(),m.Tb(),m.Tb(),m.Ub(19,"button",11),m.Lc(20),m.Tb(),m.Tb(),m.Tb()}if(2&e){var r=m.fc();m.Cb(1),m.lc("formGroup",r.form),m.Cb(4),m.Mc(r.getLabel("url")),m.Cb(2),m.lc("ngIf",r.href.touched&&r.href.invalid),m.Cb(4),m.Mc(r.getLabel("text")),m.Cb(2),m.lc("ngIf",r.text.touched&&r.text.invalid),m.Cb(5),m.Nc(" ",r.getLabel("openInNewTab")," "),m.Cb(1),m.lc("disabled",!r.form.valid),m.Cb(1),m.Mc(r.getLabel("insert"))}}var Sa=function(e,t){return{"NgxEditor__Dropdown--Active":e,"NgxEditor--Disabled":t}};function Na(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",4),m.bc("mousedown",(function(e){m.yc(n);var r=t.$implicit;return m.fc(2).onClick(e,r)})),m.Lc(1),m.Tb()}if(2&e){var r=t.$implicit,o=m.fc(2);m.lc("ngClass",m.qc(2,Sa,r===o.activeItem,o.disabledItems.includes(r))),m.Cb(1),m.Nc(" ",o.getName(r)," ")}}function Pa(e,t){if(1&e&&(m.Ub(0,"div",2),m.Jc(1,Na,2,5,"div",3),m.Tb()),2&e){var n=m.fc();m.Cb(1),m.lc("ngForOf",n.items)}}function Ua(e,t){if(1&e&&(m.Ub(0,"div",12),m.Lc(1),m.Tb()),2&e){var n=m.fc(2);m.Cb(1),m.Nc(" ",(null==n.src.errors?null:n.src.errors.pattern)&&"Please enter valid url."," ")}}function Da(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",2),m.Ub(1,"form",3),m.bc("ngSubmit",(function(e){return m.yc(n),m.fc().insertLink(e)})),m.Ub(2,"div",4),m.Ub(3,"div",5),m.Ub(4,"label",6),m.Lc(5),m.Tb(),m.Pb(6,"input",7),m.Jc(7,Ua,2,1,"div",8),m.Tb(),m.Tb(),m.Ub(8,"div",4),m.Ub(9,"div",5),m.Ub(10,"label",6),m.Lc(11),m.Tb(),m.Pb(12,"input",9),m.Tb(),m.Tb(),m.Ub(13,"div",4),m.Ub(14,"div",5),m.Ub(15,"label",6),m.Lc(16),m.Tb(),m.Pb(17,"input",10),m.Tb(),m.Tb(),m.Ub(18,"button",11),m.Lc(19),m.Tb(),m.Tb(),m.Tb()}if(2&e){var r=m.fc();m.Cb(1),m.lc("formGroup",r.form),m.Cb(4),m.Mc(r.getLabel("url")),m.Cb(2),m.lc("ngIf",r.src.touched&&r.src.invalid),m.Cb(4),m.Mc(r.getLabel("altText")),m.Cb(5),m.Mc(r.getLabel("title")),m.Cb(2),m.lc("disabled",!r.form.valid||!r.form.dirty),m.Cb(1),m.Mc(r.getLabel("insert"))}}var Ia=function(e,t){return{backgroundColor:e,color:t}},Ea=function(e){return{"NgxEditor__Color--Active":e}};function _a(e,t){if(1&e){var n=m.Vb();m.Ub(0,"button",7),m.bc("mousedown",(function(e){m.yc(n);var r=t.$implicit;return m.fc(3).onColorSelect(e,r)})),m.Tb()}if(2&e){var r=t.$implicit,o=m.fc(3);m.lc("ngStyle",m.qc(3,Ia,r,o.getContrastYIQ(r)))("title",r)("ngClass",m.pc(6,Ea,o.activeColors.includes(r)))}}function Aa(e,t){if(1&e&&(m.Ub(0,"div",5),m.Jc(1,_a,1,8,"button",6),m.Tb()),2&e){var n=t.$implicit;m.Cb(1),m.lc("ngForOf",n)}}function ja(e,t){if(1&e){var n=m.Vb();m.Ub(0,"div",2),m.Jc(1,Aa,2,1,"div",3),m.Ub(2,"button",4),m.bc("mousedown",(function(e){return m.yc(n),m.fc().remove(e)})),m.Lc(3),m.Tb(),m.Tb()}if(2&e){var r=m.fc();m.Cb(1),m.lc("ngForOf",r.presets),m.Cb(1),m.lc("disabled",!r.isActive),m.Cb(1),m.Nc(" ",r.getLabel("remove")," ")}}var La,Ra,Ba,za,Fa,Va,Ga,$a,Ha,Ja,Wa,qa,Ka,Xa,Ya=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return new er({key:new rr("focus"),props:{handleDOMEvents:{focus:function(){return e(),!1}}}})},Qa=((La=function(){function e(){i(this,e),this.alt="",this.title="",this.outerWidth="",this.selected=!1,this.imageResize=new m.o}return a(e,[{key:"startResizing",value:function(e,t){e.preventDefault(),this.resizeImage(e,t)}},{key:"resizeImage",value:function(e,t){var n=this,r=e.pageX,o=this.imgEl.nativeElement.clientWidth,i="left"===t,s=window.getComputedStyle(this.view.dom).width,a=parseInt(s,10),c=function(e){var t=e.pageX-r,s=i?o-t:o+t;s>a||s<20||(n.outerWidth=s+"px")};document.addEventListener("mousemove",c),document.addEventListener("mouseup",(function e(t){t.preventDefault(),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e),n.imageResize.emit()}))}}]),e}()).\u0275fac=function(e){return new(e||La)},La.\u0275cmp=m.Ib({type:La,selectors:[["ngx-image-view"]],viewQuery:function(e,t){var n;1&e&&m.Dc(aa,!0),2&e&&m.tc(n=m.cc())&&(t.imgEl=n.first)},inputs:{alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",src:"src",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],["imgEl",""],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(e,t){1&e&&(m.Ub(0,"span",0),m.Jc(1,ca,5,0,"span",1),m.Pb(2,"img",2,3),m.Tb()),2&e&&(m.Gc("width",t.outerWidth),m.lc("ngClass",m.pc(7,la,t.selected)),m.Cb(1),m.lc("ngIf",t.selected),m.Cb(1),m.lc("src",t.src,m.Ac)("alt",t.alt)("title",t.title))},directives:[g.n,g.p],styles:["*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid #fff}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]}),La),Za=function(){function e(t,n,r,o){var s=this;i(this,e),this.updating=!1,this.handleResize=function(){if(!s.updating){var e=s.view,t=e.state,n=e.dispatch,r=t.tr.setNodeMarkup(s.getPos(),void 0,{src:s.imageComponentRef.instance.src,width:s.imageComponentRef.instance.outerWidth}),o=r.doc.resolve(s.getPos()),i=new zn(o);r.setSelection(i),n(r)}};var a=document.createElement("image-view"),c=o.get(m.j);this.applicationRef=o.get(m.g);var l=c.resolveComponentFactory(Qa);this.imageComponentRef=l.create(o,[],a),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(t.attrs),this.imageComponentRef.instance.view=n,this.dom=a,this.view=n,this.node=t,this.getPos=r,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe((function(){s.handleResize()}))}return a(e,[{key:"computeChanges",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"setNodeAttributes",value:function(e){this.imageComponentRef.instance.src=e.src,this.imageComponentRef.instance.alt=e.alt,this.imageComponentRef.instance.title=e.title,this.imageComponentRef.instance.outerWidth=e.width}},{key:"update",value:function(e){return e.type===this.node.type&&(this.node=e,this.computeChanges(this.node.attrs,e.attrs)&&(this.updating=!0,this.setNodeAttributes(e.attrs),this.updating=!1),!0)}},{key:"ignoreMutation",value:function(){return!0}},{key:"selectNode",value:function(){this.imageComponentRef.instance.selected=!0}},{key:"deselectNode",value:function(){this.imageComponentRef.instance.selected=!1}},{key:"destroy",value:function(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}}]),e}(),ec=/((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)$/,tc={type:"doc",content:[{type:"paragraph"}]},nc=function(e,t){if(!e)return t.nodeFromJSON(tc);if("string"!=typeof e)return t.nodeFromJSON(e);var n,r,o,i,s=(n=e,o=null!=(r=t)?r:Wi,(i=document.createElement("div")).innerHTML=n,Bt.fromSchema(o).parse(i).toJSON());return t.nodeFromJSON(s)},rc=((Ba=function(){function e(t,n){i(this,e),this.renderer=t,this.injector=n,this.placeholder="Type Here...",this.enabled=!0,this.focusOut=new m.o,this.focusIn=new m.o,this.subscriptions=[],this.onChange=function(){},this.onTouched=function(){}}return a(e,[{key:"writeValue",value:function(e){this.outputFormat||"string"!=typeof e||(this.outputFormat="html"),this.editor.setContent(e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"handleChange",value:function(e){if("html"!==this.outputFormat)this.onChange(e);else{var t=function(e,t){var n=null!=t?t:Wi,r=n.nodeFromJSON(e),o=Xt.fromSchema(n).serializeFragment(r.content),i=document.createElement("div");return i.appendChild(o),i.innerHTML}(e,this.editor.schema);this.onChange(t)}}},{key:"setMeta",value:function(e,t){var n=this.editor.view;(0,n.dispatch)(n.state.tr.setMeta(e,t))}},{key:"enable",value:function(){this.setMeta("UPDATE_EDITABLE",!0)}},{key:"disable",value:function(){this.setMeta("UPDATE_EDITABLE",!1)}},{key:"setPlaceholder",value:function(e){this.setMeta("UPDATE_PLACEHOLDER",e)}},{key:"registerPlugins",value:function(){var e,t,n=this;this.editor.registerPlugin(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new er({key:new rr("editable"),state:{init:function(){return e},apply:function(e,t){var n;return null!==(n=e.getMeta("UPDATE_EDITABLE"))&&void 0!==n?n:t}},props:{editable:function(e){return this.getState(e)},attributes:function(e){return this.getState(e)?null:{class:"NgxEditor__Content--Disabled"}}}})}(this.enabled)),this.editor.registerPlugin((t=this.placeholder,new er({key:new rr("placeholder"),state:{init:function(){return null!=t?t:""},apply:function(e,t){var n;return null!==(n=e.getMeta("UPDATE_PLACEHOLDER"))&&void 0!==n?n:t}},props:{decorations:function(e){var t,n=e.doc,r=this.getState(e);if(!r)return ki.empty;if(1===n.childCount&&(null===(t=null==n?void 0:n.firstChild)||void 0===t?void 0:t.isTextblock)&&0===n.firstChild.content.size){var o=document.createElement("span");return o.classList.add("NgxEditor__Placeholder"),o.textContent=r,ki.create(n,[vi.widget(1,o)])}return ki.empty}}}))),this.editor.registerPlugin(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new er({key:new rr("attributes"),props:{attributes:e}})}({class:"NgxEditor__Content"})),this.editor.registerPlugin(Ya((function(){n.focusIn.emit()}))),this.editor.registerPlugin(Ya((function(){n.focusIn.emit()}))),this.editor.registerPlugin(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return new er({key:new rr("blur"),props:{handleDOMEvents:{blur:function(){return e(),!1}}}})}((function(){n.focusOut.emit(),n.onTouched()}))),this.editor.registerPlugin((e=this.injector,new er({key:new rr("link"),props:{nodeViews:{image:function(t,n,r){return new Za(t,n,r,e)}}}}))),this.editor.registerPlugin(new er({key:new rr("link"),props:{transformPasted:function(e){return new Qe(function e(t){var n=[];return t.forEach((function(t){if(t.isText){var r=t.text,o=0,i=ec.exec(r);if(i){var s=i.index,a=s+i[0].length,c=t.type.schema.marks.link;s>0&&n.push(t.cut(o,s));var l=r.slice(s,a);n.push(t.cut(s,a).mark(c.create({href:l}).addToSet(t.marks))),o=a}o<r.length&&n.push(t.cut(o))}else n.push(t.copy(e(t.content)))})),He.fromArray(n)}(e.content),e.openStart,e.openEnd)}}}))}},{key:"ngOnInit",value:function(){var e=this;if(!this.editor)throw new Error("NgxEditor: Required editor instance");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom);var t=this.editor.valueChanges.subscribe((function(t){e.handleChange(t)}));this.subscriptions.push(t)}},{key:"ngOnChanges",value:function(e){(null==e?void 0:e.placeholder)&&!e.placeholder.isFirstChange()&&this.setPlaceholder(e.placeholder.currentValue),(null==e?void 0:e.enabled)&&!e.enabled.isFirstChange()&&(e.enabled.currentValue?this.enable():this.disable())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||Ba)(m.Ob(m.G),m.Ob(m.s))},Ba.\u0275cmp=m.Ib({type:Ba,selectors:[["ngx-editor"]],viewQuery:function(e,t){var n;1&e&&m.Dc(ua,!0),2&e&&m.tc(n=m.cc())&&(t.ngxEditor=n.first)},inputs:{placeholder:"placeholder",enabled:"enabled",outputFormat:"outputFormat",editor:"editor"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[m.Bb([{provide:c.n,useExisting:Object(m.W)((function(){return Ba})),multi:!0}]),m.Ab],ngContentSelectors:ha,decls:3,vars:0,consts:[[1,"NgxEditor"],["ngxEditor",""]],template:function(e,t){1&e&&(m.kc(),m.Ub(0,"div",0,1),m.jc(2),m.Tb())},styles:['.NgxEditor{background:#fff;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder{color:#6c757d;opacity:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;cursor:text}.NgxEditor__Content{padding:.5rem;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0}.NgxEditor__Content p{margin:0 0 .7rem}.NgxEditor__Content blockquote{padding-left:1rem;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;padding:.2rem;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:1.85rem;width:1.85rem;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 .3rem}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active{background-color:#e8f0fe}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active.NgxEditor__MenuItem--Text{color:#1a73e8}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active svg{fill:#1a73e8}.NgxEditor__Dropdown{min-width:4rem;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 .3rem;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:1.5rem;vertical-align:.25rem;border-top:.25rem solid;border-right:.25rem solid transparent;border-bottom:0;border-left:.25rem solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;top:calc(1.85rem + 2px);box-shadow:0 2px 6px 2px rgba(60,64,67,.15);border-radius:4px;background-color:#fff;z-index:10;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:.5rem;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown.NgxEditor__Dropdown--Open,.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected{background-color:#e8f0fe}.NgxEditor__Dropdown.NgxEditor__Dropdown--Open .NgxEditor__Dropdown--Text,.NgxEditor__Dropdown.NgxEditor__Dropdown--Selected .NgxEditor__Dropdown--Text{color:#1a73e8}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__Popup{position:absolute;top:calc(1.85rem + 2px);box-shadow:0 2px 6px 2px rgba(60,64,67,.15);border-radius:4px;background-color:#fff;z-index:10;min-width:12rem;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 .3rem}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}'],encapsulation:2}),Ba),oc=((Ra=function(){function e(){i(this,e),this.customMenuRefChange=new Ki.a}return a(e,[{key:"setCustomMenuRef",value:function(e){this.customMenuRefChange.next(e)}}]),e}()).\u0275fac=function(e){return new(e||Ra)},Ra.\u0275prov=Object(m.Kb)({factory:function(){return new Ra},token:Ra,providedIn:"root"}),Ra),ic=[["bold","italic"],["code","blockquote"],["underline","strike"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]],sc=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"],ac=((za=function(){function e(t){i(this,e),this.menuService=t,this.toolbar=ic,this.colorPresets=sc,this.disabled=!1,this.customMenuRef=null,this.toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify"],this.iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--Icon"],this.dropdownContainerClass=["NgxEditor__Dropdown"],this.seperatorClass=["NgxEditor__Seperator"]}return a(e,[{key:"isDropDown",value:function(e){var t;return!!(null===(t=e)||void 0===t?void 0:t.heading)}},{key:"getDropdownItems",value:function(e){return e}},{key:"ngOnInit",value:function(){if(!this.editor)throw new Error("NgxEditor: Required editor instance");this.menuService.editor=this.editor}},{key:"presets",get:function(){var e=[];return this.colorPresets.forEach((function(t,n){var r=Math.floor(n/8);e[r]||e.push([]),e[r].push(t)})),e}}]),e}()).\u0275fac=function(e){return new(e||za)(m.Ob(oc))},za.\u0275cmp=m.Ib({type:za,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",customMenuRef:"customMenuRef",editor:"editor"},features:[m.Bb([oc])],decls:3,vars:5,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"class","group","items",4,"ngFor","ngForOf"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(e,t){1&e&&(m.Ub(0,"div",0),m.Jc(1,wa,2,1,"ng-container",1),m.Jc(2,ka,2,1,"ng-container",2),m.Tb()),2&e&&(m.lc("ngClass",m.pc(3,xa,t.disabled)),m.Cb(1),m.lc("ngForOf",t.toolbar),m.Cb(1),m.lc("ngIf",t.customMenuRef))},directives:function(){return[g.n,g.o,g.p,Uc,Dc,Ec,Ic,_c,g.u]},pipes:function(){return[g.j]},styles:[""]}),za),cc={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n'},lc=function(){function e(){i(this,e)}return a(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000";return'\n      <svg\n        xmlns="http://www.w3.org/2000/svg"\n        viewBox="0 0 24 24"\n        fill='.concat(t,"\n        height=20\n        width=20\n      >\n        ").concat(cc[e]||"<path></path>","\n      </svg>\n    ")}},{key:"getPath",value:function(e){return cc[e]||"<path></path>"}}]),e}(),uc=((Fa=function(){function e(t){i(this,e),this.sanitizer=t}return a(e,[{key:"transform",value:function(e){return this.sanitizer.bypassSecurityTrustHtml(e)}}]),e}()).\u0275fac=function(e){return new(e||Fa)(m.Ob(qi.b))},Fa.\u0275pipe=m.Nb({name:"sanitizeHtml",type:Fa,pure:!0}),Fa),hc={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"},dc=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.locals=hc,this.get=function(e){var n;return null!==(n=t.locals[e])&&void 0!==n?n:""},this.locals=Object.assign({},hc,n)},pc=((Ga=function e(){i(this,e),this.locals={}}).\u0275fac=function(e){return new(e||Ga)},Ga.\u0275prov=Object(m.Kb)({factory:function(){return new Ga},token:Ga,providedIn:"root"}),Ga),fc=((Va=function(){function e(t){i(this,e),this.config=t}return a(e,[{key:"locals",get:function(){return new dc(this.config.locals)}}]),e}()).\u0275fac=function(e){return new(e||Va)(m.Yb(pc,8))},Va.\u0275prov=Object(m.Kb)({factory:function(){return new Va(Object(m.Yb)(pc,8))},token:Va,providedIn:"root"}),Va),bc=function(e){var t;return{locals:null!==(t=e.locals)&&void 0!==t?t:{}}},mc=function(){function e(t){i(this,e),this.name=t}return a(e,[{key:"apply",value:function(){var e=this;return function(t,n){var r=t.schema.marks[e.name];return!!r&&Cs(r)(t,n)}}},{key:"toggle",value:function(){var e=this;return function(t,n){var r=t.schema.marks[e.name];return!!r&&cs(r)(t,n)}}},{key:"isActive",value:function(e){var t=e.schema.marks[this.name];return!!t&&ms(e,t)}},{key:"canExecute",value:function(e){return this.toggle()(e)}}]),e}(),gc=function(){function e(){i(this,e)}return a(e,[{key:"toggle",value:function(){var e=this;return function(t,n){var r,o=t.schema.nodes.blockquote;return!!o&&(e.isActive(t)?function(e,t){var n=e.selection,r=n.$from.blockRange(n.$to),o=r&&mn(r);return null!=o&&(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)}(t,n):(r=o,function(e,t){var n=e.selection,o=n.$from.blockRange(n.$to),i=o&&gn(o,r,void 0);return!!i&&(t&&t(e.tr.wrap(o,i).scrollIntoView()),!0)})(t,n))}}},{key:"isActive",value:function(e){var t=e.schema.nodes.blockquote;return!!t&&gs(e,t)}},{key:"canExecute",value:function(e){return this.toggle()(e)}}]),e}(),vc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(this,e),this.isBulletList=!1,this.isBulletList=t}return a(e,[{key:"getType",value:function(e){return this.isBulletList?e.nodes.bullet_list:e.nodes.ordered_list}},{key:"toggle",value:function(){var e=this;return function(t,n){var r,o=t.schema,i=e.getType(o);return!!i&&(e.isActive(t)?$i(o.nodes.list_item)(t,n):(r=i,function(e,t){var n=e.selection,o=n.$from,i=n.$to,s=o.blockRange(i),a=!1,c=s;if(!s)return!1;if(s.depth>=2&&o.node(s.depth-1).type.compatibleContent(r)&&0==s.startIndex){if(0==o.index(s.depth-1))return!1;var l=e.doc.resolve(s.start-2);c=new ht(l,l,s.depth),s.endIndex<s.parent.childCount&&(s=new ht(o,e.doc.resolve(i.end(s.depth)),s.depth)),a=!0}var u=gn(c,r,void 0,s);return!!u&&(t&&t(function(e,t,n,r,o){for(var i=He.empty,s=n.length-1;s>=0;s--)i=He.from(n[s].type.create(n[s].attrs,i));e.step(new pn(t.start-(r?2:0),t.end,t.start,t.end,new Qe(i,0,0),n.length,!0));for(var a=0,c=0;c<n.length;c++)n[c].type==o&&(a=c+1);for(var l=n.length-a,u=t.start+n.length-(r?2:0),h=t.parent,d=t.startIndex,p=t.endIndex,f=!0;d<p;d++,f=!1)!f&&yn(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=h.child(d).nodeSize;return e}(e.tr,s,u,a,r).scrollIntoView()),!0)})(t,n))}}},{key:"isActive",value:function(e){var t=e.schema,n=this.getType(t);return!!n&&gs(e,n)}},{key:"canExecute",value:function(e){return this.toggle()(e)}}]),e}(),yc=function(){function e(t){i(this,e),this.level=t}return a(e,[{key:"apply",value:function(){return function(e,t){var n=e.schema.nodes.heading;return!!n&&as(n)(e,t)}}},{key:"toggle",value:function(){var e=this;return function(t,n){var r,o=t.schema,i=t.selection,s=t.doc,a=o.nodes.heading;if(!a)return!1;var c=i.$from.before(1),l=s.nodeAt(c),u=null!==(r=null==l?void 0:l.attrs)&&void 0!==r?r:{};return e.isActive(t)?as(o.nodes.paragraph,u)(t,n):as(a,Object.assign(Object.assign({},u),{level:e.level}))(t,n)}}},{key:"isActive",value:function(e){var t=this,n=e.schema,r=vs(e),o=n.nodes.heading;if(!o)return!1;var i=[o,n.nodes.text,n.nodes.blockquote],s=r.filter((function(e){return i.includes(e.type)})).find((function(e){return e.attrs.level===t.level}));return Boolean(s)}},{key:"canExecute",value:function(e){return this.toggle()(e)}}]),e}(),Cc=function(){function e(t){i(this,e),this.align=t}return a(e,[{key:"toggle",value:function(){var e=this;return function(t,n){var r=t.doc,o=t.selection,i=t.tr,s=t.schema,a=o.from,c=o.to,l=!1;return r.nodesBetween(a,c,(function(t,n){var r=t.type;return[s.nodes.paragraph,s.nodes.heading].includes(r)&&(l=!0,i.setNodeMarkup(n,r,Object.assign(Object.assign({},t.attrs),{align:e.align}))),!0})),!!l&&(i.docChanged&&(null==n||n(i)),!0)}}},{key:"isActive",value:function(e){var t=this,n=vs(e).find((function(e){return e.attrs.align===t.align}));return Boolean(n)}},{key:"canExecute",value:function(e){return this.toggle()(e)}}]),e}(),wc={strict:!0},kc=function(){function e(){i(this,e)}return a(e,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=t.schema,o=t.selection,i=r.marks.link;return!!i&&!o.empty&&cs(i,e)(t,n)}}},{key:"insert",value:function(e,t){return function(n,r){var o,i,s=n.schema,a=n.tr;if(!s.marks.link)return!1;var c={href:t.href,title:null!==(o=t.title)&&void 0!==o?o:e,target:null!==(i=t.target)&&void 0!==i?i:"_blank"},l=s.text(e,[s.marks.link.create(c)]);return a.replaceSelectionWith(l,!1).scrollIntoView(),!!a.docChanged&&(null==r||r(a),!0)}}},{key:"isActive",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wc;if(t.strict)return!0;var n=e.schema;return ms(e,n.marks.link)}},{key:"remove",value:function(e,t){return function(e,t){var n=e.doc,r=e.selection,o=e.tr,i=r.$head.pos,s=r.from,a=r.to;if(s===a){var c=n.resolve(i),l=i-c.textOffset,u=l+c.parent.child(c.index()).nodeSize;o.removeMark(l,u)}else o.removeMark(s,a);return!!o.docChanged&&(null==t||t(o),!0)}(e,t)}},{key:"canExecute",value:function(e){return this.update({})(e)}}]),e}(),xc=function(){function e(){i(this,e)}return a(e,[{key:"insert",value:function(e,t){return function(n,r){var o=n.schema,i=n.tr,s=n.selection,a=o.nodes.image;if(!a)return!1;var c=Object.assign({width:null,src:e},t);!c.width&&s instanceof zn&&s.node.type===a&&(c.width=s.node.attrs.width),i.replaceSelectionWith(a.createAndFill(c));var l=i.doc.resolve(i.selection.anchor-i.selection.$anchor.nodeBefore.nodeSize);return i.setSelection(new zn(l)).scrollIntoView(),!!i.docChanged&&(null==r||r(i),!0)}}},{key:"isActive",value:function(e){var t=e.selection;return t instanceof zn&&"image"===t.node.type.name}}]),e}(),Mc=function(){function n(e){i(this,n),this.name=e}return a(n,[{key:"apply",value:function(e){var t=this;return function(n,r){var o=n.schema,i=n.selection,s=n.doc,a=o.marks[t.name];if(!a)return!1;var c=i.from,l=i.to;if(!i.empty&&c+1===l){var u=s.nodeAt(c);if((null==u?void 0:u.isAtom)&&!u.isText&&u.isLeaf)return!1}return Cs(a,e)(n,r)}}},{key:"isActive",value:function(e){var t=e.schema.marks[this.name];return!!t&&ms(e,t)}},{key:"getActiveColors",value:function(t){var n=this;if(!this.isActive(t))return[];var r=t.schema;return function(t){var n=[],r=t.selection,o=r.from,i=r.to,s=r.empty,a=r.$from,c=t.storedMarks;return s?n=c||a.marks():t.doc.nodesBetween(o,i,(function(t){n=[].concat(e(n),e(t.marks))})),n}(t).filter((function(e){return e.type===r.marks[n.name]})).map((function(e){return e.attrs.color})).filter(Boolean)}},{key:"remove",value:function(){var e=this;return function(n,r){var o=n.schema.marks[e.name];return!!o&&function(e){return function(n,r){var o=n.tr,i=n.selection,s=n.storedMarks,a=n.doc,c=i.empty,l=i.ranges;if(c&&i instanceof Rn){var u=i.$cursor;if(!u||!ys(n.doc,l,e))return!1;if(e.isInSet(s||u.marks()))return o.removeStoredMark(e),null==r||r(o),!0}else{var h,d=t(l);try{for(d.s();!(h=d.n()).done;){var p=h.value,f=p.$from,b=p.$to;a.rangeHasMark(f.pos,b.pos,e)&&o.removeMark(f.pos,b.pos,e)}}catch(m){d.e(m)}finally{d.f()}if(!o.docChanged)return!1;null==r||r(o.scrollIntoView())}return!1}}(o)(n,r)}}},{key:"canExecute",value:function(e){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(e)}}]),n}(),Tc={bold:new mc("strong"),italic:new mc("em"),code:new mc("code"),underline:new mc("u"),strike:new mc("s"),blockquote:new gc,bullet_list:new vc(!0),ordered_list:new vc(!1),h1:new yc(1),h2:new yc(2),h3:new yc(3),h4:new yc(4),h5:new yc(5),h6:new yc(6),align_left:new Cc("left"),align_center:new Cc("center"),align_right:new Cc("right"),align_justify:new Cc("justify")},Oc=new kc,Sc=new xc,Nc=new Mc("text_color"),Pc=new Mc("text_background_color"),Uc=((Ka=function(){function e(t,n){var r=this;i(this,e),this.ngxeService=t,this.menuService=n,this.isActive=!1,this.disabled=!1,this.update=function(e){var t=e.state,n=Tc[r.name];r.isActive=n.isActive(t),r.disabled=!n.canExecute(t)}}return a(e,[{key:"toggle",value:function(e){if(e.preventDefault(),0===e.button){var t=this.editorView,n=t.state,r=t.dispatch;Tc[this.name].toggle()(n,r)}}},{key:"getTitle",value:function(e){return this.ngxeService.locals.get(e)}},{key:"ngOnInit",value:function(){var e=this;this.html=lc.get(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe((function(t){e.update(t)}))}},{key:"ngOnDestroy",value:function(){this.updateSubscription.unsubscribe()}},{key:"name",get:function(){return this.toolbarItem}}]),e}()).\u0275fac=function(e){return new(e||Ka)(m.Ob(fc),m.Ob(oc))},Ka.\u0275cmp=m.Ib({type:Ka,selectors:[["ngx-toggle-command"]],hostVars:4,hostBindings:function(e,t){2&e&&m.Gb("NgxEditor__MenuItem--Active",t.isActive)("NgxEditor--Disabled",t.disabled)},inputs:{toolbarItem:"toolbarItem"},decls:2,vars:4,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(e,t){1&e&&(m.Ub(0,"div",0),m.bc("mousedown",(function(e){return t.toggle(e)})),m.gc(1,"sanitizeHtml"),m.Tb()),2&e&&m.lc("innerHTML",m.hc(1,2,t.html),m.zc)("title",t.getTitle(t.name))},pipes:[uc],styles:[""]}),Ka),Dc=((qa=function(){function e(t,n,r){var o=this;i(this,e),this.el=t,this.ngxeService=n,this.menuService=r,this.showPopup=!1,this.isActive=!1,this.canExecute=!0,this.form=new c.h({href:new c.e("",[c.A.required,c.A.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]),text:new c.e("",[c.A.required]),openInNewTab:new c.e(!0)}),this.setText=function(){var e=o.editorView.state,t=e.selection,n=e.doc,r=t.empty,i=t.from,s=t.to,a=r?"":n.textBetween(i,s);a&&(o.text.patchValue(a),o.text.disable())},this.update=function(e){var t=e.state;o.isActive=Oc.isActive(t,{strict:!1}),o.canExecute=Oc.canExecute(t)}}return a(e,[{key:"onDocumentClick",value:function(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hideForm()}},{key:"getLabel",value:function(e){return this.ngxeService.locals.get(e)}},{key:"hideForm",value:function(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}},{key:"onMouseDown",value:function(e){if(e.preventDefault(),0===e.button){var t=this.editorView,n=t.state,r=t.dispatch;this.isActive?Oc.remove(n,r):(this.showPopup=!this.showPopup,this.showPopup&&this.setText())}}},{key:"insertLink",value:function(e){e.preventDefault();var t=this.form.getRawValue(),n=t.text,r=t.href,o=t.openInNewTab,i=this.editorView,s=i.dispatch,a=i.state,c={title:r,href:r,target:o?"_blank":"_self"};a.selection.empty?(Oc.insert(n,c)(a,s),this.editorView.focus()):Oc.update(c)(a,s),this.hideForm()}},{key:"ngOnInit",value:function(){var e=this;this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe((function(t){e.update(t)}))}},{key:"ngOnDestroy",value:function(){this.updateSubscription.unsubscribe()}},{key:"valid",get:function(){return this.isActive||this.showPopup}},{key:"disabled",get:function(){return!this.canExecute}},{key:"icon",get:function(){return lc.get(this.isActive?"unlink":"link")}},{key:"href",get:function(){return this.form.get("href")}},{key:"text",get:function(){return this.form.get("text")}}]),e}()).\u0275fac=function(e){return new(e||qa)(m.Ob(m.l),m.Ob(fc),m.Ob(oc))},qa.\u0275cmp=m.Ib({type:qa,selectors:[["ngx-link"]],hostVars:4,hostBindings:function(e,t){1&e&&m.bc("mousedown",(function(e){return t.onDocumentClick(e)}),!1,m.wc),2&e&&m.Gb("NgxEditor__MenuItem--Active",t.valid)("NgxEditor--Disabled",t.disabled)},decls:3,vars:4,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","href","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off"],["type","checkbox","formControlName","openInNewTab"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(e,t){1&e&&(m.Ub(0,"div",0),m.bc("mousedown",(function(e){return t.onMouseDown(e)})),m.gc(1,"sanitizeHtml"),m.Tb(),m.Jc(2,Oa,21,8,"div",1)),2&e&&(m.lc("innerHTML",m.hc(1,2,t.icon),m.zc),m.Cb(2),m.lc("ngIf",t.showPopup))},directives:[g.p,c.C,c.q,c.i,c.b,c.p,c.g,c.a],pipes:[uc],styles:[""]}),qa),Ic=((Wa=function(){function e(t,n,r){var o=this;i(this,e),this.ngxeService=t,this.menuService=n,this.el=r,this.isDropdownOpen=!1,this.activeItems=[],this.disabledItems=[],this.update=function(e){var t=e.state;o.activeItems=[],o.disabledItems=[],o.items.forEach((function(e){var n=Tc[e];n.isActive(t)&&o.activeItems.push(e),n.canExecute(t)||o.disabledItems.push(e)})),o.activeItem=1===o.activeItems.length?o.activeItems[0]:null}}return a(e,[{key:"onDocumentClick",value:function(e){!this.el.nativeElement.contains(e)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}},{key:"getName",value:function(e){return this.ngxeService.locals.get(e)}},{key:"toggleDropdown",value:function(e){e.preventDefault(),this.isDropdownOpen=!this.isDropdownOpen}},{key:"onClick",value:function(e,t){if(e.preventDefault(),0===e.button){var n=Tc[t],r=this.editorView,o=r.state,i=r.dispatch;n.toggle()(o,i),this.isDropdownOpen=!1}}},{key:"ngOnInit",value:function(){var e=this;this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe((function(t){e.update(t)}))}},{key:"ngOnDestroy",value:function(){this.updateSubscription.unsubscribe()}},{key:"isSelected",get:function(){return Boolean(this.activeItem||this.isDropdownOpen)}},{key:"isDropdownDisabled",get:function(){return this.disabledItems.length===this.items.length}}]),e}()).\u0275fac=function(e){return new(e||Wa)(m.Ob(fc),m.Ob(oc),m.Ob(m.l))},Wa.\u0275cmp=m.Ib({type:Wa,selectors:[["ngx-dropdown"]],hostVars:4,hostBindings:function(e,t){1&e&&m.bc("mousedown",(function(e){return t.onDocumentClick(e.target)}),!1,m.wc),2&e&&m.Gb("NgxEditor__Dropdown--Selected",t.isSelected)("NgxEditor--Disabled",t.isDropdownDisabled)},inputs:{group:"group",items:"items"},decls:3,vars:2,consts:[[1,"NgxEditor__Dropdown--Text",3,"mousedown"],["class","NgxEditor__Dropdown--DropdownMenu",4,"ngIf"],[1,"NgxEditor__Dropdown--DropdownMenu"],["class","NgxEditor__Dropdown--Item",3,"ngClass","mousedown",4,"ngFor","ngForOf"],[1,"NgxEditor__Dropdown--Item",3,"ngClass","mousedown"]],template:function(e,t){1&e&&(m.Ub(0,"div",0),m.bc("mousedown",(function(e){return t.toggleDropdown(e)})),m.Lc(1),m.Tb(),m.Jc(2,Pa,2,1,"div",1)),2&e&&(m.Cb(1),m.Nc(" ",t.getName(t.activeItem||t.group),"\n"),m.Cb(1),m.lc("ngIf",t.isDropdownOpen))},directives:[g.p,g.o,g.n],styles:[""]}),Wa),Ec=((Ja=function(){function e(t,n,r){var o=this;i(this,e),this.el=t,this.ngxeService=n,this.menuService=r,this.showPopup=!1,this.isActive=!1,this.form=new c.h({src:new c.e("",[c.A.required,c.A.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]),alt:new c.e(""),title:new c.e("")}),this.update=function(e){var t=e.state;o.isActive=Sc.isActive(t)}}return a(e,[{key:"onDocumentClick",value:function(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hideForm()}},{key:"getLabel",value:function(e){return this.ngxeService.locals.get(e)}},{key:"hideForm",value:function(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}},{key:"onMouseDown",value:function(e){e.preventDefault(),0===e.button&&(this.showPopup=!this.showPopup,this.showPopup&&this.fillForm())}},{key:"fillForm",value:function(){var e=this.editorView.state.selection;if(e instanceof zn&&this.isActive){var t=e.node.attrs,n=t.src,r=t.alt,o=void 0===r?"":r,i=t.title,s=void 0===i?"":i;this.form.setValue({src:n,alt:o,title:s})}}},{key:"insertLink",value:function(e){e.preventDefault();var t=this.form.getRawValue(),n=t.src,r=t.alt,o=t.title,i=this.editorView,s=i.dispatch,a=i.state;Sc.insert(n,{alt:r,title:o})(a,s),this.editorView.focus(),this.hideForm()}},{key:"ngOnInit",value:function(){var e=this;this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe((function(t){e.update(t)}))}},{key:"ngOnDestroy",value:function(){this.updateSubscription.unsubscribe()}},{key:"valid",get:function(){return this.isActive||this.showPopup}},{key:"icon",get:function(){return lc.get("image")}},{key:"src",get:function(){return this.form.get("src")}}]),e}()).\u0275fac=function(e){return new(e||Ja)(m.Ob(m.l),m.Ob(fc),m.Ob(oc))},Ja.\u0275cmp=m.Ib({type:Ja,selectors:[["ngx-image"]],hostVars:2,hostBindings:function(e,t){1&e&&m.bc("mousedown",(function(e){return t.onDocumentClick(e)}),!1,m.wc),2&e&&m.Gb("NgxEditor__MenuItem--Active",t.valid)},decls:3,vars:4,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","src","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off"],["type","text","formControlName","title","autocomplete","off"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(e,t){1&e&&(m.Ub(0,"div",0),m.bc("mousedown",(function(e){return t.onMouseDown(e)})),m.gc(1,"sanitizeHtml"),m.Tb(),m.Jc(2,Da,20,7,"div",1)),2&e&&(m.lc("innerHTML",m.hc(1,2,t.icon),m.zc),m.Cb(2),m.lc("ngIf",t.showPopup))},directives:[g.p,c.C,c.q,c.i,c.b,c.p,c.g],pipes:[uc],styles:[""]}),Ja),_c=((Ha=function(){function e(t,n,r){var o=this;i(this,e),this.el=t,this.menuService=n,this.ngxeService=r,this.showPopup=!1,this.isActive=!1,this.activeColors=[],this.canExecute=!0,this.update=function(e){var t=e.state;o.canExecute=o.command.canExecute(t),o.isActive=o.command.isActive(t),o.activeColors=[],o.isActive&&(o.activeColors=o.command.getActiveColors(t))}}return a(e,[{key:"getContrastYIQ",value:function(e){return e=e.replace("#",""),(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"black":"white"}},{key:"onDocumentClick",value:function(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}},{key:"hidePopup",value:function(){this.showPopup=!1}},{key:"togglePopup",value:function(e){e.preventDefault(),0===e.button&&(this.showPopup=!this.showPopup)}},{key:"remove",value:function(e){e.preventDefault();var t=this.editorView,n=t.state,r=t.dispatch;this.command.remove()(n,r),this.hidePopup()}},{key:"onColorSelect",value:function(e,t){if(e.preventDefault(),0===e.button){var n=this.editorView,r=n.state,o=n.dispatch;"text_color"===this.type?this.command.apply({color:t})(r,o):this.command.apply({backgroundColor:t})(r,o),this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}}},{key:"getLabel",value:function(e){return this.ngxeService.locals.get(e)}},{key:"ngOnInit",value:function(){var e=this;this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe((function(t){e.update(t)}))}},{key:"ngOnDestroy",value:function(){this.updateSubscription.unsubscribe()}},{key:"valid",get:function(){return this.isActive||this.showPopup}},{key:"disabled",get:function(){return!this.canExecute}},{key:"title",get:function(){return this.getLabel("text_color"===this.type?"text_color":"background_color")}},{key:"icon",get:function(){return lc.get("text_color"===this.type?"text_color":"color_fill")}},{key:"command",get:function(){return"text_color"===this.type?Nc:Pc}}]),e}()).\u0275fac=function(e){return new(e||Ha)(m.Ob(m.l),m.Ob(oc),m.Ob(fc))},Ha.\u0275cmp=m.Ib({type:Ha,selectors:[["ngx-color-picker"]],hostVars:4,hostBindings:function(e,t){1&e&&m.bc("mousedown",(function(e){return t.onDocumentClick(e)}),!1,m.wc),2&e&&m.Gb("NgxEditor__MenuItem--Active",t.valid)("NgxEditor--Disabled",t.disabled)},inputs:{presets:"presets",type:"type"},decls:3,vars:5,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf"],[1,"NgxEditor__MenuItem--Button",3,"disabled","mousedown"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown",4,"ngFor","ngForOf"],[1,"NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown"]],template:function(e,t){1&e&&(m.Ub(0,"div",0),m.bc("mousedown",(function(e){return t.togglePopup(e)})),m.gc(1,"sanitizeHtml"),m.Tb(),m.Jc(2,ja,4,3,"div",1)),2&e&&(m.lc("innerHTML",m.hc(1,3,t.icon),m.zc)("title",t.title),m.Cb(2),m.lc("ngIf",t.showPopup))},directives:[g.p,g.o,g.q,g.n],pipes:[uc],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\u2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']}),Ha),Ac=(($a=function e(){i(this,e)}).\u0275mod=m.Mb({type:$a}),$a.\u0275inj=m.Lb({factory:function(e){return new(e||$a)},providers:[uc],imports:[[g.c,c.x]]}),$a),jc=new m.r("NgxEditorConfig"),Lc=((Xa=function(){function e(){i(this,e)}return a(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[{provide:jc,useValue:t},{provide:pc,useFactory:bc,deps:[jc]}]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[{provide:jc,useValue:t},{provide:pc,useFactory:bc,deps:[jc]},fc]}}}]),e}()).\u0275mod=m.Mb({type:Xa}),Xa.\u0275inj=m.Lb({factory:function(e){return new(e||Xa)},providers:[],imports:[[g.c,Ac]]}),Xa),Rc=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var o=new mc(e);return t?o.toggle()(n,r):o.apply()(n,r)}},Bc=function(){function e(t){var n=this;if(i(this,e),this.applyTrx=function(e){n.state=n.state.apply(null!=e?e:n.tr),n.tr=n.state.tr,n.tr.setMeta("APPLIED_TRX",!0)},this.dispatch=function(e){n.applyTrx(e)},!t)throw Error("NgxEditor: Required view to initialize commands.");this.view=t,this.state=t.state,this.tr=this.view.state.tr}return a(e,[{key:"exec",value:function(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;var e=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);var t=this.tr.setMeta("FORCE_EMIT",e);return this.view.dispatch(t),!0}},{key:"focus",value:function(){return this.view.focus(),this}},{key:"scrollIntoView",value:function(){return this.tr.scrollIntoView(),this.applyTrx(),this}},{key:"insertText",value:function(e){return this.tr.insertText(e),this.applyTrx(),this}},{key:"insertNewLine",value:function(){return ls(es,ns,rs,is)(this.state,this.dispatch),this}},{key:"applyMark",value:function(e){return Rc(e,!1)(this.state,this.dispatch),this}},{key:"toggleMark",value:function(e){return Rc(e,!0)(this.state,this.dispatch),this}},{key:"bold",value:function(){return Rc("strong")(this.state,this.dispatch),this}},{key:"toggleBold",value:function(){return Rc("strong",!0)(this.state,this.dispatch),this}},{key:"italics",value:function(){return Rc("em")(this.state,this.dispatch),this}},{key:"toggleItalics",value:function(){return Rc("em",!0)(this.state,this.dispatch),this}},{key:"underline",value:function(){return Rc("u")(this.state,this.dispatch),this}},{key:"toggleUnderline",value:function(){return Rc("u",!0)(this.state,this.dispatch),this}},{key:"strike",value:function(){return Rc("s")(this.state,this.dispatch),this}},{key:"toggleStrike",value:function(){return Rc("s",!0)(this.state,this.dispatch),this}},{key:"code",value:function(){return Rc("code")(this.state,this.dispatch),this}},{key:"toggleCode",value:function(){return Rc("code",!0)(this.state,this.dispatch),this}},{key:"toggleOrderedList",value:function(){return new vc(!1).toggle()(this.state,this.dispatch),this}},{key:"toggleBulletList",value:function(){return new vc(!0).toggle()(this.state,this.dispatch),this}},{key:"toggleHeading",value:function(e){return new yc(e).toggle()(this.state,this.dispatch),this}},{key:"insertLink",value:function(e,t){return(new kc).insert(e,t)(this.state,this.dispatch),this}},{key:"updateLink",value:function(e){return(new kc).update(e)(this.state,this.dispatch),this}},{key:"insertImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new xc).insert(e,t)(this.state,this.dispatch),this}},{key:"textColor",value:function(e){return new Mc("text_color").apply({color:e})(this.state,this.dispatch),this}},{key:"backgroundColor",value:function(e){return new Mc("text_background_color").apply({backgroundColor:e})(this.state,this.dispatch),this}},{key:"removeTextColor",value:function(){return new Mc("text_color").remove()(this.state,this.dispatch),this}},{key:"removeBackgroundColor",value:function(){return new Mc("text_background_color").remove()(this.state,this.dispatch),this}},{key:"align",value:function(e){return new Cc(e).toggle()(this.state,this.dispatch),this}},{key:"insertHTML",value:function(e){var t=this.state,n=t.selection,r=t.schema,o=t.tr,i=n.from,s=n.to,a=document.createElement("div");a.innerHTML=e.trim();var c=Bt.fromSchema(r).parseSlice(a),l=o.replaceRange(i,s,c);return this.applyTrx(l),this}}]),e}(),zc=/Mac/.test(navigator.platform),Fc={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:Wi,plugins:[],nodeViews:{}},Vc=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc;i(this,t),this.valueChangesSubject=new Ki.a,this.updateSubject=new Ki.a,this.options=Object.assign({},Fc,e),this.createEditor()}return a(t,[{key:"setContent",value:function(e){if(null!=e){var t=this.view.state,n=t.tr,r=t.doc,o=nc(e,this.schema);n.replaceWith(0,t.doc.content.size,o),r.eq(n.doc)||n.docChanged&&this.view.dispatch(n)}}},{key:"handleTransactions",value:function(e){var t=this.view.state.apply(e);if(this.view.updateState(t),this.updateSubject.next(this.view),e.docChanged||e.getMeta("FORCE_EMIT")){var n=t.doc.toJSON();this.valueChangesSubject.next(n)}}},{key:"createEditor",value:function(){var t,n=this.options,r=n.content,o=void 0===r?null:r,i=n.nodeViews,s=n.history,a=void 0===s||s,c=n.keyboardShortcuts,l=void 0===c||c,u=n.inputRules,h=void 0===u||u,d=this.schema,p=nc(o,d),f=null!==(t=n.plugins)&&void 0!==t?t:[],b=function(t,n){var r,o=[];return n.keyboardShortcuts&&o.push.apply(o,e(function(e,t){var n={};n["Mod-z"]=Qs,zc?n["Shift-Mod-z"]=Zs:n["Mod-y"]=Zs;var r,o=[_s({"Mod-b":cs(e.marks.strong),"Mod-i":cs(e.marks.em),"Mod-`":cs(e.marks.code)}),_s({Enter:(r=e.nodes.list_item,function(e,t){var n=e.selection,o=n.$from,i=n.$to,s=n.node;if(s&&s.isBlock||o.depth<2||!o.sameParent(i))return!1;var a=o.node(-1);if(a.type!=r)return!1;if(0==o.parent.content.size&&o.node(-1).childCount==o.indexAfter(-1)){if(2==o.depth||o.node(-3).type!=r||o.index(-2)!=o.node(-2).childCount-1)return!1;if(t){for(var c=He.empty,l=o.index(-1)>0,u=o.depth-(l?1:2);u>=o.depth-3;u--)c=He.from(o.node(u).copy(c));c=c.append(He.from(r.createAndFill()));var h=e.tr.replace(o.before(l?null:-1),o.after(-3),new Qe(c,l?3:2,2));h.setSelection(e.selection.constructor.near(h.doc.resolve(o.pos+(l?3:2)))),t(h.scrollIntoView())}return!0}var d=i.pos==o.end()?a.contentMatchAt(0).defaultType:null,p=e.tr.delete(o.pos,i.pos),f=d&&[null,{type:d}];return!!yn(p.doc,o.pos,2,f)&&(t&&t(p.split(o.pos,2,f).scrollIntoView()),!0)}),"Mod-[":$i(e.nodes.list_item),"Mod-]":Hi(e.nodes.list_item),Tab:Hi(e.nodes.list_item)}),_s(bs)];return t.history&&o.push(_s(n)),o}(t,{history:n.history}))),n.history&&o.push(new er({key:Xs,state:{init:function(){return new Vs(zs.empty,zs.empty,null,0)},apply:function(e,t,n){return function(e,t,n,r){var o,i=n.getMeta(Xs);if(i)return i.historyState;n.getMeta(Ys)&&(e=new Vs(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(Xs))return s.getMeta(Xs).redo?new Vs(e.done.addTransform(n,null,r,Ks(t)),e.undone,$s(n.mapping.maps[n.steps.length-1]),e.prevTime):new Vs(e.done,e.undone.addTransform(n,null,r,Ks(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new Vs(e.done.rebased(n,o),e.undone.rebased(n,o),Hs(e.prevRanges,n.mapping),e.prevTime):new Vs(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Hs(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),c=s?Hs(e.prevRanges,n.mapping):$s(n.mapping.maps[n.steps.length-1]);return new Vs(e.done.addTransform(n,a?t.selection.getBookmark():null,r,Ks(t)),zs.empty,c,n.time)}(t,n,e,r)}},config:r={depth:r&&r.depth||100,newGroupDelay:r&&r.newGroupDelay||500}})),n.inputRules&&o.push(function(e){var t=oa.concat(ra,na);return t.push(ia(/^\s*>\s$/,e.nodes.blockquote)),t.push(ia(/^(\d+)\.\s$/,e.nodes.ordered_list,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order===+e[1]}))),t.push(function(e){return ia(/^\s*([-+*])\s$/,e)}(e.nodes.bullet_list)),t.push(function(e){return sa(/^```$/,e)}(e.nodes.code_block)),t.push(function(e,t){return sa(new RegExp("^(#{1,6})\\s$"),e,(function(e){return{level:e[1].length}}))}(e.nodes.heading)),function(e){var t=e.rules,n=new er({state:{init:function(){return null},apply:function(e,t){return e.getMeta(this)||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,r,o,i){return ta(e,r,o,i,t,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var r=e.state.selection.$cursor;r&&ta(e,r.pos,r.pos,"",t,n)}))}}},isInputRules:!0});return n}({rules:t})}(t)),o}(d,{history:a,keyboardShortcuts:l,inputRules:h});this.view=new Ei(null,{state:Yn.create({doc:p,schema:d,plugins:[].concat(e(b),e(f))}),nodeViews:i,dispatchTransaction:this.handleTransactions.bind(this)})}},{key:"registerPlugin",value:function(t){var n=this.view.state,r=[].concat(e(n.plugins),[t]),o=n.reconfigure({plugins:r});this.view.updateState(o)}},{key:"destroy",value:function(){this.view.destroy()}},{key:"valueChanges",get:function(){return this.valueChangesSubject.asObservable()}},{key:"update",get:function(){return this.updateSubject.asObservable()}},{key:"schema",get:function(){return this.options.schema||Wi}},{key:"commands",get:function(){return new Bc(this.view)}}]),t}();function Gc(e,t){1&e&&(m.Ub(0,"p",24),m.Lc(1,"Please Select Category"),m.Tb())}function $c(e,t){1&e&&(m.Ub(0,"p",24),m.Lc(1,"Please Select Type"),m.Tb())}function Hc(e,t){1&e&&(m.Ub(0,"p",24),m.Lc(1,"Please enter Template Name"),m.Tb())}function Jc(e,t){1&e&&(m.Ub(0,"p",24),m.Lc(1,"Please define template"),m.Tb())}var Wc,qc=((Wc=function(){function e(t,n,r){i(this,e),this.dataservice=t,this.PopupService=n,this.Utilities=r,this.objtem=new Kc,this.html="",this.check=!1,this.Type=!1,this.Name=!1,this.body=!1,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]]}return a(e,[{key:"ClickSave",value:function(){this.Clear(),this.objtem.TemplateBody=this.html,this.CheckValidation()||this.SaveData()}},{key:"Clear",value:function(){this.Name=!1,this.Type=!1,this.body=!1,this.check=!1}},{key:"CheckValidation",value:function(){return"0"==this.objtem.TemplateCategory&&(this.Type=!0,this.check=!0),"0"==this.objtem.TemplateType&&(this.Type=!0,this.check=!0),null!=this.objtem.TemplateName&&""!=this.objtem.TemplateName&&null!=this.objtem.TemplateName||(this.Name=!0,this.check=!0),null!=this.objtem.TemplateBody&&""!=this.objtem.TemplateBody&&null!=this.objtem.TemplateBody||(this.body=!0,this.check=!0),this.check}},{key:"SaveData",value:function(){var e=this;if("2"==this.objtem.TemplateCategory){var t=this.objtem.TemplateBody,n=(new DOMParser).parseFromString(t,"text/html");this.objtem.TemplateBody=n.body.innerText}this.objtem.CreatedBy=this.Utilities.getUserId(),this.objtem.ModifyBy=this.Utilities.getUserId(),this.objtem.ModifyOn=this.Utilities.GetCurrentDateTime(),this.objtem.CreatedOn=this.Utilities.GetCurrentDateTime(),this.objtem.CompanyId=this.Utilities.getSubscriptionID(),this.dataservice.post("Users/SaveTemplate",this.objtem).subscribe((function(t){"Insert"==t?(e.PopupService.ShowPopup("Insert"),e.Clear(),e.objtem.TemplateBody="",e.html="",e.objtem.TemplateCategory="0",e.objtem.TemplateType="0",e.objtem.TemplateName=""):"Update"==t&&(e.PopupService.ShowPopup("Update"),e.Clear(),e.html="",e.objtem.TemplateCategory="0",e.objtem.TemplateType="0",e.objtem.TemplateName="")}),(function(e){return alert("error")}))}},{key:"convertText",value:function(e){(new DOMParser).parseFromString(e,"text/html")}},{key:"ChangeType",value:function(){"0"!=this.objtem.TemplateCategory&&"0"!=this.objtem.TemplateType&&this.GetTemplate()}},{key:"GetTemplate",value:function(){var e=this;this.dataservice.get("Users/GetTemplateData/"+this.objtem.TemplateCategory+"/"+this.objtem.TemplateType+"/"+this.objtem.CompanyId).subscribe((function(t){e.objtem.TemplateName=t[0].Template[0].TemplateName,e.html=t[0].Template[0].TemplateBody}),(function(e){return alert("error")}))}},{key:"ngOnInit",value:function(){this.editor=new Vc,this.objtem.TemplateCategory="0",this.objtem.TemplateType="0"}},{key:"ngOnDestroy",value:function(){this.editor.destroy()}}]),e}()).\u0275fac=function(e){return new(e||Wc)(m.Ob(p.a),m.Ob(f.a),m.Ob(b.a))},Wc.\u0275cmp=m.Ib({type:Wc,selectors:[["ngx-emailtemplate"]],decls:57,vars:11,consts:[[1,"row"],[1,"col-md-6","col-sm-12"],[1,"form-group"],["for","type",1,"label"],["fullWidth","","name","type",3,"selected","selectedChange"],["value","0"],["value","1"],["value","2"],["class","error",4,"ngIf"],["value","OTP"],["value","New"],["value","InKitchen"],["value","InRoute"],["value","Rejected"],["value","REJECTED"],["value","Delivered"],["value","Cancel"],["type","text","nbInput","","fullWidth","","placeholder","Template Name",3,"ngModel","ngModelChange"],[1,"form-group","pt-4",2,"text-align","end"],["nbButton","","status","success",2,"width","100px",3,"click"],[1,"col-md-12","col-sm-12"],[1,"editor",2,"height","250px"],[3,"editor","toolbar"],[2,"height","250px !important","background-color","aqua !important",3,"editor","ngModel","ngModelChange"],[1,"error"]],template:function(e,t){1&e&&(m.Ub(0,"nb-card"),m.Ub(1,"nb-card-header"),m.Lc(2," Email/SMS Template "),m.Tb(),m.Ub(3,"nb-card-body"),m.Ub(4,"div",0),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"label",3),m.Lc(8,"Template Category"),m.Tb(),m.Ub(9,"nb-select",4),m.bc("selectedChange",(function(e){return t.objtem.TemplateCategory=e})),m.Ub(10,"nb-option",5),m.Lc(11,"Please Select "),m.Tb(),m.Ub(12,"nb-option",6),m.Lc(13,"Email "),m.Tb(),m.Ub(14,"nb-option",7),m.Lc(15,"SMS"),m.Tb(),m.Tb(),m.Jc(16,Gc,2,0,"p",8),m.Tb(),m.Tb(),m.Ub(17,"div",1),m.Ub(18,"div",2),m.Ub(19,"label",3),m.Lc(20,"Template Type"),m.Tb(),m.Ub(21,"nb-select",4),m.bc("selectedChange",(function(e){return t.objtem.TemplateType=e}))("selectedChange",(function(){return t.ChangeType()})),m.Ub(22,"nb-option",5),m.Lc(23,"Please Select "),m.Tb(),m.Ub(24,"nb-option",9),m.Lc(25,"One Time Password (OTP) "),m.Tb(),m.Ub(26,"nb-option",10),m.Lc(27,"New "),m.Tb(),m.Ub(28,"nb-option",11),m.Lc(29,"InKitchen"),m.Tb(),m.Ub(30,"nb-option",12),m.Lc(31,"InRoute "),m.Tb(),m.Ub(32,"nb-option",13),m.Lc(33,"REJECTED"),m.Tb(),m.Ub(34,"nb-option",14),m.Lc(35,"Email "),m.Tb(),m.Ub(36,"nb-option",15),m.Lc(37,"Delivered"),m.Tb(),m.Ub(38,"nb-option",16),m.Lc(39,"Cancel"),m.Tb(),m.Tb(),m.Jc(40,$c,2,0,"p",8),m.Tb(),m.Tb(),m.Ub(41,"div",1),m.Ub(42,"div",2),m.Ub(43,"label",3),m.Lc(44,"Template Name"),m.Tb(),m.Ub(45,"input",17),m.bc("ngModelChange",(function(e){return t.objtem.TemplateName=e})),m.Tb(),m.Jc(46,Hc,2,0,"p",8),m.Tb(),m.Tb(),m.Ub(47,"div",1),m.Ub(48,"div",18),m.Ub(49,"button",19),m.bc("click",(function(){return t.ClickSave()})),m.Lc(50,"Save"),m.Tb(),m.Tb(),m.Tb(),m.Ub(51,"div",20),m.Ub(52,"div",2),m.Ub(53,"div",21),m.Pb(54,"ngx-editor-menu",22),m.Ub(55,"ngx-editor",23),m.bc("ngModelChange",(function(e){return t.html=e})),m.Tb(),m.Tb(),m.Jc(56,Jc,2,0,"p",8),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(9),m.lc("selected",t.objtem.TemplateCategory),m.Cb(7),m.lc("ngIf",t.Type),m.Cb(5),m.lc("selected",t.objtem.TemplateType),m.Cb(19),m.lc("ngIf",t.Type),m.Cb(5),m.lc("ngModel",t.objtem.TemplateName),m.Cb(1),m.lc("ngIf",t.Name),m.Cb(8),m.lc("editor",t.editor)("toolbar",t.toolbar),m.Cb(1),m.lc("editor",t.editor)("ngModel",t.html),m.Cb(1),m.lc("ngIf",t.body))},directives:[l.o,l.q,l.n,l.bb,l.U,g.p,l.H,c.b,c.p,c.s,l.l,ac,rc],styles:[".container[_ngcontent-%COMP%]{width:100%;max-width:900px;min-width:320px;margin:auto;display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;margin-bottom:.5rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]   .badges[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(:last-child){margin-right:5px}.editor[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.2);border-radius:4px}.editor[_ngcontent-%COMP%]   .NgxEditor__MenuBar[_ngcontent-%COMP%]{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.editor[_ngcontent-%COMP%]   .CodeMirror[_ngcontent-%COMP%]{border:1px solid #eee;height:auto;margin-bottom:.7rem}.editor[_ngcontent-%COMP%]   .CodeMirror[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{white-space:pre!important}.error[_ngcontent-%COMP%]{color:red}  .NgxEditor{border-radius:0!important;border-left:none!important;border-right:none!important;border-bottom:none!important}"]}),Wc),Kc=function e(){i(this,e),this.template=""};function Xc(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please enter resturant name"),m.Tb())}function Yc(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please select outlets"),m.Tb())}function Qc(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please select country"),m.Tb())}function Zc(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please select"),m.Tb())}function el(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please enter mobile"),m.Tb())}function tl(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please enter first name"),m.Tb())}function nl(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please enter last name"),m.Tb())}function rl(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please enter first name"),m.Tb())}function ol(e,t){1&e&&(m.Ub(0,"p",21),m.Lc(1,"please enter password"),m.Tb())}var il,sl,al,cl=((il=function(){function e(t,n){i(this,e),this._dataService=t,this.popup=n,this.objresturant=new ll,this.chkresturant=!1,this.chkoutlets=!1,this.chkcountry=!1,this.chkhearabout=!1,this.chkMobile=!1,this.chkfirsname=!1,this.chklastname=!1,this.chkemail=!1,this.chkpassword=!1}return a(e,[{key:"ngOnInit",value:function(){}},{key:"Checkvalidation",value:function(){var e=!1;return null!=this.objresturant.CompanyName&&null!=this.objresturant.CompanyName&&""!=this.objresturant.CompanyName||(this.chkresturant=!0,e=!0),null!=this.objresturant.outletsCount&&null!=this.objresturant.outletsCount&&""!=this.objresturant.outletsCount||(this.chkoutlets=!0,e=!0),null!=this.objresturant.CountryID&&null!=this.objresturant.CountryID&&""!=this.objresturant.CountryID||(this.chkcountry=!0,e=!0),null!=this.objresturant.Mobile&&null!=this.objresturant.Mobile&&""!=this.objresturant.Mobile||(this.chkMobile=!0,e=!0),null!=this.objresturant.hearbout&&null!=this.objresturant.hearbout&&""!=this.objresturant.hearbout||(this.chkhearabout=!0,e=!0),null!=this.objresturant.firstname&&null!=this.objresturant.firstname&&""!=this.objresturant.firstname||(this.chkfirsname=!0,e=!0),null!=this.objresturant.lastname&&null!=this.objresturant.lastname&&""!=this.objresturant.lastname||(this.chklastname=!0,e=!0),null!=this.objresturant.emailaddress&&null!=this.objresturant.emailaddress&&""!=this.objresturant.emailaddress||(this.chkemail=!0,e=!0),null!=this.objresturant.password&&null!=this.objresturant.password&&""!=this.objresturant.password||(this.chkpassword=!0,e=!0),e}},{key:"Clear",value:function(){this.chkresturant=!1,this.chkoutlets=!1,this.chkcountry=!1,this.chkhearabout=!1,this.chkMobile=!1,this.chkfirsname=!1,this.chklastname=!1,this.chkemail=!1,this.chkpassword=!1,this.objresturant=new ll}},{key:"Cancel",value:function(){this.Clear()}},{key:"SaveClick",value:function(){this.Checkvalidation()||this.SaveData()}},{key:"SaveData",value:function(){var e=this;this._dataService.post("subescription/Savedata",this.objresturant).toPromise().then((function(t){"Insert"==t&&(e.popup.ShowPopup("Insert"),e.Clear())}))}}]),e}()).\u0275fac=function(e){return new(e||il)(m.Ob(p.a),m.Ob(f.a))},il.\u0275cmp=m.Ib({type:il,selectors:[["ngx-subsctptionform"]],decls:105,vars:33,consts:[["href","//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css","rel","stylesheet"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["for","UserCode"],["type","text","nbInput","","fullWidth","","maxlength","10","name","resturant","placeholder","Enter your resturant name",3,"ngModel","ngModelChange"],["class","caption status-danger",4,"ngIf"],["for","UserName"],["name","UserGroup","fullWidth","",3,"ngModel","ngModelChange"],[3,"value"],[1,"col-md-6","col-sm-12"],["for","UserPasswor"],["for","ConfirmPass"],["type","text","nbInput","","fullWidth","","name","UserCode","placeholder","Enter your mobile number",3,"ngModel","ngModelChange"],["type","text","nbInput","","fullWidth","","name","UserCode","placeholder","Enter your first name",3,"ngModel","ngModelChange"],["type","text","nbInput","","fullWidth","","name","UserCode","placeholder","Enter your last name",3,"ngModel","ngModelChange"],["type","text","nbInput","","fullWidth","","name","UserCode","placeholder","Enter your email address",3,"ngModel","ngModelChange"],["type","text","nbInput","","fullWidth","","name","UserCode","placeholder","Enter your password",3,"ngModel","ngModelChange"],[1,"pull-right"],["nbButton","","status","success",2,"width","99px",3,"click"],["nbButton","",3,"click"],[1,"caption","status-danger"]],template:function(e,t){1&e&&(m.Pb(0,"link",0),m.Ub(1,"nb-card"),m.Ub(2,"nb-card-header"),m.Lc(3," Resturant Information "),m.Tb(),m.Ub(4,"nb-card-body"),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"div",3),m.Ub(8,"label",4),m.Lc(9,"What's the name of your resturant? *"),m.Tb(),m.Ub(10,"input",5),m.bc("ngModelChange",(function(e){return t.objresturant.CompanyName=e})),m.Tb(),m.Jc(11,Xc,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(12,"div",2),m.Ub(13,"div",3),m.Ub(14,"label",7),m.Lc(15,"How many outlets do you have? *"),m.Tb(),m.Ub(16,"nb-select",8),m.bc("ngModelChange",(function(e){return t.objresturant.outletsCount=e})),m.Ub(17,"nb-option",9),m.Lc(18," 1 outle"),m.Tb(),m.Ub(19,"nb-option",9),m.Lc(20,"2 - 5 outlets"),m.Tb(),m.Ub(21,"nb-option",9),m.Lc(22," 6 - 10 outlets"),m.Tb(),m.Ub(23,"nb-option",9),m.Lc(24," 10+ outlets"),m.Tb(),m.Tb(),m.Jc(25,Yc,2,0,"p",6),m.Tb(),m.Tb(),m.Tb(),m.Ub(26,"div",1),m.Ub(27,"div",10),m.Ub(28,"div",3),m.Ub(29,"label",11),m.Lc(30,"what country are your resturant in?*"),m.Tb(),m.Ub(31,"nb-select",8),m.bc("ngModelChange",(function(e){return t.objresturant.CountryID=e})),m.Ub(32,"nb-option",9),m.Lc(33,"Pakistan"),m.Tb(),m.Ub(34,"nb-option",9),m.Lc(35,"Bahrain"),m.Tb(),m.Ub(36,"nb-option",9),m.Lc(37,"UAE"),m.Tb(),m.Ub(38,"nb-option",9),m.Lc(39,"Saudia Arab"),m.Tb(),m.Tb(),m.Jc(40,Qc,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(41,"div",10),m.Ub(42,"div",3),m.Ub(43,"label",12),m.Lc(44,"How did you here about Foodchat? * "),m.Tb(),m.Ub(45,"nb-select",8),m.bc("ngModelChange",(function(e){return t.objresturant.hearbout=e})),m.Ub(46,"nb-option",9),m.Lc(47,"Google"),m.Tb(),m.Ub(48,"nb-option",9),m.Lc(49,"Instagram"),m.Tb(),m.Ub(50,"nb-option",9),m.Lc(51,"Other resturant"),m.Tb(),m.Ub(52,"nb-option",9),m.Lc(53,"Facebook"),m.Tb(),m.Ub(54,"nb-option",9),m.Lc(55,"Friend"),m.Tb(),m.Ub(56,"nb-option",9),m.Lc(57,"Radio"),m.Tb(),m.Ub(58,"nb-option",9),m.Lc(59,"Other"),m.Tb(),m.Tb(),m.Jc(60,Zc,2,0,"p",6),m.Tb(),m.Tb(),m.Tb(),m.Ub(61,"div",1),m.Ub(62,"div",10),m.Ub(63,"div",3),m.Ub(64,"label",11),m.Lc(65,"Mobile Number*"),m.Tb(),m.Ub(66,"input",13),m.bc("ngModelChange",(function(e){return t.objresturant.Mobile=e})),m.Tb(),m.Jc(67,el,2,0,"p",6),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(68,"nb-card"),m.Ub(69,"nb-card-header"),m.Lc(70," Account Setup "),m.Tb(),m.Ub(71,"nb-card-body"),m.Ub(72,"div",1),m.Ub(73,"div",2),m.Ub(74,"div",3),m.Ub(75,"label",4),m.Lc(76,"First name *"),m.Tb(),m.Ub(77,"input",14),m.bc("ngModelChange",(function(e){return t.objresturant.firstname=e})),m.Tb(),m.Jc(78,tl,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(79,"div",2),m.Ub(80,"div",3),m.Ub(81,"label",4),m.Lc(82,"Last name *"),m.Tb(),m.Ub(83,"input",15),m.bc("ngModelChange",(function(e){return t.objresturant.lastname=e})),m.Tb(),m.Jc(84,nl,2,0,"p",6),m.Tb(),m.Tb(),m.Tb(),m.Ub(85,"div",1),m.Ub(86,"div",2),m.Ub(87,"div",3),m.Ub(88,"label",4),m.Lc(89,"Email address *"),m.Tb(),m.Ub(90,"input",16),m.bc("ngModelChange",(function(e){return t.objresturant.emailaddress=e})),m.Tb(),m.Jc(91,rl,2,0,"p",6),m.Tb(),m.Tb(),m.Ub(92,"div",2),m.Ub(93,"div",3),m.Ub(94,"label",4),m.Lc(95,"Choose a password*"),m.Tb(),m.Ub(96,"input",17),m.bc("ngModelChange",(function(e){return t.objresturant.password=e})),m.Tb(),m.Jc(97,ol,2,0,"p",6),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(98,"nb-card-footer"),m.Ub(99,"div",18),m.Ub(100,"button",19),m.bc("click",(function(){return t.SaveClick()})),m.Lc(101,"Save"),m.Tb(),m.Lc(102," \xa0 "),m.Ub(103,"button",20),m.bc("click",(function(){return t.Cancel()})),m.Lc(104,"Cancel"),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&e&&(m.Cb(10),m.lc("ngModel",t.objresturant.CompanyName),m.Cb(1),m.lc("ngIf",t.chkresturant),m.Cb(5),m.lc("ngModel",t.objresturant.outletsCount),m.Cb(1),m.lc("value",0),m.Cb(2),m.lc("value",1),m.Cb(2),m.lc("value",2),m.Cb(2),m.lc("value",3),m.Cb(2),m.lc("ngIf",t.chkoutlets),m.Cb(6),m.lc("ngModel",t.objresturant.CountryID),m.Cb(1),m.lc("value",0),m.Cb(2),m.lc("value",1),m.Cb(2),m.lc("value",2),m.Cb(2),m.lc("value",3),m.Cb(2),m.lc("ngIf",t.chkcountry),m.Cb(5),m.lc("ngModel",t.objresturant.hearbout),m.Cb(1),m.lc("value",0),m.Cb(2),m.lc("value",1),m.Cb(2),m.lc("value",2),m.Cb(2),m.lc("value",3),m.Cb(2),m.lc("value",2),m.Cb(2),m.lc("value",3),m.Cb(2),m.lc("value",3),m.Cb(2),m.lc("ngIf",t.chkhearabout),m.Cb(6),m.lc("ngModel",t.objresturant.Mobile),m.Cb(1),m.lc("ngIf",t.chkMobile),m.Cb(10),m.lc("ngModel",t.objresturant.firstname),m.Cb(1),m.lc("ngIf",t.chkfirsname),m.Cb(5),m.lc("ngModel",t.objresturant.lastname),m.Cb(1),m.lc("ngIf",t.chklastname),m.Cb(6),m.lc("ngModel",t.objresturant.emailaddress),m.Cb(1),m.lc("ngIf",t.chkemail),m.Cb(5),m.lc("ngModel",t.objresturant.password),m.Cb(1),m.lc("ngIf",t.chkpassword))},directives:[l.o,l.q,l.n,l.H,c.b,c.k,c.p,c.s,g.p,l.bb,l.U,l.p,l.l],styles:[""]}),il),ll=function e(){i(this,e)},ul=[{path:"",component:Se,children:[{path:"adduser",component:U},{path:"userrole",component:L},{path:"change-password",component:B},{path:"currency",component:X},{path:"cashdenomination",component:ne},{path:"paymentmode",component:de},{path:"country",component:ge},{path:"printer",component:Te},{path:"possetting",component:_e},{path:"shiftendprocess",component:je},{path:"area",component:Fe},{path:"emailtemplate",component:qc},{path:"subsctptionform",component:cl}]}],hl=[c.j,h.a,(sl=function e(){i(this,e)},sl.\u0275mod=m.Mb({type:sl}),sl.\u0275inj=m.Lb({factory:function(e){return new(e||sl)},imports:[[d.g.forChild(ul)],d.g]}),sl),l.B.forChild(),l.Bb.forChild(),l.r,l.u,l.ob,l.V,l.m,l.I,l.cb,l.wb,u.c,Lc,l.ub],dl=[],pl=((al=function e(){i(this,e)}).\u0275mod=m.Mb({type:al}),al.\u0275inj=m.Lb({factory:function(e){return new(e||al)},providers:[].concat(dl),imports:[[].concat(hl)]}),al)}}])}();